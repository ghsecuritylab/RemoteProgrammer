ARM GAS  /var/folders/0d/93p3r6493yg7p0rvl_4r983m0000gn/T//ccycveM3.s 			page 1


   1              		.cpu cortex-m4
   2              		.eabi_attribute 27, 1
   3              		.eabi_attribute 28, 1
   4              		.eabi_attribute 20, 1
   5              		.eabi_attribute 21, 1
   6              		.eabi_attribute 23, 3
   7              		.eabi_attribute 24, 1
   8              		.eabi_attribute 25, 1
   9              		.eabi_attribute 26, 1
  10              		.eabi_attribute 30, 1
  11              		.eabi_attribute 34, 1
  12              		.eabi_attribute 18, 4
  13              		.file	"term_io.c"
  14              		.text
  15              	.Ltext0:
  16              		.cfi_sections	.debug_frame
  17              		.section	.text.xatoi,"ax",%progbits
  18              		.align	1
  19              		.global	xatoi
  20              		.syntax unified
  21              		.thumb
  22              		.thumb_func
  23              		.fpu fpv4-sp-d16
  25              	xatoi:
  26              	.LFB126:
  27              		.file 1 "Src/communication/term_io.c"
   1:Src/communication/term_io.c **** // Basic code from ChaN, minor modifications by Martin Thomas
   2:Src/communication/term_io.c **** // 2011, 2017 minor tuning by RABW
   3:Src/communication/term_io.c **** 
   4:Src/communication/term_io.c **** #include <stdarg.h>
   5:Src/communication/term_io.c **** #include "term_io.h"
   6:Src/communication/term_io.c **** #include "dbgu.h"
   7:Src/communication/term_io.c **** #include "stm32f4xx_hal.h"
   8:Src/communication/term_io.c **** #include "stm32f4xx.h"
   9:Src/communication/term_io.c **** 
  10:Src/communication/term_io.c **** 
  11:Src/communication/term_io.c **** int xatoi (char **str, long *res)
  12:Src/communication/term_io.c **** {
  28              		.loc 1 12 0
  29              		.cfi_startproc
  30              		@ args = 0, pretend = 0, frame = 0
  31              		@ frame_needed = 0, uses_anonymous_args = 0
  32              		@ link register save eliminated.
  33              	.LVL0:
  34 0000 70B4     		push	{r4, r5, r6}
  35              	.LCFI0:
  36              		.cfi_def_cfa_offset 12
  37              		.cfi_offset 4, -12
  38              		.cfi_offset 5, -8
  39              		.cfi_offset 6, -4
  40              	.LVL1:
  13:Src/communication/term_io.c **** 	uint32_t val;
  14:Src/communication/term_io.c **** 	uint8_t c, radix, s = 0;
  15:Src/communication/term_io.c **** 
  16:Src/communication/term_io.c **** 
  17:Src/communication/term_io.c **** 	while ((c = **str) == ' ') (*str)++;
  41              		.loc 1 17 0
ARM GAS  /var/folders/0d/93p3r6493yg7p0rvl_4r983m0000gn/T//ccycveM3.s 			page 2


  42 0002 01E0     		b	.L2
  43              	.LVL2:
  44              	.L3:
  45              		.loc 1 17 0 is_stmt 0 discriminator 2
  46 0004 0132     		adds	r2, r2, #1
  47 0006 0260     		str	r2, [r0]
  48              	.LVL3:
  49              	.L2:
  50              		.loc 1 17 0 discriminator 1
  51 0008 0268     		ldr	r2, [r0]
  52 000a 1378     		ldrb	r3, [r2]	@ zero_extendqisi2
  53              	.LVL4:
  54 000c 202B     		cmp	r3, #32
  55 000e F9D0     		beq	.L3
  18:Src/communication/term_io.c **** 	if (c == '-') {
  56              		.loc 1 18 0 is_stmt 1
  57 0010 2D2B     		cmp	r3, #45
  58 0012 0AD0     		beq	.L22
  14:Src/communication/term_io.c **** 
  59              		.loc 1 14 0
  60 0014 0026     		movs	r6, #0
  61              	.LVL5:
  62              	.L4:
  19:Src/communication/term_io.c **** 		s = 1;
  20:Src/communication/term_io.c **** 		c = *(++(*str));
  21:Src/communication/term_io.c **** 	}
  22:Src/communication/term_io.c **** 	if (c == '0') {
  63              		.loc 1 22 0
  64 0016 302B     		cmp	r3, #48
  65 0018 0CD0     		beq	.L23
  23:Src/communication/term_io.c **** 		c = *(++(*str));
  24:Src/communication/term_io.c **** 		if (c <= ' ') {
  25:Src/communication/term_io.c **** 			*res = 0; return 1;
  26:Src/communication/term_io.c **** 		}
  27:Src/communication/term_io.c **** 		if (c == 'x') {
  28:Src/communication/term_io.c **** 			radix = 16;
  29:Src/communication/term_io.c **** 			c = *(++(*str));
  30:Src/communication/term_io.c **** 		} else {
  31:Src/communication/term_io.c **** 			if (c == 'b') {
  32:Src/communication/term_io.c **** 				radix = 2;
  33:Src/communication/term_io.c **** 				c = *(++(*str));
  34:Src/communication/term_io.c **** 			} else {
  35:Src/communication/term_io.c **** 				if ((c >= '0')&&(c <= '9'))
  36:Src/communication/term_io.c **** 					radix = 8;
  37:Src/communication/term_io.c **** 				else
  38:Src/communication/term_io.c **** 					return 0;
  39:Src/communication/term_io.c **** 			}
  40:Src/communication/term_io.c **** 		}
  41:Src/communication/term_io.c **** 	} else {
  42:Src/communication/term_io.c **** 		if ((c < '1')||(c > '9'))
  66              		.loc 1 42 0
  67 001a A3F13102 		sub	r2, r3, #49
  68 001e D2B2     		uxtb	r2, r2
  69 0020 082A     		cmp	r2, #8
  70 0022 46D8     		bhi	.L18
  43:Src/communication/term_io.c **** 			return 0;
  44:Src/communication/term_io.c **** 		radix = 10;
ARM GAS  /var/folders/0d/93p3r6493yg7p0rvl_4r983m0000gn/T//ccycveM3.s 			page 3


  71              		.loc 1 44 0
  72 0024 0A25     		movs	r5, #10
  73              	.L9:
  74              	.LVL6:
  45:Src/communication/term_io.c **** 	}
  46:Src/communication/term_io.c **** 	val = 0;
  75              		.loc 1 46 0
  76 0026 0024     		movs	r4, #0
  47:Src/communication/term_io.c **** 	while (c > ' ') {
  77              		.loc 1 47 0
  78 0028 2DE0     		b	.L11
  79              	.LVL7:
  80              	.L22:
  20:Src/communication/term_io.c **** 	}
  81              		.loc 1 20 0
  82 002a 531C     		adds	r3, r2, #1
  83              	.LVL8:
  84 002c 0360     		str	r3, [r0]
  85              	.LVL9:
  86 002e 5378     		ldrb	r3, [r2, #1]	@ zero_extendqisi2
  87              	.LVL10:
  19:Src/communication/term_io.c **** 		c = *(++(*str));
  88              		.loc 1 19 0
  89 0030 0126     		movs	r6, #1
  90 0032 F0E7     		b	.L4
  91              	.LVL11:
  92              	.L23:
  23:Src/communication/term_io.c **** 		if (c <= ' ') {
  93              		.loc 1 23 0
  94 0034 0368     		ldr	r3, [r0]
  95              	.LVL12:
  96 0036 5A1C     		adds	r2, r3, #1
  97 0038 0260     		str	r2, [r0]
  98 003a 5B78     		ldrb	r3, [r3, #1]	@ zero_extendqisi2
  99              	.LVL13:
  24:Src/communication/term_io.c **** 			*res = 0; return 1;
 100              		.loc 1 24 0
 101 003c 202B     		cmp	r3, #32
 102 003e 0AD9     		bls	.L24
  27:Src/communication/term_io.c **** 			radix = 16;
 103              		.loc 1 27 0
 104 0040 782B     		cmp	r3, #120
 105 0042 0CD0     		beq	.L25
  31:Src/communication/term_io.c **** 				radix = 2;
 106              		.loc 1 31 0
 107 0044 622B     		cmp	r3, #98
 108 0046 0FD0     		beq	.L26
  35:Src/communication/term_io.c **** 					radix = 8;
 109              		.loc 1 35 0
 110 0048 A3F13002 		sub	r2, r3, #48
 111 004c D2B2     		uxtb	r2, r2
 112 004e 092A     		cmp	r2, #9
 113 0050 0FD8     		bhi	.L27
  36:Src/communication/term_io.c **** 				else
 114              		.loc 1 36 0
 115 0052 0825     		movs	r5, #8
 116 0054 E7E7     		b	.L9
ARM GAS  /var/folders/0d/93p3r6493yg7p0rvl_4r983m0000gn/T//ccycveM3.s 			page 4


 117              	.L24:
  25:Src/communication/term_io.c **** 		}
 118              		.loc 1 25 0
 119 0056 0023     		movs	r3, #0
 120              	.LVL14:
 121 0058 0B60     		str	r3, [r1]
 122              	.LVL15:
 123 005a 0120     		movs	r0, #1
 124              	.LVL16:
 125 005c 2AE0     		b	.L1
 126              	.LVL17:
 127              	.L25:
  29:Src/communication/term_io.c **** 		} else {
 128              		.loc 1 29 0
 129 005e 531C     		adds	r3, r2, #1
 130              	.LVL18:
 131 0060 0360     		str	r3, [r0]
 132              	.LVL19:
 133 0062 5378     		ldrb	r3, [r2, #1]	@ zero_extendqisi2
 134              	.LVL20:
  28:Src/communication/term_io.c **** 			c = *(++(*str));
 135              		.loc 1 28 0
 136 0064 1025     		movs	r5, #16
 137 0066 DEE7     		b	.L9
 138              	.LVL21:
 139              	.L26:
  33:Src/communication/term_io.c **** 			} else {
 140              		.loc 1 33 0
 141 0068 531C     		adds	r3, r2, #1
 142              	.LVL22:
 143 006a 0360     		str	r3, [r0]
 144              	.LVL23:
 145 006c 5378     		ldrb	r3, [r2, #1]	@ zero_extendqisi2
 146              	.LVL24:
  32:Src/communication/term_io.c **** 				c = *(++(*str));
 147              		.loc 1 32 0
 148 006e 0225     		movs	r5, #2
 149 0070 D9E7     		b	.L9
 150              	.LVL25:
 151              	.L27:
  38:Src/communication/term_io.c **** 			}
 152              		.loc 1 38 0
 153 0072 0020     		movs	r0, #0
 154              	.LVL26:
 155 0074 1EE0     		b	.L1
 156              	.LVL27:
 157              	.L13:
  48:Src/communication/term_io.c **** 		if (c >= 'a') c -= 0x20;
  49:Src/communication/term_io.c **** 		c -= '0';
  50:Src/communication/term_io.c **** 		if (c >= 17) {
  51:Src/communication/term_io.c **** 			c -= 7;
  52:Src/communication/term_io.c **** 			if (c <= 9) return 0;
  53:Src/communication/term_io.c **** 		}
  54:Src/communication/term_io.c **** 		if (c >= radix) return 0;
 158              		.loc 1 54 0
 159 0076 AA42     		cmp	r2, r5
 160 0078 1ED2     		bcs	.L20
ARM GAS  /var/folders/0d/93p3r6493yg7p0rvl_4r983m0000gn/T//ccycveM3.s 			page 5


  55:Src/communication/term_io.c **** 		val = val * radix + c;
 161              		.loc 1 55 0
 162 007a 04FB0524 		mla	r4, r4, r5, r2
 163              	.LVL28:
  56:Src/communication/term_io.c **** 		c = *(++(*str));
 164              		.loc 1 56 0
 165 007e 0368     		ldr	r3, [r0]
 166 0080 5A1C     		adds	r2, r3, #1
 167              	.LVL29:
 168 0082 0260     		str	r2, [r0]
 169 0084 5B78     		ldrb	r3, [r3, #1]	@ zero_extendqisi2
 170              	.LVL30:
 171              	.L11:
  47:Src/communication/term_io.c **** 		if (c >= 'a') c -= 0x20;
 172              		.loc 1 47 0
 173 0086 202B     		cmp	r3, #32
 174 0088 0ED9     		bls	.L28
  48:Src/communication/term_io.c **** 		c -= '0';
 175              		.loc 1 48 0
 176 008a 602B     		cmp	r3, #96
 177 008c 01D9     		bls	.L12
  48:Src/communication/term_io.c **** 		c -= '0';
 178              		.loc 1 48 0 is_stmt 0 discriminator 1
 179 008e 203B     		subs	r3, r3, #32
 180              	.LVL31:
 181 0090 DBB2     		uxtb	r3, r3
 182              	.LVL32:
 183              	.L12:
  49:Src/communication/term_io.c **** 		if (c >= 17) {
 184              		.loc 1 49 0 is_stmt 1
 185 0092 A3F13002 		sub	r2, r3, #48
 186 0096 D2B2     		uxtb	r2, r2
 187              	.LVL33:
  50:Src/communication/term_io.c **** 			c -= 7;
 188              		.loc 1 50 0
 189 0098 102A     		cmp	r2, #16
 190 009a ECD9     		bls	.L13
  51:Src/communication/term_io.c **** 			if (c <= 9) return 0;
 191              		.loc 1 51 0
 192 009c 373B     		subs	r3, r3, #55
 193 009e DAB2     		uxtb	r2, r3
 194              	.LVL34:
  52:Src/communication/term_io.c **** 		}
 195              		.loc 1 52 0
 196 00a0 092A     		cmp	r2, #9
 197 00a2 E8D8     		bhi	.L13
 198 00a4 0020     		movs	r0, #0
 199              	.LVL35:
 200 00a6 05E0     		b	.L1
 201              	.LVL36:
 202              	.L28:
  57:Src/communication/term_io.c **** 	}
  58:Src/communication/term_io.c **** 	if (s) val = -val;
 203              		.loc 1 58 0
 204 00a8 06B1     		cbz	r6, .L15
 205              		.loc 1 58 0 is_stmt 0 discriminator 1
 206 00aa 6442     		negs	r4, r4
ARM GAS  /var/folders/0d/93p3r6493yg7p0rvl_4r983m0000gn/T//ccycveM3.s 			page 6


 207              	.LVL37:
 208              	.L15:
  59:Src/communication/term_io.c **** 	*res = val;
 209              		.loc 1 59 0 is_stmt 1
 210 00ac 0C60     		str	r4, [r1]
  60:Src/communication/term_io.c **** 	return 1;
 211              		.loc 1 60 0
 212 00ae 0120     		movs	r0, #1
 213              	.LVL38:
 214 00b0 00E0     		b	.L1
 215              	.LVL39:
 216              	.L18:
  43:Src/communication/term_io.c **** 		radix = 10;
 217              		.loc 1 43 0
 218 00b2 0020     		movs	r0, #0
 219              	.LVL40:
 220              	.L1:
  61:Src/communication/term_io.c **** }
 221              		.loc 1 61 0
 222 00b4 70BC     		pop	{r4, r5, r6}
 223              	.LCFI1:
 224              		.cfi_remember_state
 225              		.cfi_restore 6
 226              		.cfi_restore 5
 227              		.cfi_restore 4
 228              		.cfi_def_cfa_offset 0
 229              	.LVL41:
 230 00b6 7047     		bx	lr
 231              	.LVL42:
 232              	.L20:
 233              	.LCFI2:
 234              		.cfi_restore_state
  54:Src/communication/term_io.c **** 		val = val * radix + c;
 235              		.loc 1 54 0
 236 00b8 0020     		movs	r0, #0
 237              	.LVL43:
 238 00ba FBE7     		b	.L1
 239              		.cfi_endproc
 240              	.LFE126:
 242              		.section	.text.xputc,"ax",%progbits
 243              		.align	1
 244              		.global	xputc
 245              		.syntax unified
 246              		.thumb
 247              		.thumb_func
 248              		.fpu fpv4-sp-d16
 250              	xputc:
 251              	.LFB127:
  62:Src/communication/term_io.c **** 
  63:Src/communication/term_io.c **** 
  64:Src/communication/term_io.c **** 
  65:Src/communication/term_io.c **** 
  66:Src/communication/term_io.c **** void xputc (char c)
  67:Src/communication/term_io.c **** {
 252              		.loc 1 67 0
 253              		.cfi_startproc
 254              		@ args = 0, pretend = 0, frame = 0
ARM GAS  /var/folders/0d/93p3r6493yg7p0rvl_4r983m0000gn/T//ccycveM3.s 			page 7


 255              		@ frame_needed = 0, uses_anonymous_args = 0
 256              	.LVL44:
 257 0000 08B5     		push	{r3, lr}
 258              	.LCFI3:
 259              		.cfi_def_cfa_offset 8
 260              		.cfi_offset 3, -8
 261              		.cfi_offset 14, -4
  68:Src/communication/term_io.c **** 	debug_chr(c);
 262              		.loc 1 68 0
 263 0002 FFF7FEFF 		bl	debug_chr
 264              	.LVL45:
  69:Src/communication/term_io.c **** }
 265              		.loc 1 69 0
 266 0006 08BD     		pop	{r3, pc}
 267              		.cfi_endproc
 268              	.LFE127:
 270              		.section	.text.xputs,"ax",%progbits
 271              		.align	1
 272              		.global	xputs
 273              		.syntax unified
 274              		.thumb
 275              		.thumb_func
 276              		.fpu fpv4-sp-d16
 278              	xputs:
 279              	.LFB128:
  70:Src/communication/term_io.c **** 
  71:Src/communication/term_io.c **** 
  72:Src/communication/term_io.c **** 
  73:Src/communication/term_io.c **** 
  74:Src/communication/term_io.c **** void xputs (const char* str)
  75:Src/communication/term_io.c **** {
 280              		.loc 1 75 0
 281              		.cfi_startproc
 282              		@ args = 0, pretend = 0, frame = 0
 283              		@ frame_needed = 0, uses_anonymous_args = 0
 284              	.LVL46:
 285 0000 10B5     		push	{r4, lr}
 286              	.LCFI4:
 287              		.cfi_def_cfa_offset 8
 288              		.cfi_offset 4, -8
 289              		.cfi_offset 14, -4
 290 0002 0446     		mov	r4, r0
  76:Src/communication/term_io.c **** 	while (*str)
 291              		.loc 1 76 0
 292 0004 02E0     		b	.L32
 293              	.LVL47:
 294              	.L33:
  77:Src/communication/term_io.c **** 		xputc(*str++);
 295              		.loc 1 77 0
 296 0006 0134     		adds	r4, r4, #1
 297              	.LVL48:
 298 0008 FFF7FEFF 		bl	xputc
 299              	.LVL49:
 300              	.L32:
  76:Src/communication/term_io.c **** 	while (*str)
 301              		.loc 1 76 0
 302 000c 2078     		ldrb	r0, [r4]	@ zero_extendqisi2
ARM GAS  /var/folders/0d/93p3r6493yg7p0rvl_4r983m0000gn/T//ccycveM3.s 			page 8


 303 000e 0028     		cmp	r0, #0
 304 0010 F9D1     		bne	.L33
  78:Src/communication/term_io.c **** }
 305              		.loc 1 78 0
 306 0012 10BD     		pop	{r4, pc}
 307              		.cfi_endproc
 308              	.LFE128:
 310              		.section	.text.xitoa,"ax",%progbits
 311              		.align	1
 312              		.global	xitoa
 313              		.syntax unified
 314              		.thumb
 315              		.thumb_func
 316              		.fpu fpv4-sp-d16
 318              	xitoa:
 319              	.LFB129:
  79:Src/communication/term_io.c **** 
  80:Src/communication/term_io.c **** 
  81:Src/communication/term_io.c **** 
  82:Src/communication/term_io.c **** 
  83:Src/communication/term_io.c **** void xitoa (long val, int radix, int len)
  84:Src/communication/term_io.c **** {
 320              		.loc 1 84 0
 321              		.cfi_startproc
 322              		@ args = 0, pretend = 0, frame = 24
 323              		@ frame_needed = 0, uses_anonymous_args = 0
 324              	.LVL50:
 325 0000 F0B5     		push	{r4, r5, r6, r7, lr}
 326              	.LCFI5:
 327              		.cfi_def_cfa_offset 20
 328              		.cfi_offset 4, -20
 329              		.cfi_offset 5, -16
 330              		.cfi_offset 6, -12
 331              		.cfi_offset 7, -8
 332              		.cfi_offset 14, -4
 333 0002 87B0     		sub	sp, sp, #28
 334              	.LCFI6:
 335              		.cfi_def_cfa_offset 48
 336              	.LVL51:
  85:Src/communication/term_io.c **** 	uint8_t c, r, sgn = 0, pad = ' ';
  86:Src/communication/term_io.c **** 	uint8_t s[20], i = 0;
  87:Src/communication/term_io.c **** 	uint32_t v;
  88:Src/communication/term_io.c **** 
  89:Src/communication/term_io.c **** 
  90:Src/communication/term_io.c **** 	if (radix < 0) {
 337              		.loc 1 90 0
 338 0004 B1F1000E 		subs	lr, r1, #0
 339 0008 07DB     		blt	.L51
  85:Src/communication/term_io.c **** 	uint8_t c, r, sgn = 0, pad = ' ';
 340              		.loc 1 85 0
 341 000a 0021     		movs	r1, #0
 342              	.LVL52:
 343              	.L36:
  91:Src/communication/term_io.c **** 		radix = -radix;
  92:Src/communication/term_io.c **** 		if (val < 0) {
  93:Src/communication/term_io.c **** 			val = -val;
  94:Src/communication/term_io.c **** 			sgn = '-';
ARM GAS  /var/folders/0d/93p3r6493yg7p0rvl_4r983m0000gn/T//ccycveM3.s 			page 9


  95:Src/communication/term_io.c **** 		}
  96:Src/communication/term_io.c **** 	}
  97:Src/communication/term_io.c **** 	v = val;
  98:Src/communication/term_io.c **** 	r = radix;
  99:Src/communication/term_io.c **** 	if (len < 0) {
 344              		.loc 1 99 0
 345 000c 002A     		cmp	r2, #0
 346 000e 0DDB     		blt	.L52
  85:Src/communication/term_io.c **** 	uint8_t c, r, sgn = 0, pad = ' ';
 347              		.loc 1 85 0
 348 0010 2027     		movs	r7, #32
 349              	.LVL53:
 350              	.L37:
 100:Src/communication/term_io.c **** 		len = -len;
 101:Src/communication/term_io.c **** 		pad = '0';
 102:Src/communication/term_io.c **** 	}
 103:Src/communication/term_io.c **** 	if (len > 20) return;
 351              		.loc 1 103 0
 352 0012 142A     		cmp	r2, #20
 353 0014 40DC     		bgt	.L35
  86:Src/communication/term_io.c **** 	uint32_t v;
 354              		.loc 1 86 0
 355 0016 0026     		movs	r6, #0
 356 0018 17E0     		b	.L40
 357              	.LVL54:
 358              	.L51:
  91:Src/communication/term_io.c **** 		radix = -radix;
 359              		.loc 1 91 0
 360 001a CEF1000E 		rsb	lr, lr, #0
 361              	.LVL55:
  92:Src/communication/term_io.c **** 			val = -val;
 362              		.loc 1 92 0
 363 001e 0028     		cmp	r0, #0
 364 0020 01DB     		blt	.L53
  85:Src/communication/term_io.c **** 	uint8_t s[20], i = 0;
 365              		.loc 1 85 0
 366 0022 0021     		movs	r1, #0
 367 0024 F2E7     		b	.L36
 368              	.L53:
  93:Src/communication/term_io.c **** 			sgn = '-';
 369              		.loc 1 93 0
 370 0026 4042     		negs	r0, r0
 371              	.LVL56:
  94:Src/communication/term_io.c **** 		}
 372              		.loc 1 94 0
 373 0028 2D21     		movs	r1, #45
 374 002a EFE7     		b	.L36
 375              	.LVL57:
 376              	.L52:
 100:Src/communication/term_io.c **** 		pad = '0';
 377              		.loc 1 100 0
 378 002c 5242     		negs	r2, r2
 379              	.LVL58:
 101:Src/communication/term_io.c **** 	}
 380              		.loc 1 101 0
 381 002e 3027     		movs	r7, #48
 382 0030 EFE7     		b	.L37
ARM GAS  /var/folders/0d/93p3r6493yg7p0rvl_4r983m0000gn/T//ccycveM3.s 			page 10


 383              	.LVL59:
 384              	.L39:
 104:Src/communication/term_io.c **** 	do {
 105:Src/communication/term_io.c **** 		c = (uint8_t)(v % r);
 106:Src/communication/term_io.c **** 		if (c >= 10) c += 7;
 107:Src/communication/term_io.c **** 		c += '0';
 385              		.loc 1 107 0
 386 0032 3033     		adds	r3, r3, #48
 387              	.LVL60:
 108:Src/communication/term_io.c **** 		s[i++] = c;
 388              		.loc 1 108 0
 389 0034 741C     		adds	r4, r6, #1
 390 0036 E4B2     		uxtb	r4, r4
 391              	.LVL61:
 392 0038 0DF1180C 		add	ip, sp, #24
 393 003c B444     		add	ip, ip, r6
 394 003e 0CF8143C 		strb	r3, [ip, #-20]
 109:Src/communication/term_io.c **** 		v /= r;
 395              		.loc 1 109 0
 396 0042 B0FBF5F0 		udiv	r0, r0, r5
 397              	.LVL62:
 110:Src/communication/term_io.c **** 	} while (v);
 398              		.loc 1 110 0
 399 0046 60B1     		cbz	r0, .L54
 108:Src/communication/term_io.c **** 		s[i++] = c;
 400              		.loc 1 108 0
 401 0048 2646     		mov	r6, r4
 402              	.LVL63:
 403              	.L40:
 105:Src/communication/term_io.c **** 		if (c >= 10) c += 7;
 404              		.loc 1 105 0
 405 004a 5FFA8EF5 		uxtb	r5, lr
 406 004e B0FBF5F3 		udiv	r3, r0, r5
 407 0052 05FB1303 		mls	r3, r5, r3, r0
 408 0056 DBB2     		uxtb	r3, r3
 409              	.LVL64:
 106:Src/communication/term_io.c **** 		c += '0';
 410              		.loc 1 106 0
 411 0058 092B     		cmp	r3, #9
 412 005a EAD9     		bls	.L39
 106:Src/communication/term_io.c **** 		c += '0';
 413              		.loc 1 106 0 is_stmt 0 discriminator 1
 414 005c 0733     		adds	r3, r3, #7
 415              	.LVL65:
 416 005e DBB2     		uxtb	r3, r3
 417              	.LVL66:
 418 0060 E7E7     		b	.L39
 419              	.LVL67:
 420              	.L54:
 111:Src/communication/term_io.c **** 	if (sgn) s[i++] = sgn;
 421              		.loc 1 111 0 is_stmt 1
 422 0062 61B1     		cbz	r1, .L42
 423              		.loc 1 111 0 is_stmt 0 discriminator 1
 424 0064 0236     		adds	r6, r6, #2
 425              	.LVL68:
 426 0066 06AB     		add	r3, sp, #24
 427              	.LVL69:
ARM GAS  /var/folders/0d/93p3r6493yg7p0rvl_4r983m0000gn/T//ccycveM3.s 			page 11


 428 0068 1C44     		add	r4, r4, r3
 429 006a 04F8141C 		strb	r1, [r4, #-20]
 430              	.LVL70:
 431 006e F4B2     		uxtb	r4, r6
 432 0070 05E0     		b	.L42
 433              	.LVL71:
 434              	.L43:
 112:Src/communication/term_io.c **** 	while (i < len)
 113:Src/communication/term_io.c **** 		s[i++] = pad;
 435              		.loc 1 113 0 is_stmt 1
 436 0072 0134     		adds	r4, r4, #1
 437              	.LVL72:
 438 0074 E4B2     		uxtb	r4, r4
 439              	.LVL73:
 440 0076 06A9     		add	r1, sp, #24
 441 0078 0B44     		add	r3, r3, r1
 442 007a 03F8147C 		strb	r7, [r3, #-20]
 443              	.LVL74:
 444              	.L42:
 112:Src/communication/term_io.c **** 	while (i < len)
 445              		.loc 1 112 0
 446 007e 2346     		mov	r3, r4
 447 0080 9442     		cmp	r4, r2
 448 0082 F6DB     		blt	.L43
 449              	.LVL75:
 450              	.L44:
 114:Src/communication/term_io.c **** 	do
 115:Src/communication/term_io.c **** 		xputc(s[--i]);
 451              		.loc 1 115 0 discriminator 1
 452 0084 013C     		subs	r4, r4, #1
 453              	.LVL76:
 454 0086 E4B2     		uxtb	r4, r4
 455              	.LVL77:
 456 0088 06AB     		add	r3, sp, #24
 457 008a 2344     		add	r3, r3, r4
 458 008c 13F8140C 		ldrb	r0, [r3, #-20]	@ zero_extendqisi2
 459 0090 FFF7FEFF 		bl	xputc
 460              	.LVL78:
 116:Src/communication/term_io.c **** 	while (i);
 461              		.loc 1 116 0 discriminator 1
 462 0094 002C     		cmp	r4, #0
 463 0096 F5D1     		bne	.L44
 464              	.LVL79:
 465              	.L35:
 117:Src/communication/term_io.c **** }
 466              		.loc 1 117 0
 467 0098 07B0     		add	sp, sp, #28
 468              	.LCFI7:
 469              		.cfi_def_cfa_offset 20
 470              		@ sp needed
 471 009a F0BD     		pop	{r4, r5, r6, r7, pc}
 472              		.cfi_endproc
 473              	.LFE129:
 475              		.section	.text.xprintf,"ax",%progbits
 476              		.align	1
 477              		.global	xprintf
 478              		.syntax unified
ARM GAS  /var/folders/0d/93p3r6493yg7p0rvl_4r983m0000gn/T//ccycveM3.s 			page 12


 479              		.thumb
 480              		.thumb_func
 481              		.fpu fpv4-sp-d16
 483              	xprintf:
 484              	.LFB130:
 118:Src/communication/term_io.c **** 
 119:Src/communication/term_io.c **** void xprintf (const char* str, ...)
 120:Src/communication/term_io.c **** {
 485              		.loc 1 120 0
 486              		.cfi_startproc
 487              		@ args = 4, pretend = 16, frame = 8
 488              		@ frame_needed = 0, uses_anonymous_args = 1
 489              	.LVL80:
 490 0000 0FB4     		push	{r0, r1, r2, r3}
 491              	.LCFI8:
 492              		.cfi_def_cfa_offset 16
 493              		.cfi_offset 0, -16
 494              		.cfi_offset 1, -12
 495              		.cfi_offset 2, -8
 496              		.cfi_offset 3, -4
 497 0002 30B5     		push	{r4, r5, lr}
 498              	.LCFI9:
 499              		.cfi_def_cfa_offset 28
 500              		.cfi_offset 4, -28
 501              		.cfi_offset 5, -24
 502              		.cfi_offset 14, -20
 503 0004 83B0     		sub	sp, sp, #12
 504              	.LCFI10:
 505              		.cfi_def_cfa_offset 40
 506 0006 06AB     		add	r3, sp, #24
 507 0008 53F8042B 		ldr	r2, [r3], #4
 121:Src/communication/term_io.c **** 	va_list arp;
 122:Src/communication/term_io.c **** 	int d, r, w, s, l;
 123:Src/communication/term_io.c **** 
 124:Src/communication/term_io.c **** 
 125:Src/communication/term_io.c **** 	va_start(arp, str);
 508              		.loc 1 125 0
 509 000c 0193     		str	r3, [sp, #4]
 126:Src/communication/term_io.c **** 
 127:Src/communication/term_io.c **** 	while ((d = *str++) != 0) {
 510              		.loc 1 127 0
 511 000e 02E0     		b	.L56
 512              	.LVL81:
 513              	.L82:
 128:Src/communication/term_io.c **** 		if (d != '%') {
 129:Src/communication/term_io.c **** 			xputc(d); continue;
 514              		.loc 1 129 0
 515 0010 FFF7FEFF 		bl	xputc
 516              	.LVL82:
 127:Src/communication/term_io.c **** 		if (d != '%') {
 517              		.loc 1 127 0
 518 0014 2246     		mov	r2, r4
 519              	.LVL83:
 520              	.L56:
 521 0016 541C     		adds	r4, r2, #1
 522              	.LVL84:
 523 0018 1078     		ldrb	r0, [r2]	@ zero_extendqisi2
ARM GAS  /var/folders/0d/93p3r6493yg7p0rvl_4r983m0000gn/T//ccycveM3.s 			page 13


 524              	.LVL85:
 525 001a 0028     		cmp	r0, #0
 526 001c 6AD0     		beq	.L55
 128:Src/communication/term_io.c **** 		if (d != '%') {
 527              		.loc 1 128 0
 528 001e 2528     		cmp	r0, #37
 529 0020 F6D1     		bne	.L82
 130:Src/communication/term_io.c **** 		}
 131:Src/communication/term_io.c **** 		d = *str++; w = r = s = l = 0;
 530              		.loc 1 131 0
 531 0022 941C     		adds	r4, r2, #2
 532              	.LVL86:
 533 0024 5378     		ldrb	r3, [r2, #1]	@ zero_extendqisi2
 534              	.LVL87:
 132:Src/communication/term_io.c **** 		if (d == '0') {
 535              		.loc 1 132 0
 536 0026 302B     		cmp	r3, #48
 537 0028 02D0     		beq	.L83
 131:Src/communication/term_io.c **** 		if (d == '0') {
 538              		.loc 1 131 0
 539 002a 0025     		movs	r5, #0
 540              	.LVL88:
 541              	.L59:
 542 002c 0022     		movs	r2, #0
 543 002e 0BE0     		b	.L60
 544              	.LVL89:
 545              	.L83:
 133:Src/communication/term_io.c **** 			d = *str++; s = 1;
 546              		.loc 1 133 0
 547 0030 D41C     		adds	r4, r2, #3
 548              	.LVL90:
 549 0032 9378     		ldrb	r3, [r2, #2]	@ zero_extendqisi2
 550              	.LVL91:
 551 0034 0125     		movs	r5, #1
 552 0036 F9E7     		b	.L59
 553              	.LVL92:
 554              	.L61:
 134:Src/communication/term_io.c **** 		}
 135:Src/communication/term_io.c **** 		while ((d >= '0')&&(d <= '9')) {
 136:Src/communication/term_io.c **** 			w += w * 10 + (d - '0');
 555              		.loc 1 136 0
 556 0038 02EB8200 		add	r0, r2, r2, lsl #2
 557 003c 4100     		lsls	r1, r0, #1
 558 003e 303B     		subs	r3, r3, #48
 559              	.LVL93:
 560 0040 0B44     		add	r3, r3, r1
 561              	.LVL94:
 562 0042 1A44     		add	r2, r2, r3
 563              	.LVL95:
 137:Src/communication/term_io.c **** 			d = *str++;
 564              		.loc 1 137 0
 565 0044 2378     		ldrb	r3, [r4]	@ zero_extendqisi2
 566              	.LVL96:
 567 0046 0134     		adds	r4, r4, #1
 568              	.LVL97:
 569              	.L60:
 135:Src/communication/term_io.c **** 			w += w * 10 + (d - '0');
ARM GAS  /var/folders/0d/93p3r6493yg7p0rvl_4r983m0000gn/T//ccycveM3.s 			page 14


 570              		.loc 1 135 0
 571 0048 A3F13001 		sub	r1, r3, #48
 572 004c 0929     		cmp	r1, #9
 573 004e F3D9     		bls	.L61
 138:Src/communication/term_io.c **** 		}
 139:Src/communication/term_io.c **** 		if (s) w = -w;
 574              		.loc 1 139 0
 575 0050 05B1     		cbz	r5, .L62
 576              		.loc 1 139 0 is_stmt 0 discriminator 1
 577 0052 5242     		negs	r2, r2
 578              	.LVL98:
 579              	.L62:
 140:Src/communication/term_io.c **** 		if (d == 'l') {
 580              		.loc 1 140 0 is_stmt 1
 581 0054 6C2B     		cmp	r3, #108
 582 0056 1ED0     		beq	.L84
 131:Src/communication/term_io.c **** 		if (d == '0') {
 583              		.loc 1 131 0
 584 0058 0020     		movs	r0, #0
 585              	.LVL99:
 586              	.L63:
 141:Src/communication/term_io.c **** 			l = 1;
 142:Src/communication/term_io.c **** 			d = *str++;
 143:Src/communication/term_io.c **** 		}
 144:Src/communication/term_io.c **** 		if (!d) break;
 587              		.loc 1 144 0
 588 005a 002B     		cmp	r3, #0
 589 005c 4AD0     		beq	.L55
 145:Src/communication/term_io.c **** 		if (d == 's') {
 590              		.loc 1 145 0
 591 005e 732B     		cmp	r3, #115
 592 0060 1DD0     		beq	.L85
 146:Src/communication/term_io.c **** 			xputs(va_arg(arp, char*));
 147:Src/communication/term_io.c **** 			continue;
 148:Src/communication/term_io.c **** 		}
 149:Src/communication/term_io.c **** 		if (d == 'c') {
 593              		.loc 1 149 0
 594 0062 632B     		cmp	r3, #99
 595 0064 23D0     		beq	.L86
 150:Src/communication/term_io.c **** 			xputc((char)va_arg(arp, int));
 151:Src/communication/term_io.c **** 			continue;
 152:Src/communication/term_io.c **** 		}
 153:Src/communication/term_io.c **** 		if (d == 'u') r = 10;
 596              		.loc 1 153 0
 597 0066 752B     		cmp	r3, #117
 598 0068 29D0     		beq	.L76
 131:Src/communication/term_io.c **** 		if (d == '0') {
 599              		.loc 1 131 0
 600 006a 0021     		movs	r1, #0
 601              	.L67:
 602              	.LVL100:
 154:Src/communication/term_io.c **** 		if (d == 'd') r = -10;
 603              		.loc 1 154 0
 604 006c 642B     		cmp	r3, #100
 605 006e 28D0     		beq	.L87
 606              	.LVL101:
 607              	.L68:
ARM GAS  /var/folders/0d/93p3r6493yg7p0rvl_4r983m0000gn/T//ccycveM3.s 			page 15


 155:Src/communication/term_io.c **** 		if (d == 'X' || d == 'x') r = 16; // 'x' added by mthomas in increase compatibility
 608              		.loc 1 155 0
 609 0070 582B     		cmp	r3, #88
 610 0072 29D0     		beq	.L78
 611              		.loc 1 155 0 is_stmt 0 discriminator 2
 612 0074 782B     		cmp	r3, #120
 613 0076 29D0     		beq	.L88
 614              	.LVL102:
 615              	.L69:
 156:Src/communication/term_io.c **** 		if (d == 'b') r = 2;
 616              		.loc 1 156 0 is_stmt 1
 617 0078 622B     		cmp	r3, #98
 618 007a 29D0     		beq	.L80
 157:Src/communication/term_io.c **** 		if (!r) break;
 619              		.loc 1 157 0
 620 007c 0029     		cmp	r1, #0
 621 007e 39D0     		beq	.L55
 622              	.LVL103:
 623              	.L70:
 158:Src/communication/term_io.c **** 		if (l) {
 624              		.loc 1 158 0
 625 0080 40BB     		cbnz	r0, .L89
 159:Src/communication/term_io.c **** 			xitoa((long)va_arg(arp, long), r, w);
 160:Src/communication/term_io.c **** 		} else {
 161:Src/communication/term_io.c **** 			if (r > 0)
 626              		.loc 1 161 0
 627 0082 0029     		cmp	r1, #0
 628 0084 2EDD     		ble	.L72
 162:Src/communication/term_io.c **** 				xitoa((unsigned long)va_arg(arp, int), r, w);
 629              		.loc 1 162 0
 630 0086 019B     		ldr	r3, [sp, #4]
 631              	.LVL104:
 632 0088 181D     		adds	r0, r3, #4
 633              	.LVL105:
 634 008a 0190     		str	r0, [sp, #4]
 635 008c 1868     		ldr	r0, [r3]
 636 008e FFF7FEFF 		bl	xitoa
 637              	.LVL106:
 638 0092 2246     		mov	r2, r4
 639 0094 BFE7     		b	.L56
 640              	.LVL107:
 641              	.L84:
 142:Src/communication/term_io.c **** 		}
 642              		.loc 1 142 0
 643 0096 2378     		ldrb	r3, [r4]	@ zero_extendqisi2
 644              	.LVL108:
 645 0098 0134     		adds	r4, r4, #1
 646              	.LVL109:
 141:Src/communication/term_io.c **** 			d = *str++;
 647              		.loc 1 141 0
 648 009a 0120     		movs	r0, #1
 649 009c DDE7     		b	.L63
 650              	.LVL110:
 651              	.L85:
 146:Src/communication/term_io.c **** 			continue;
 652              		.loc 1 146 0
 653 009e 019B     		ldr	r3, [sp, #4]
ARM GAS  /var/folders/0d/93p3r6493yg7p0rvl_4r983m0000gn/T//ccycveM3.s 			page 16


 654              	.LVL111:
 655 00a0 1A1D     		adds	r2, r3, #4
 656              	.LVL112:
 657 00a2 0192     		str	r2, [sp, #4]
 658 00a4 1868     		ldr	r0, [r3]
 659              	.LVL113:
 660 00a6 FFF7FEFF 		bl	xputs
 661              	.LVL114:
 147:Src/communication/term_io.c **** 		}
 662              		.loc 1 147 0
 663 00aa 2246     		mov	r2, r4
 664 00ac B3E7     		b	.L56
 665              	.LVL115:
 666              	.L86:
 150:Src/communication/term_io.c **** 			continue;
 667              		.loc 1 150 0
 668 00ae 019B     		ldr	r3, [sp, #4]
 669              	.LVL116:
 670 00b0 1A1D     		adds	r2, r3, #4
 671              	.LVL117:
 672 00b2 0192     		str	r2, [sp, #4]
 673 00b4 1878     		ldrb	r0, [r3]	@ zero_extendqisi2
 674              	.LVL118:
 675 00b6 FFF7FEFF 		bl	xputc
 676              	.LVL119:
 151:Src/communication/term_io.c **** 		}
 677              		.loc 1 151 0
 678 00ba 2246     		mov	r2, r4
 679 00bc ABE7     		b	.L56
 680              	.LVL120:
 681              	.L76:
 153:Src/communication/term_io.c **** 		if (d == 'd') r = -10;
 682              		.loc 1 153 0
 683 00be 0A21     		movs	r1, #10
 684 00c0 D4E7     		b	.L67
 685              	.LVL121:
 686              	.L87:
 154:Src/communication/term_io.c **** 		if (d == 'X' || d == 'x') r = 16; // 'x' added by mthomas in increase compatibility
 687              		.loc 1 154 0
 688 00c2 6FF00901 		mvn	r1, #9
 689              	.LVL122:
 690 00c6 D3E7     		b	.L68
 691              	.LVL123:
 692              	.L78:
 155:Src/communication/term_io.c **** 		if (d == 'b') r = 2;
 693              		.loc 1 155 0
 694 00c8 1021     		movs	r1, #16
 695              	.LVL124:
 696 00ca D5E7     		b	.L69
 697              	.LVL125:
 698              	.L88:
 699 00cc 1021     		movs	r1, #16
 700              	.LVL126:
 701 00ce D3E7     		b	.L69
 702              	.LVL127:
 703              	.L80:
 156:Src/communication/term_io.c **** 		if (!r) break;
ARM GAS  /var/folders/0d/93p3r6493yg7p0rvl_4r983m0000gn/T//ccycveM3.s 			page 17


 704              		.loc 1 156 0
 705 00d0 0221     		movs	r1, #2
 706              	.LVL128:
 707 00d2 D5E7     		b	.L70
 708              	.L89:
 159:Src/communication/term_io.c **** 		} else {
 709              		.loc 1 159 0
 710 00d4 019B     		ldr	r3, [sp, #4]
 711              	.LVL129:
 712 00d6 181D     		adds	r0, r3, #4
 713              	.LVL130:
 714 00d8 0190     		str	r0, [sp, #4]
 715 00da 1868     		ldr	r0, [r3]
 716 00dc FFF7FEFF 		bl	xitoa
 717              	.LVL131:
 718 00e0 2246     		mov	r2, r4
 719 00e2 98E7     		b	.L56
 720              	.LVL132:
 721              	.L72:
 163:Src/communication/term_io.c **** 			else
 164:Src/communication/term_io.c **** 				xitoa((long)va_arg(arp, int), r, w);
 722              		.loc 1 164 0
 723 00e4 019B     		ldr	r3, [sp, #4]
 724              	.LVL133:
 725 00e6 181D     		adds	r0, r3, #4
 726              	.LVL134:
 727 00e8 0190     		str	r0, [sp, #4]
 728 00ea 1868     		ldr	r0, [r3]
 729 00ec FFF7FEFF 		bl	xitoa
 730              	.LVL135:
 731 00f0 2246     		mov	r2, r4
 732 00f2 90E7     		b	.L56
 733              	.LVL136:
 734              	.L55:
 165:Src/communication/term_io.c **** 		}
 166:Src/communication/term_io.c **** 	}
 167:Src/communication/term_io.c **** 
 168:Src/communication/term_io.c **** 	va_end(arp);
 169:Src/communication/term_io.c **** }
 735              		.loc 1 169 0
 736 00f4 03B0     		add	sp, sp, #12
 737              	.LCFI11:
 738              		.cfi_def_cfa_offset 28
 739              		@ sp needed
 740 00f6 BDE83040 		pop	{r4, r5, lr}
 741              	.LCFI12:
 742              		.cfi_restore 14
 743              		.cfi_restore 5
 744              		.cfi_restore 4
 745              		.cfi_def_cfa_offset 16
 746              	.LVL137:
 747 00fa 04B0     		add	sp, sp, #16
 748              	.LCFI13:
 749              		.cfi_restore 3
 750              		.cfi_restore 2
 751              		.cfi_restore 1
 752              		.cfi_restore 0
ARM GAS  /var/folders/0d/93p3r6493yg7p0rvl_4r983m0000gn/T//ccycveM3.s 			page 18


 753              		.cfi_def_cfa_offset 0
 754 00fc 7047     		bx	lr
 755              		.cfi_endproc
 756              	.LFE130:
 758              		.section	.text.put_dump,"ax",%progbits
 759              		.align	1
 760              		.global	put_dump
 761              		.syntax unified
 762              		.thumb
 763              		.thumb_func
 764              		.fpu fpv4-sp-d16
 766              	put_dump:
 767              	.LFB131:
 170:Src/communication/term_io.c **** 
 171:Src/communication/term_io.c **** 
 172:Src/communication/term_io.c **** 
 173:Src/communication/term_io.c **** 
 174:Src/communication/term_io.c **** void put_dump (const uint8_t *buff, uint32_t ofs, int cnt)
 175:Src/communication/term_io.c **** {
 768              		.loc 1 175 0
 769              		.cfi_startproc
 770              		@ args = 0, pretend = 0, frame = 0
 771              		@ frame_needed = 0, uses_anonymous_args = 0
 772              	.LVL138:
 773 0000 70B5     		push	{r4, r5, r6, lr}
 774              	.LCFI14:
 775              		.cfi_def_cfa_offset 16
 776              		.cfi_offset 4, -16
 777              		.cfi_offset 5, -12
 778              		.cfi_offset 6, -8
 779              		.cfi_offset 14, -4
 780 0002 0646     		mov	r6, r0
 781 0004 1546     		mov	r5, r2
 176:Src/communication/term_io.c **** 	uint8_t n;
 177:Src/communication/term_io.c **** 
 178:Src/communication/term_io.c **** 
 179:Src/communication/term_io.c **** 	xprintf("%08lX ", ofs);
 782              		.loc 1 179 0
 783 0006 1348     		ldr	r0, .L99
 784              	.LVL139:
 785 0008 FFF7FEFF 		bl	xprintf
 786              	.LVL140:
 180:Src/communication/term_io.c **** 	for(n = 0; n < cnt; n++)
 787              		.loc 1 180 0
 788 000c 0024     		movs	r4, #0
 789 000e 05E0     		b	.L91
 790              	.LVL141:
 791              	.L92:
 181:Src/communication/term_io.c **** 		xprintf(" %02X", buff[n]);
 792              		.loc 1 181 0 discriminator 3
 793 0010 315D     		ldrb	r1, [r6, r4]	@ zero_extendqisi2
 794 0012 1148     		ldr	r0, .L99+4
 795 0014 FFF7FEFF 		bl	xprintf
 796              	.LVL142:
 180:Src/communication/term_io.c **** 	for(n = 0; n < cnt; n++)
 797              		.loc 1 180 0 discriminator 3
 798 0018 0134     		adds	r4, r4, #1
ARM GAS  /var/folders/0d/93p3r6493yg7p0rvl_4r983m0000gn/T//ccycveM3.s 			page 19


 799              	.LVL143:
 800 001a E4B2     		uxtb	r4, r4
 801              	.LVL144:
 802              	.L91:
 180:Src/communication/term_io.c **** 	for(n = 0; n < cnt; n++)
 803              		.loc 1 180 0 is_stmt 0 discriminator 1
 804 001c AC42     		cmp	r4, r5
 805 001e F7DB     		blt	.L92
 182:Src/communication/term_io.c **** 	xputc(' ');
 806              		.loc 1 182 0 is_stmt 1
 807 0020 2020     		movs	r0, #32
 808 0022 FFF7FEFF 		bl	xputc
 809              	.LVL145:
 183:Src/communication/term_io.c **** 	for(n = 0; n < cnt; n++) {
 810              		.loc 1 183 0
 811 0026 0024     		movs	r4, #0
 812 0028 03E0     		b	.L93
 813              	.LVL146:
 814              	.L94:
 184:Src/communication/term_io.c **** 		if ((buff[n] < 0x20)||(buff[n] >= 0x7F))
 185:Src/communication/term_io.c **** 			xputc('.');
 186:Src/communication/term_io.c **** 		else
 187:Src/communication/term_io.c **** 			xputc(buff[n]);
 815              		.loc 1 187 0
 816 002a FFF7FEFF 		bl	xputc
 817              	.LVL147:
 818              	.L95:
 183:Src/communication/term_io.c **** 	for(n = 0; n < cnt; n++) {
 819              		.loc 1 183 0 discriminator 2
 820 002e 0134     		adds	r4, r4, #1
 821              	.LVL148:
 822 0030 E4B2     		uxtb	r4, r4
 823              	.LVL149:
 824              	.L93:
 183:Src/communication/term_io.c **** 	for(n = 0; n < cnt; n++) {
 825              		.loc 1 183 0 is_stmt 0 discriminator 1
 826 0032 AC42     		cmp	r4, r5
 827 0034 09DA     		bge	.L98
 184:Src/communication/term_io.c **** 		if ((buff[n] < 0x20)||(buff[n] >= 0x7F))
 828              		.loc 1 184 0 is_stmt 1
 829 0036 305D     		ldrb	r0, [r6, r4]	@ zero_extendqisi2
 830 0038 A0F12003 		sub	r3, r0, #32
 831 003c DBB2     		uxtb	r3, r3
 832 003e 5E2B     		cmp	r3, #94
 833 0040 F3D9     		bls	.L94
 185:Src/communication/term_io.c **** 		else
 834              		.loc 1 185 0
 835 0042 2E20     		movs	r0, #46
 836 0044 FFF7FEFF 		bl	xputc
 837              	.LVL150:
 838 0048 F1E7     		b	.L95
 839              	.L98:
 188:Src/communication/term_io.c **** 	}
 189:Src/communication/term_io.c **** 	xputc('\n');
 840              		.loc 1 189 0
 841 004a 0A20     		movs	r0, #10
 842 004c FFF7FEFF 		bl	xputc
ARM GAS  /var/folders/0d/93p3r6493yg7p0rvl_4r983m0000gn/T//ccycveM3.s 			page 20


 843              	.LVL151:
 190:Src/communication/term_io.c **** }
 844              		.loc 1 190 0
 845 0050 70BD     		pop	{r4, r5, r6, pc}
 846              	.LVL152:
 847              	.L100:
 848 0052 00BF     		.align	2
 849              	.L99:
 850 0054 00000000 		.word	.LC0
 851 0058 08000000 		.word	.LC1
 852              		.cfi_endproc
 853              	.LFE131:
 855              		.section	.text.get_line,"ax",%progbits
 856              		.align	1
 857              		.global	get_line
 858              		.syntax unified
 859              		.thumb
 860              		.thumb_func
 861              		.fpu fpv4-sp-d16
 863              	get_line:
 864              	.LFB132:
 191:Src/communication/term_io.c **** 
 192:Src/communication/term_io.c **** 
 193:Src/communication/term_io.c **** 
 194:Src/communication/term_io.c **** 
 195:Src/communication/term_io.c **** void get_line (char *buff, int len)
 196:Src/communication/term_io.c **** {
 865              		.loc 1 196 0
 866              		.cfi_startproc
 867              		@ args = 0, pretend = 0, frame = 0
 868              		@ frame_needed = 0, uses_anonymous_args = 0
 869              	.LVL153:
 870 0000 2DE9F041 		push	{r4, r5, r6, r7, r8, lr}
 871              	.LCFI15:
 872              		.cfi_def_cfa_offset 24
 873              		.cfi_offset 4, -24
 874              		.cfi_offset 5, -20
 875              		.cfi_offset 6, -16
 876              		.cfi_offset 7, -12
 877              		.cfi_offset 8, -8
 878              		.cfi_offset 14, -4
 879 0004 0746     		mov	r7, r0
 880 0006 0E46     		mov	r6, r1
 881              	.LVL154:
 197:Src/communication/term_io.c **** 	char c;
 198:Src/communication/term_io.c **** 	int idx = 0;
 882              		.loc 1 198 0
 883 0008 0025     		movs	r5, #0
 884              	.LVL155:
 885              	.L102:
 886              	.LBB2:
 199:Src/communication/term_io.c **** 
 200:Src/communication/term_io.c **** 	for (;;) {
 201:Src/communication/term_io.c **** 		osDelay(5);
 887              		.loc 1 201 0
 888 000a 0520     		movs	r0, #5
 889 000c FFF7FEFF 		bl	osDelay
ARM GAS  /var/folders/0d/93p3r6493yg7p0rvl_4r983m0000gn/T//ccycveM3.s 			page 21


 890              	.LVL156:
 202:Src/communication/term_io.c **** 		c = xgetc();
 891              		.loc 1 202 0
 892 0010 FFF7FEFF 		bl	debug_waitkey
 893              	.LVL157:
 894 0014 0446     		mov	r4, r0
 895              	.LVL158:
 203:Src/communication/term_io.c **** 		if (c == '\r') break;
 896              		.loc 1 203 0
 897 0016 0D28     		cmp	r0, #13
 898 0018 1AD0     		beq	.L103
 204:Src/communication/term_io.c **** 		if ((c == '\b') && idx) {
 899              		.loc 1 204 0
 900 001a 0828     		cmp	r0, #8
 901 001c 0CD0     		beq	.L107
 902              	.LVL159:
 903              	.L104:
 205:Src/communication/term_io.c **** 			idx--; xputc(c);
 206:Src/communication/term_io.c **** 			xputc(' '); xputc(c); // added by mthomas for Eclipse Terminal plug-in
 207:Src/communication/term_io.c **** 		}
 208:Src/communication/term_io.c **** 		if (((uint8_t)c >= ' ') && (idx < len - 1)) {
 904              		.loc 1 208 0
 905 001e 1F2C     		cmp	r4, #31
 906 0020 F3D9     		bls	.L102
 907              		.loc 1 208 0 is_stmt 0 discriminator 1
 908 0022 731E     		subs	r3, r6, #1
 909 0024 AB42     		cmp	r3, r5
 910 0026 F0DD     		ble	.L102
 209:Src/communication/term_io.c **** 				buff[idx++] = c; xputc(c);
 911              		.loc 1 209 0 is_stmt 1
 912 0028 05F10108 		add	r8, r5, #1
 913              	.LVL160:
 914 002c 7C55     		strb	r4, [r7, r5]
 915 002e 2046     		mov	r0, r4
 916 0030 FFF7FEFF 		bl	xputc
 917              	.LVL161:
 918 0034 4546     		mov	r5, r8
 919 0036 E8E7     		b	.L102
 920              	.LVL162:
 921              	.L107:
 204:Src/communication/term_io.c **** 		if ((c == '\b') && idx) {
 922              		.loc 1 204 0 discriminator 1
 923 0038 002D     		cmp	r5, #0
 924 003a F0D0     		beq	.L104
 205:Src/communication/term_io.c **** 			idx--; xputc(c);
 925              		.loc 1 205 0
 926 003c 013D     		subs	r5, r5, #1
 927              	.LVL163:
 928 003e FFF7FEFF 		bl	xputc
 929              	.LVL164:
 206:Src/communication/term_io.c **** 		}
 930              		.loc 1 206 0
 931 0042 2020     		movs	r0, #32
 932 0044 FFF7FEFF 		bl	xputc
 933              	.LVL165:
 934 0048 2046     		mov	r0, r4
 935 004a FFF7FEFF 		bl	xputc
ARM GAS  /var/folders/0d/93p3r6493yg7p0rvl_4r983m0000gn/T//ccycveM3.s 			page 22


 936              	.LVL166:
 937 004e E6E7     		b	.L104
 938              	.LVL167:
 939              	.L103:
 940              	.LBE2:
 210:Src/communication/term_io.c **** 		}
 211:Src/communication/term_io.c **** 	}
 212:Src/communication/term_io.c **** 	buff[idx] = 0;
 941              		.loc 1 212 0
 942 0050 0023     		movs	r3, #0
 943 0052 7B55     		strb	r3, [r7, r5]
 213:Src/communication/term_io.c **** 	xputc('\n');
 944              		.loc 1 213 0
 945 0054 0A20     		movs	r0, #10
 946              	.LVL168:
 947 0056 FFF7FEFF 		bl	xputc
 948              	.LVL169:
 214:Src/communication/term_io.c **** }
 949              		.loc 1 214 0
 950 005a BDE8F081 		pop	{r4, r5, r6, r7, r8, pc}
 951              		.cfi_endproc
 952              	.LFE132:
 954              		.section	.text.get_line_r,"ax",%progbits
 955              		.align	1
 956              		.global	get_line_r
 957              		.syntax unified
 958              		.thumb
 959              		.thumb_func
 960              		.fpu fpv4-sp-d16
 962              	get_line_r:
 963              	.LFB133:
 215:Src/communication/term_io.c **** 
 216:Src/communication/term_io.c **** 
 217:Src/communication/term_io.c **** // function added by mthomas:
 218:Src/communication/term_io.c **** int get_line_r (char *buff, int len, int* idx)
 219:Src/communication/term_io.c **** {
 964              		.loc 1 219 0
 965              		.cfi_startproc
 966              		@ args = 0, pretend = 0, frame = 0
 967              		@ frame_needed = 0, uses_anonymous_args = 0
 968              	.LVL170:
 969 0000 2DE9F041 		push	{r4, r5, r6, r7, r8, lr}
 970              	.LCFI16:
 971              		.cfi_def_cfa_offset 24
 972              		.cfi_offset 4, -24
 973              		.cfi_offset 5, -20
 974              		.cfi_offset 6, -16
 975              		.cfi_offset 7, -12
 976              		.cfi_offset 8, -8
 977              		.cfi_offset 14, -4
 978 0004 8046     		mov	r8, r0
 979 0006 0E46     		mov	r6, r1
 980 0008 1446     		mov	r4, r2
 981              	.LVL171:
 220:Src/communication/term_io.c **** 	char c;
 221:Src/communication/term_io.c **** 	int retval = 0;
 222:Src/communication/term_io.c **** 	int myidx;
ARM GAS  /var/folders/0d/93p3r6493yg7p0rvl_4r983m0000gn/T//ccycveM3.s 			page 23


 223:Src/communication/term_io.c **** 
 224:Src/communication/term_io.c **** 	if ( xavail() ) {
 982              		.loc 1 224 0
 983 000a FFF7FEFF 		bl	debug_test
 984              	.LVL172:
 985 000e 0346     		mov	r3, r0
 986 0010 10B9     		cbnz	r0, .L116
 987              	.LVL173:
 988              	.L108:
 225:Src/communication/term_io.c **** 		myidx = *idx;
 226:Src/communication/term_io.c **** 		c = xgetc();
 227:Src/communication/term_io.c **** 		if (c == '\r') {
 228:Src/communication/term_io.c **** 			buff[myidx] = 0;
 229:Src/communication/term_io.c **** 			xputc('\n');
 230:Src/communication/term_io.c **** 			retval = 1;
 231:Src/communication/term_io.c **** 		} else {
 232:Src/communication/term_io.c **** 			if ((c == '\b') && myidx) {
 233:Src/communication/term_io.c **** 				myidx--; xputc(c);
 234:Src/communication/term_io.c **** 				xputc(' '); xputc(c); // added by mthomas for Eclipse Terminal plug-in
 235:Src/communication/term_io.c **** 			}
 236:Src/communication/term_io.c **** 			if (((uint8_t)c >= ' ') && (myidx < len - 1)) {
 237:Src/communication/term_io.c **** 					buff[myidx++] = c; xputc(c);
 238:Src/communication/term_io.c **** 			}
 239:Src/communication/term_io.c **** 		}
 240:Src/communication/term_io.c **** 		*idx = myidx;
 241:Src/communication/term_io.c **** 	}
 242:Src/communication/term_io.c **** 
 243:Src/communication/term_io.c **** 	return retval;
 244:Src/communication/term_io.c **** }
 989              		.loc 1 244 0
 990 0012 1846     		mov	r0, r3
 991 0014 BDE8F081 		pop	{r4, r5, r6, r7, r8, pc}
 992              	.LVL174:
 993              	.L116:
 225:Src/communication/term_io.c **** 		myidx = *idx;
 994              		.loc 1 225 0
 995 0018 2768     		ldr	r7, [r4]
 996              	.LVL175:
 226:Src/communication/term_io.c **** 		if (c == '\r') {
 997              		.loc 1 226 0
 998 001a FFF7FEFF 		bl	debug_waitkey
 999              	.LVL176:
 1000 001e 0546     		mov	r5, r0
 1001              	.LVL177:
 227:Src/communication/term_io.c **** 			buff[myidx] = 0;
 1002              		.loc 1 227 0
 1003 0020 0D28     		cmp	r0, #13
 1004 0022 08D0     		beq	.L117
 232:Src/communication/term_io.c **** 				myidx--; xputc(c);
 1005              		.loc 1 232 0
 1006 0024 0828     		cmp	r0, #8
 1007 0026 0ED0     		beq	.L118
 1008              	.LVL178:
 1009              	.L112:
 236:Src/communication/term_io.c **** 					buff[myidx++] = c; xputc(c);
 1010              		.loc 1 236 0
 1011 0028 1F2D     		cmp	r5, #31
ARM GAS  /var/folders/0d/93p3r6493yg7p0rvl_4r983m0000gn/T//ccycveM3.s 			page 24


 1012 002a 21D9     		bls	.L113
 236:Src/communication/term_io.c **** 					buff[myidx++] = c; xputc(c);
 1013              		.loc 1 236 0 is_stmt 0 discriminator 1
 1014 002c 013E     		subs	r6, r6, #1
 1015              	.LVL179:
 1016 002e BE42     		cmp	r6, r7
 1017 0030 15DC     		bgt	.L119
 221:Src/communication/term_io.c **** 	int myidx;
 1018              		.loc 1 221 0 is_stmt 1
 1019 0032 0023     		movs	r3, #0
 1020 0034 1DE0     		b	.L111
 1021              	.LVL180:
 1022              	.L117:
 228:Src/communication/term_io.c **** 			xputc('\n');
 1023              		.loc 1 228 0
 1024 0036 0023     		movs	r3, #0
 1025 0038 08F80730 		strb	r3, [r8, r7]
 229:Src/communication/term_io.c **** 			retval = 1;
 1026              		.loc 1 229 0
 1027 003c 0A20     		movs	r0, #10
 1028              	.LVL181:
 1029 003e FFF7FEFF 		bl	xputc
 1030              	.LVL182:
 230:Src/communication/term_io.c **** 		} else {
 1031              		.loc 1 230 0
 1032 0042 0123     		movs	r3, #1
 1033 0044 15E0     		b	.L111
 1034              	.LVL183:
 1035              	.L118:
 232:Src/communication/term_io.c **** 				myidx--; xputc(c);
 1036              		.loc 1 232 0 discriminator 1
 1037 0046 002F     		cmp	r7, #0
 1038 0048 EED0     		beq	.L112
 233:Src/communication/term_io.c **** 				xputc(' '); xputc(c); // added by mthomas for Eclipse Terminal plug-in
 1039              		.loc 1 233 0
 1040 004a 013F     		subs	r7, r7, #1
 1041              	.LVL184:
 1042 004c FFF7FEFF 		bl	xputc
 1043              	.LVL185:
 234:Src/communication/term_io.c **** 			}
 1044              		.loc 1 234 0
 1045 0050 2020     		movs	r0, #32
 1046 0052 FFF7FEFF 		bl	xputc
 1047              	.LVL186:
 1048 0056 2846     		mov	r0, r5
 1049 0058 FFF7FEFF 		bl	xputc
 1050              	.LVL187:
 1051 005c E4E7     		b	.L112
 1052              	.LVL188:
 1053              	.L119:
 237:Src/communication/term_io.c **** 			}
 1054              		.loc 1 237 0
 1055 005e 7E1C     		adds	r6, r7, #1
 1056              	.LVL189:
 1057 0060 08F80750 		strb	r5, [r8, r7]
 1058 0064 2846     		mov	r0, r5
 1059 0066 FFF7FEFF 		bl	xputc
ARM GAS  /var/folders/0d/93p3r6493yg7p0rvl_4r983m0000gn/T//ccycveM3.s 			page 25


 1060              	.LVL190:
 1061 006a 3746     		mov	r7, r6
 221:Src/communication/term_io.c **** 	int myidx;
 1062              		.loc 1 221 0
 1063 006c 0023     		movs	r3, #0
 1064 006e 00E0     		b	.L111
 1065              	.LVL191:
 1066              	.L113:
 1067 0070 0023     		movs	r3, #0
 1068              	.LVL192:
 1069              	.L111:
 240:Src/communication/term_io.c **** 	}
 1070              		.loc 1 240 0
 1071 0072 2760     		str	r7, [r4]
 243:Src/communication/term_io.c **** }
 1072              		.loc 1 243 0
 1073 0074 CDE7     		b	.L108
 1074              		.cfi_endproc
 1075              	.LFE133:
 1077              		.section	.rodata.put_dump.str1.4,"aMS",%progbits,1
 1078              		.align	2
 1079              	.LC0:
 1080 0000 2530386C 		.ascii	"%08lX \000"
 1080      582000
 1081 0007 00       		.space	1
 1082              	.LC1:
 1083 0008 20253032 		.ascii	" %02X\000"
 1083      5800
 1084              		.text
 1085              	.Letext0:
 1086              		.file 2 "/usr/local/gcc_arm/gcc-arm-none-eabi-7-2017-q4-major/lib/gcc/arm-none-eabi/7.2.1/include/
 1087              		.file 3 "/usr/local/gcc_arm/gcc-arm-none-eabi-7-2017-q4-major/arm-none-eabi/include/machine/_defau
 1088              		.file 4 "/usr/local/gcc_arm/gcc-arm-none-eabi-7-2017-q4-major/arm-none-eabi/include/sys/_stdint.h"
 1089              		.file 5 "Drivers/CMSIS/Include/core_cm4.h"
 1090              		.file 6 "Drivers/CMSIS/Device/ST/STM32F4xx/Include/system_stm32f4xx.h"
 1091              		.file 7 "/usr/local/gcc_arm/gcc-arm-none-eabi-7-2017-q4-major/arm-none-eabi/include/sys/lock.h"
 1092              		.file 8 "/usr/local/gcc_arm/gcc-arm-none-eabi-7-2017-q4-major/arm-none-eabi/include/sys/_types.h"
 1093              		.file 9 "/usr/local/gcc_arm/gcc-arm-none-eabi-7-2017-q4-major/lib/gcc/arm-none-eabi/7.2.1/include/
 1094              		.file 10 "/usr/local/gcc_arm/gcc-arm-none-eabi-7-2017-q4-major/arm-none-eabi/include/sys/reent.h"
 1095              		.file 11 "<built-in>"
 1096              		.file 12 "Inc/communication/dbgu.h"
ARM GAS  /var/folders/0d/93p3r6493yg7p0rvl_4r983m0000gn/T//ccycveM3.s 			page 26


DEFINED SYMBOLS
                            *ABS*:0000000000000000 term_io.c
/var/folders/0d/93p3r6493yg7p0rvl_4r983m0000gn/T//ccycveM3.s:18     .text.xatoi:0000000000000000 $t
/var/folders/0d/93p3r6493yg7p0rvl_4r983m0000gn/T//ccycveM3.s:25     .text.xatoi:0000000000000000 xatoi
/var/folders/0d/93p3r6493yg7p0rvl_4r983m0000gn/T//ccycveM3.s:243    .text.xputc:0000000000000000 $t
/var/folders/0d/93p3r6493yg7p0rvl_4r983m0000gn/T//ccycveM3.s:250    .text.xputc:0000000000000000 xputc
/var/folders/0d/93p3r6493yg7p0rvl_4r983m0000gn/T//ccycveM3.s:271    .text.xputs:0000000000000000 $t
/var/folders/0d/93p3r6493yg7p0rvl_4r983m0000gn/T//ccycveM3.s:278    .text.xputs:0000000000000000 xputs
/var/folders/0d/93p3r6493yg7p0rvl_4r983m0000gn/T//ccycveM3.s:311    .text.xitoa:0000000000000000 $t
/var/folders/0d/93p3r6493yg7p0rvl_4r983m0000gn/T//ccycveM3.s:318    .text.xitoa:0000000000000000 xitoa
/var/folders/0d/93p3r6493yg7p0rvl_4r983m0000gn/T//ccycveM3.s:476    .text.xprintf:0000000000000000 $t
/var/folders/0d/93p3r6493yg7p0rvl_4r983m0000gn/T//ccycveM3.s:483    .text.xprintf:0000000000000000 xprintf
/var/folders/0d/93p3r6493yg7p0rvl_4r983m0000gn/T//ccycveM3.s:759    .text.put_dump:0000000000000000 $t
/var/folders/0d/93p3r6493yg7p0rvl_4r983m0000gn/T//ccycveM3.s:766    .text.put_dump:0000000000000000 put_dump
/var/folders/0d/93p3r6493yg7p0rvl_4r983m0000gn/T//ccycveM3.s:850    .text.put_dump:0000000000000054 $d
/var/folders/0d/93p3r6493yg7p0rvl_4r983m0000gn/T//ccycveM3.s:856    .text.get_line:0000000000000000 $t
/var/folders/0d/93p3r6493yg7p0rvl_4r983m0000gn/T//ccycveM3.s:863    .text.get_line:0000000000000000 get_line
/var/folders/0d/93p3r6493yg7p0rvl_4r983m0000gn/T//ccycveM3.s:955    .text.get_line_r:0000000000000000 $t
/var/folders/0d/93p3r6493yg7p0rvl_4r983m0000gn/T//ccycveM3.s:962    .text.get_line_r:0000000000000000 get_line_r
/var/folders/0d/93p3r6493yg7p0rvl_4r983m0000gn/T//ccycveM3.s:1078   .rodata.put_dump.str1.4:0000000000000000 $d

UNDEFINED SYMBOLS
debug_chr
osDelay
debug_waitkey
debug_test
