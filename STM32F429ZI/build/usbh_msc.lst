ARM GAS  /var/folders/0d/93p3r6493yg7p0rvl_4r983m0000gn/T//cc7OQubD.s 			page 1


   1              		.cpu cortex-m4
   2              		.eabi_attribute 27, 1
   3              		.eabi_attribute 28, 1
   4              		.eabi_attribute 20, 1
   5              		.eabi_attribute 21, 1
   6              		.eabi_attribute 23, 3
   7              		.eabi_attribute 24, 1
   8              		.eabi_attribute 25, 1
   9              		.eabi_attribute 26, 1
  10              		.eabi_attribute 30, 1
  11              		.eabi_attribute 34, 1
  12              		.eabi_attribute 18, 4
  13              		.file	"usbh_msc.c"
  14              		.text
  15              	.Ltext0:
  16              		.cfi_sections	.debug_frame
  17              		.section	.text.USBH_MSC_SOFProcess,"ax",%progbits
  18              		.align	1
  19              		.syntax unified
  20              		.thumb
  21              		.thumb_func
  22              		.fpu fpv4-sp-d16
  24              	USBH_MSC_SOFProcess:
  25              	.LFB135:
  26              		.file 1 "Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c"
   1:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** /**
   2:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   ******************************************************************************
   3:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   * @file    usbh_msc.c
   4:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   * @author  MCD Application Team
   5:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   * @version V3.2.2
   6:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   * @date    07-July-2015
   7:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   * @brief   This file implements the MSC class driver functions
   8:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   *          ===================================================================      
   9:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   *                                MSC Class  Description
  10:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   *          =================================================================== 
  11:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   *           This module manages the MSC class V1.0 following the "Universal 
  12:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   *           Serial Bus Mass Storage Class (MSC) Bulk-Only Transport (BOT) Version 1.0
  13:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   *           Sep. 31, 1999".
  14:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   *           This driver implements the following aspects of the specification:
  15:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   *             - Bulk-Only Transport protocol
  16:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   *             - Subclass : SCSI transparent command set (ref. SCSI Primary Commands - 3 (SPC-3))
  17:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   *      
  18:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   *  @endverbatim
  19:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   *
  20:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   ******************************************************************************
  21:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   * @attention
  22:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   *
  23:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   * <h2><center>&copy; COPYRIGHT 2015 STMicroelectronics</center></h2>
  24:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   *
  25:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   * Licensed under MCD-ST Liberty SW License Agreement V2, (the "License");
  26:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   * You may not use this file except in compliance with the License.
  27:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   * You may obtain a copy of the License at:
  28:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   *
  29:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   *        http://www.st.com/software_license_agreement_liberty_v2
  30:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   *
  31:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   * Unless required by applicable law or agreed to in writing, software 
  32:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   * distributed under the License is distributed on an "AS IS" BASIS, 
ARM GAS  /var/folders/0d/93p3r6493yg7p0rvl_4r983m0000gn/T//cc7OQubD.s 			page 2


  33:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  34:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   * See the License for the specific language governing permissions and
  35:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   * limitations under the License.
  36:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   *
  37:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   ******************************************************************************
  38:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   */
  39:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** 
  40:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** /* Includes ------------------------------------------------------------------*/
  41:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** 
  42:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** #include "usbh_msc.h"
  43:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** #include "usbh_msc_bot.h"    
  44:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** #include "usbh_msc_scsi.h"
  45:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** 
  46:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** 
  47:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** /** @addtogroup USBH_LIB
  48:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   * @{
  49:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   */
  50:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** 
  51:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** /** @addtogroup USBH_CLASS
  52:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   * @{
  53:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   */
  54:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** 
  55:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** /** @addtogroup USBH_MSC_CLASS
  56:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   * @{
  57:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   */
  58:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   
  59:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** /** @defgroup USBH_MSC_CORE 
  60:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   * @brief    This file includes the mass storage related functions
  61:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   * @{
  62:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   */ 
  63:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** 
  64:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** 
  65:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** /** @defgroup USBH_MSC_CORE_Private_TypesDefinitions
  66:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   * @{
  67:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   */ 
  68:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** /**
  69:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   * @}
  70:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   */ 
  71:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** 
  72:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** /** @defgroup USBH_MSC_CORE_Private_Defines
  73:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   * @{
  74:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   */ 
  75:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** /**
  76:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   * @}
  77:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   */ 
  78:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** 
  79:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** /** @defgroup USBH_MSC_CORE_Private_Macros
  80:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   * @{
  81:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   */ 
  82:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** /**
  83:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   * @}
  84:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   */ 
  85:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** 
  86:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** 
  87:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** /** @defgroup USBH_MSC_CORE_Private_Variables
  88:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   * @{
  89:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   */ 
ARM GAS  /var/folders/0d/93p3r6493yg7p0rvl_4r983m0000gn/T//cc7OQubD.s 			page 3


  90:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** /**
  91:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   * @}
  92:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   */ 
  93:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** 
  94:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** 
  95:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** /** @defgroup USBH_MSC_CORE_Private_FunctionPrototypes
  96:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   * @{
  97:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   */ 
  98:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** 
  99:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** static USBH_StatusTypeDef USBH_MSC_InterfaceInit  (USBH_HandleTypeDef *phost);
 100:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** 
 101:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** static USBH_StatusTypeDef USBH_MSC_InterfaceDeInit  (USBH_HandleTypeDef *phost);
 102:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** 
 103:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** static USBH_StatusTypeDef USBH_MSC_Process(USBH_HandleTypeDef *phost);
 104:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** 
 105:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** static USBH_StatusTypeDef USBH_MSC_ClassRequest(USBH_HandleTypeDef *phost);
 106:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** 
 107:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** static USBH_StatusTypeDef USBH_MSC_SOFProcess(USBH_HandleTypeDef *phost);
 108:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** 
 109:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** static USBH_StatusTypeDef USBH_MSC_RdWrProcess(USBH_HandleTypeDef *phost, uint8_t lun);
 110:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** 
 111:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** USBH_ClassTypeDef  USBH_msc = 
 112:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** {
 113:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   "MSC",
 114:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   USB_MSC_CLASS,
 115:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   USBH_MSC_InterfaceInit,
 116:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   USBH_MSC_InterfaceDeInit,
 117:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   USBH_MSC_ClassRequest,
 118:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   USBH_MSC_Process,
 119:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   USBH_MSC_SOFProcess,
 120:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   NULL,
 121:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** };
 122:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** 
 123:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** 
 124:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** /**
 125:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   * @}
 126:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   */ 
 127:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** 
 128:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** 
 129:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** /** @defgroup USBH_MSC_CORE_Exported_Variables
 130:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   * @{
 131:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   */ 
 132:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** 
 133:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** /**
 134:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   * @}
 135:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   */ 
 136:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** 
 137:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** 
 138:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** /** @defgroup USBH_MSC_CORE_Private_Functions
 139:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   * @{
 140:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   */ 
 141:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** 
 142:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** 
 143:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** /**
 144:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   * @brief  USBH_MSC_InterfaceInit 
 145:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   *         The function init the MSC class.
 146:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   * @param  phost: Host handle
ARM GAS  /var/folders/0d/93p3r6493yg7p0rvl_4r983m0000gn/T//cc7OQubD.s 			page 4


 147:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   * @retval USBH Status
 148:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   */
 149:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** static USBH_StatusTypeDef USBH_MSC_InterfaceInit (USBH_HandleTypeDef *phost)
 150:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** {	 
 151:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   uint8_t interface = 0; 
 152:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   USBH_StatusTypeDef status = USBH_FAIL ;
 153:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   MSC_HandleTypeDef *MSC_Handle;
 154:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   
 155:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   interface = USBH_FindInterface(phost, phost->pActiveClass->ClassCode, MSC_TRANSPARENT, MSC_BOT);
 156:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   
 157:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   if(interface == 0xFF) /* Not Valid Interface */
 158:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   {
 159:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     USBH_DbgLog ("Cannot Find the interface for %s class.", phost->pActiveClass->Name);
 160:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     status = USBH_FAIL;      
 161:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   }
 162:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   else
 163:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   {
 164:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     USBH_SelectInterface (phost, interface);
 165:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     
 166:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     phost->pActiveClass->pData = (MSC_HandleTypeDef *)USBH_malloc (sizeof(MSC_HandleTypeDef));
 167:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     MSC_Handle =  (MSC_HandleTypeDef *) phost->pActiveClass->pData;
 168:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     
 169:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     if(phost->device.CfgDesc.Itf_Desc[phost->device.current_interface].Ep_Desc[0].bEndpointAddress 
 170:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     {
 171:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****       MSC_Handle->InEp = (phost->device.CfgDesc.Itf_Desc[phost->device.current_interface].Ep_Desc[0
 172:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****       MSC_Handle->InEpSize  = phost->device.CfgDesc.Itf_Desc[phost->device.current_interface].Ep_De
 173:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     }
 174:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     else
 175:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     {
 176:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****       MSC_Handle->OutEp = (phost->device.CfgDesc.Itf_Desc[phost->device.current_interface].Ep_Desc[
 177:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****       MSC_Handle->OutEpSize  = phost->device.CfgDesc.Itf_Desc[phost->device.current_interface].Ep_D
 178:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     }
 179:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     
 180:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     if(phost->device.CfgDesc.Itf_Desc[phost->device.current_interface].Ep_Desc[1].bEndpointAddress 
 181:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     {
 182:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****       MSC_Handle->InEp = (phost->device.CfgDesc.Itf_Desc[phost->device.current_interface].Ep_Desc[1
 183:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****       MSC_Handle->InEpSize  = phost->device.CfgDesc.Itf_Desc[phost->device.current_interface].Ep_De
 184:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     }
 185:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     else
 186:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     {
 187:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****       MSC_Handle->OutEp = (phost->device.CfgDesc.Itf_Desc[phost->device.current_interface].Ep_Desc[
 188:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****       MSC_Handle->OutEpSize  = phost->device.CfgDesc.Itf_Desc[phost->device.current_interface].Ep_D
 189:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     }
 190:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     
 191:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     MSC_Handle->current_lun = 0;
 192:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     MSC_Handle->rw_lun = 0;
 193:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     MSC_Handle->state = MSC_INIT;
 194:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     MSC_Handle->error = MSC_OK;
 195:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     MSC_Handle->req_state = MSC_REQ_IDLE;
 196:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     MSC_Handle->OutPipe = USBH_AllocPipe(phost, MSC_Handle->OutEp);
 197:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     MSC_Handle->InPipe = USBH_AllocPipe(phost, MSC_Handle->InEp);
 198:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** 
 199:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     USBH_MSC_BOT_Init(phost);
 200:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     
 201:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     /* De-Initialize LUNs information */
 202:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     USBH_memset(MSC_Handle->unit, 0, sizeof(MSC_Handle->unit));
 203:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     
ARM GAS  /var/folders/0d/93p3r6493yg7p0rvl_4r983m0000gn/T//cc7OQubD.s 			page 5


 204:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     /* Open the new channels */
 205:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     USBH_OpenPipe  (phost,
 206:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****                     MSC_Handle->OutPipe,
 207:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****                     MSC_Handle->OutEp,
 208:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****                     phost->device.address,
 209:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****                     phost->device.speed,
 210:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****                     USB_EP_TYPE_BULK,
 211:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****                     MSC_Handle->OutEpSize);  
 212:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     
 213:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     USBH_OpenPipe  (phost,
 214:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****                     MSC_Handle->InPipe,
 215:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****                     MSC_Handle->InEp,
 216:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****                     phost->device.address,
 217:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****                     phost->device.speed,
 218:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****                     USB_EP_TYPE_BULK,
 219:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****                     MSC_Handle->InEpSize);     
 220:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     
 221:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     
 222:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     USBH_LL_SetToggle  (phost, MSC_Handle->InPipe,0);
 223:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     USBH_LL_SetToggle  (phost, MSC_Handle->OutPipe,0);
 224:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     status = USBH_OK; 
 225:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   }
 226:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   return status;
 227:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** }
 228:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** 
 229:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** /**
 230:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   * @brief  USBH_MSC_InterfaceDeInit 
 231:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   *         The function DeInit the Pipes used for the MSC class.
 232:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   * @param  phost: Host handle
 233:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   * @retval USBH Status
 234:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   */
 235:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** USBH_StatusTypeDef USBH_MSC_InterfaceDeInit (USBH_HandleTypeDef *phost)
 236:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** {
 237:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   MSC_HandleTypeDef *MSC_Handle =  (MSC_HandleTypeDef *) phost->pActiveClass->pData;
 238:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** 
 239:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   if ( MSC_Handle->OutPipe)
 240:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   {
 241:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     USBH_ClosePipe(phost, MSC_Handle->OutPipe);
 242:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     USBH_FreePipe  (phost, MSC_Handle->OutPipe);
 243:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     MSC_Handle->OutPipe = 0;     /* Reset the Channel as Free */
 244:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   }
 245:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   
 246:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   if ( MSC_Handle->InPipe)
 247:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   {
 248:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     USBH_ClosePipe(phost, MSC_Handle->InPipe);
 249:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     USBH_FreePipe  (phost, MSC_Handle->InPipe);
 250:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     MSC_Handle->InPipe = 0;     /* Reset the Channel as Free */
 251:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   } 
 252:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** 
 253:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   if(phost->pActiveClass->pData)
 254:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   {
 255:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     USBH_free (phost->pActiveClass->pData);
 256:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     phost->pActiveClass->pData = 0;
 257:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   }
 258:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   
 259:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   return USBH_OK;
 260:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** }
ARM GAS  /var/folders/0d/93p3r6493yg7p0rvl_4r983m0000gn/T//cc7OQubD.s 			page 6


 261:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** 
 262:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** /**
 263:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   * @brief  USBH_MSC_ClassRequest 
 264:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   *         The function is responsible for handling Standard requests
 265:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   *         for MSC class.
 266:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   * @param  phost: Host handle
 267:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   * @retval USBH Status
 268:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   */
 269:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** static USBH_StatusTypeDef USBH_MSC_ClassRequest(USBH_HandleTypeDef *phost)
 270:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** {   
 271:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   MSC_HandleTypeDef *MSC_Handle =  (MSC_HandleTypeDef *) phost->pActiveClass->pData;  
 272:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   USBH_StatusTypeDef status = USBH_BUSY;
 273:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   uint8_t i;
 274:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   
 275:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   /* Switch MSC REQ state machine */
 276:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   switch (MSC_Handle->req_state)
 277:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   {
 278:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   case MSC_REQ_IDLE:
 279:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   case MSC_REQ_GET_MAX_LUN:   
 280:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     /* Issue GetMaxLUN request */
 281:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     status = USBH_MSC_BOT_REQ_GetMaxLUN(phost, (uint8_t *)&MSC_Handle->max_lun);
 282:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     
 283:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     /* When devices do not support the GetMaxLun request, this should
 284:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****        be considred as only one logical unit is supported */
 285:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     if(status == USBH_NOT_SUPPORTED)
 286:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     {
 287:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****       MSC_Handle->max_lun = 0;
 288:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****       status = USBH_OK;
 289:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     }
 290:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     
 291:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     if(status == USBH_OK)
 292:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     {
 293:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****       MSC_Handle->max_lun = (uint8_t )(MSC_Handle->max_lun) + 1;
 294:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****       USBH_UsrLog ("Number of supported LUN: %lu", (int32_t)(MSC_Handle->max_lun));
 295:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****       
 296:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****       for(i = 0; i < MSC_Handle->max_lun; i++)
 297:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****       {
 298:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****         MSC_Handle->unit[i].prev_ready_state = USBH_FAIL;
 299:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****         MSC_Handle->unit[i].state_changed = 0;
 300:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****       }
 301:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     }
 302:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     break;
 303:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     
 304:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   case MSC_REQ_ERROR :
 305:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     /* a Clear Feature should be issued here */
 306:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     if(USBH_ClrFeature(phost, 0x00) == USBH_OK)
 307:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     {
 308:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****       MSC_Handle->req_state = MSC_Handle->prev_req_state; 
 309:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     }    
 310:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     break;
 311:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     
 312:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   default:
 313:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     break;
 314:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   }
 315:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   
 316:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   return status; 
 317:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** }
ARM GAS  /var/folders/0d/93p3r6493yg7p0rvl_4r983m0000gn/T//cc7OQubD.s 			page 7


 318:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** 
 319:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** /**
 320:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   * @brief  USBH_MSC_Process 
 321:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   *         The function is for managing state machine for MSC data transfers 
 322:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   * @param  phost: Host handle
 323:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   * @retval USBH Status
 324:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   */
 325:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** static USBH_StatusTypeDef USBH_MSC_Process(USBH_HandleTypeDef *phost)
 326:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** {
 327:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   MSC_HandleTypeDef *MSC_Handle =  (MSC_HandleTypeDef *) phost->pActiveClass->pData;
 328:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   USBH_StatusTypeDef error = USBH_BUSY ;
 329:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   USBH_StatusTypeDef scsi_status = USBH_BUSY ;  
 330:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   USBH_StatusTypeDef ready_status = USBH_BUSY ;
 331:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   
 332:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   switch (MSC_Handle->state)
 333:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   {
 334:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   case MSC_INIT:
 335:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     
 336:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     if(MSC_Handle->current_lun < MSC_Handle->max_lun)
 337:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     {
 338:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** 
 339:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****       MSC_Handle->unit[MSC_Handle->current_lun].error = MSC_NOT_READY;
 340:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****       /* Switch MSC REQ state machine */
 341:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****       switch (MSC_Handle->unit[MSC_Handle->current_lun].state)
 342:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****       {
 343:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****       case MSC_INIT:
 344:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****         USBH_UsrLog ("LUN #%d: ", MSC_Handle->current_lun);
 345:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****         MSC_Handle->unit[MSC_Handle->current_lun].state = MSC_READ_INQUIRY;
 346:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****         MSC_Handle->timer = phost->Timer;
 347:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****         
 348:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****       case MSC_READ_INQUIRY:
 349:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****         scsi_status = USBH_MSC_SCSI_Inquiry(phost, MSC_Handle->current_lun, &MSC_Handle->unit[MSC_H
 350:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****         
 351:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****         if( scsi_status == USBH_OK)
 352:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****         {
 353:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****           USBH_UsrLog ("Inquiry Vendor  : %s", MSC_Handle->unit[MSC_Handle->current_lun].inquiry.ve
 354:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****           USBH_UsrLog ("Inquiry Product : %s", MSC_Handle->unit[MSC_Handle->current_lun].inquiry.pr
 355:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****           USBH_UsrLog ("Inquiry Version : %s", MSC_Handle->unit[MSC_Handle->current_lun].inquiry.re
 356:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****           MSC_Handle->unit[MSC_Handle->current_lun].state = MSC_TEST_UNIT_READY;        
 357:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****         }
 358:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****         if( scsi_status == USBH_FAIL)
 359:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****         {
 360:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****           MSC_Handle->unit[MSC_Handle->current_lun].state = MSC_REQUEST_SENSE;         
 361:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****         }
 362:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****         else if(scsi_status == USBH_UNRECOVERED_ERROR)
 363:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****         {
 364:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****           MSC_Handle->unit[MSC_Handle->current_lun].state = MSC_IDLE;
 365:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****           MSC_Handle->unit[MSC_Handle->current_lun].error = MSC_ERROR;
 366:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****         }
 367:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****         break;    
 368:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****         
 369:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****       case MSC_TEST_UNIT_READY:
 370:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****         ready_status = USBH_MSC_SCSI_TestUnitReady(phost, MSC_Handle->current_lun);
 371:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****         
 372:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****         if( ready_status == USBH_OK)
 373:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****         {
 374:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****           if( MSC_Handle->unit[MSC_Handle->current_lun].prev_ready_state != USBH_OK)
ARM GAS  /var/folders/0d/93p3r6493yg7p0rvl_4r983m0000gn/T//cc7OQubD.s 			page 8


 375:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****           {
 376:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****             MSC_Handle->unit[MSC_Handle->current_lun].state_changed = 1;
 377:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****             USBH_UsrLog ("MSC Device ready");
 378:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****           }
 379:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****           else
 380:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****           {
 381:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****             MSC_Handle->unit[MSC_Handle->current_lun].state_changed = 0;
 382:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****           }
 383:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****           MSC_Handle->unit[MSC_Handle->current_lun].state = MSC_READ_CAPACITY10;
 384:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****           MSC_Handle->unit[MSC_Handle->current_lun].error = MSC_OK;
 385:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****           MSC_Handle->unit[MSC_Handle->current_lun].prev_ready_state = USBH_OK;
 386:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****         }
 387:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****         if( ready_status == USBH_FAIL)
 388:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****         {
 389:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****           /* Media not ready, so try to check again during 10s */
 390:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****           if( MSC_Handle->unit[MSC_Handle->current_lun].prev_ready_state != USBH_FAIL)
 391:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****           {
 392:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****             MSC_Handle->unit[MSC_Handle->current_lun].state_changed = 1;
 393:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****             USBH_UsrLog ("MSC Device NOT ready");
 394:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****           }
 395:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****           else
 396:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****           {
 397:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****             MSC_Handle->unit[MSC_Handle->current_lun].state_changed = 0;
 398:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****           }         
 399:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****             MSC_Handle->unit[MSC_Handle->current_lun].state = MSC_REQUEST_SENSE; 
 400:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****             MSC_Handle->unit[MSC_Handle->current_lun].error = MSC_NOT_READY;
 401:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****             MSC_Handle->unit[MSC_Handle->current_lun].prev_ready_state = USBH_FAIL;
 402:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****         }
 403:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****         else if(ready_status == USBH_UNRECOVERED_ERROR)
 404:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****         {
 405:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****           MSC_Handle->unit[MSC_Handle->current_lun].state = MSC_IDLE;
 406:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****           MSC_Handle->unit[MSC_Handle->current_lun].error = MSC_ERROR;
 407:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****         }
 408:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****         break;
 409:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****         
 410:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****       case MSC_READ_CAPACITY10:   
 411:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****         scsi_status = USBH_MSC_SCSI_ReadCapacity(phost,MSC_Handle->current_lun, &MSC_Handle->unit[M
 412:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****         
 413:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****         if(scsi_status == USBH_OK)
 414:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****         {
 415:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****           if(MSC_Handle->unit[MSC_Handle->current_lun].state_changed == 1)
 416:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****           {
 417:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****             USBH_UsrLog ("MSC Device capacity : %lu Bytes", \
 418:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****               (int32_t)(MSC_Handle->unit[MSC_Handle->current_lun].capacity.block_nbr * MSC_Handle->
 419:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****             USBH_UsrLog ("Block number : %lu", (int32_t)(MSC_Handle->unit[MSC_Handle->current_lun].
 420:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****             USBH_UsrLog ("Block Size   : %lu", (int32_t)(MSC_Handle->unit[MSC_Handle->current_lun].
 421:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****           }
 422:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****           MSC_Handle->unit[MSC_Handle->current_lun].state = MSC_IDLE;
 423:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****           MSC_Handle->unit[MSC_Handle->current_lun].error = MSC_OK;
 424:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****           MSC_Handle->current_lun++;
 425:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****         }
 426:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****         else if( scsi_status == USBH_FAIL)
 427:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****         {
 428:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****           MSC_Handle->unit[MSC_Handle->current_lun].state = MSC_REQUEST_SENSE;
 429:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****         }
 430:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****         else if(scsi_status == USBH_UNRECOVERED_ERROR)
 431:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****         {
ARM GAS  /var/folders/0d/93p3r6493yg7p0rvl_4r983m0000gn/T//cc7OQubD.s 			page 9


 432:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****           MSC_Handle->unit[MSC_Handle->current_lun].state = MSC_IDLE;
 433:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****           MSC_Handle->unit[MSC_Handle->current_lun].error = MSC_ERROR;
 434:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****         }
 435:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****         break;
 436:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****         
 437:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****       case MSC_REQUEST_SENSE:
 438:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****         scsi_status = USBH_MSC_SCSI_RequestSense(phost,  MSC_Handle->current_lun, &MSC_Handle->unit
 439:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****         
 440:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****         if( scsi_status == USBH_OK)
 441:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****         {
 442:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****           if((MSC_Handle->unit[MSC_Handle->current_lun].sense.key == SCSI_SENSE_KEY_UNIT_ATTENTION)
 443:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****              (MSC_Handle->unit[MSC_Handle->current_lun].sense.key == SCSI_SENSE_KEY_NOT_READY) )   
 444:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****           {
 445:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****             
 446:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****             if((phost->Timer - MSC_Handle->timer) < 10000)
 447:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****             {
 448:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****               MSC_Handle->unit[MSC_Handle->current_lun].state = MSC_TEST_UNIT_READY;
 449:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****               break;
 450:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****             }        
 451:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****           }
 452:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****           
 453:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****           USBH_UsrLog ("Sense Key  : %x", MSC_Handle->unit[MSC_Handle->current_lun].sense.key);
 454:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****           USBH_UsrLog ("Additional Sense Code : %x", MSC_Handle->unit[MSC_Handle->current_lun].sens
 455:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****           USBH_UsrLog ("Additional Sense Code Qualifier: %x", MSC_Handle->unit[MSC_Handle->current_
 456:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****           MSC_Handle->unit[MSC_Handle->current_lun].state = MSC_IDLE;
 457:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****           MSC_Handle->current_lun++;
 458:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****         }
 459:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****         if( scsi_status == USBH_FAIL)
 460:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****         {
 461:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****           USBH_UsrLog ("MSC Device NOT ready");
 462:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****           MSC_Handle->unit[MSC_Handle->current_lun].state = MSC_UNRECOVERED_ERROR; 
 463:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****         }
 464:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****         else if(scsi_status == USBH_UNRECOVERED_ERROR)
 465:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****         {
 466:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****           MSC_Handle->unit[MSC_Handle->current_lun].state = MSC_IDLE;
 467:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****           MSC_Handle->unit[MSC_Handle->current_lun].error = MSC_ERROR;   
 468:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****         }
 469:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****         break;  
 470:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     
 471:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****       case MSC_UNRECOVERED_ERROR: 
 472:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****         MSC_Handle->current_lun++;
 473:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****         break;  
 474:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****         
 475:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****       default:
 476:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****         break;
 477:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****       }
 478:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****       
 479:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** #if (USBH_USE_OS == 1)
 480:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     osMessagePut ( phost->os_event, USBH_CLASS_EVENT, 0);
 481:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** #endif       
 482:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     }
 483:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     else
 484:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     {
 485:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****       MSC_Handle->current_lun = 0;
 486:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     MSC_Handle->state = MSC_IDLE;
 487:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** #if (USBH_USE_OS == 1)
 488:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     osMessagePut ( phost->os_event, USBH_CLASS_EVENT, 0);
ARM GAS  /var/folders/0d/93p3r6493yg7p0rvl_4r983m0000gn/T//cc7OQubD.s 			page 10


 489:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** #endif 
 490:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     phost->pUser(phost, HOST_USER_CLASS_ACTIVE);     
 491:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     }
 492:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     break;
 493:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** 
 494:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   case MSC_IDLE:
 495:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     error = USBH_OK;  
 496:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     break;
 497:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     
 498:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   default:
 499:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     break; 
 500:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   }
 501:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   return error;
 502:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** }
 503:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** 
 504:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** 
 505:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** /**
 506:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   * @brief  USBH_MSC_SOFProcess 
 507:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   *         The function is for SOF state
 508:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   * @param  phost: Host handle
 509:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   * @retval USBH Status
 510:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   */
 511:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** static USBH_StatusTypeDef USBH_MSC_SOFProcess(USBH_HandleTypeDef *phost)
 512:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** {
  27              		.loc 1 512 0
  28              		.cfi_startproc
  29              		@ args = 0, pretend = 0, frame = 0
  30              		@ frame_needed = 0, uses_anonymous_args = 0
  31              		@ link register save eliminated.
  32              	.LVL0:
 513:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** 
 514:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   return USBH_OK;
 515:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** }
  33              		.loc 1 515 0
  34 0000 0020     		movs	r0, #0
  35              	.LVL1:
  36 0002 7047     		bx	lr
  37              		.cfi_endproc
  38              	.LFE135:
  40              		.section	.text.USBH_MSC_Process,"ax",%progbits
  41              		.align	1
  42              		.syntax unified
  43              		.thumb
  44              		.thumb_func
  45              		.fpu fpv4-sp-d16
  47              	USBH_MSC_Process:
  48              	.LFB134:
 326:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   MSC_HandleTypeDef *MSC_Handle =  (MSC_HandleTypeDef *) phost->pActiveClass->pData;
  49              		.loc 1 326 0
  50              		.cfi_startproc
  51              		@ args = 0, pretend = 0, frame = 0
  52              		@ frame_needed = 0, uses_anonymous_args = 0
  53              	.LVL2:
  54 0000 F8B5     		push	{r3, r4, r5, r6, r7, lr}
  55              	.LCFI0:
  56              		.cfi_def_cfa_offset 24
  57              		.cfi_offset 3, -24
ARM GAS  /var/folders/0d/93p3r6493yg7p0rvl_4r983m0000gn/T//cc7OQubD.s 			page 11


  58              		.cfi_offset 4, -20
  59              		.cfi_offset 5, -16
  60              		.cfi_offset 6, -12
  61              		.cfi_offset 7, -8
  62              		.cfi_offset 14, -4
 327:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   USBH_StatusTypeDef error = USBH_BUSY ;
  63              		.loc 1 327 0
  64 0002 D0F87433 		ldr	r3, [r0, #884]
  65 0006 DC69     		ldr	r4, [r3, #28]
  66              	.LVL3:
 332:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   {
  67              		.loc 1 332 0
  68 0008 237B     		ldrb	r3, [r4, #12]	@ zero_extendqisi2
  69 000a 23B1     		cbz	r3, .L4
  70 000c 012B     		cmp	r3, #1
  71 000e 00F0F981 		beq	.L30
 328:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   USBH_StatusTypeDef scsi_status = USBH_BUSY ;  
  72              		.loc 1 328 0
  73 0012 0120     		movs	r0, #1
  74              	.LVL4:
  75              	.L5:
 502:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** 
  76              		.loc 1 502 0
  77 0014 F8BD     		pop	{r3, r4, r5, r6, r7, pc}
  78              	.LVL5:
  79              	.L4:
  80 0016 0546     		mov	r5, r0
 336:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     {
  81              		.loc 1 336 0
  82 0018 B4F8F810 		ldrh	r1, [r4, #248]
  83 001c 2368     		ldr	r3, [r4]
  84 001e 9942     		cmp	r1, r3
  85 0020 80F0C781 		bcs	.L6
 339:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****       /* Switch MSC REQ state machine */
  86              		.loc 1 339 0
  87 0024 3423     		movs	r3, #52
  88 0026 03FB0143 		mla	r3, r3, r1, r4
  89 002a 0122     		movs	r2, #1
  90 002c 83F89120 		strb	r2, [r3, #145]
 341:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****       {
  91              		.loc 1 341 0
  92 0030 93F89030 		ldrb	r3, [r3, #144]	@ zero_extendqisi2
  93 0034 082B     		cmp	r3, #8
  94 0036 00F2B481 		bhi	.L7
  95 003a DFE813F0 		tbh	[pc, r3, lsl #1]
  96              	.L9:
  97 003e 0900     		.2byte	(.L8-.L9)/2
  98 0040 B201     		.2byte	(.L7-.L9)/2
  99 0042 7300     		.2byte	(.L10-.L9)/2
 100 0044 DC00     		.2byte	(.L11-.L9)/2
 101 0046 1B00     		.2byte	(.L12-.L9)/2
 102 0048 4101     		.2byte	(.L13-.L9)/2
 103 004a B201     		.2byte	(.L7-.L9)/2
 104 004c B201     		.2byte	(.L7-.L9)/2
 105 004e AF01     		.2byte	(.L14-.L9)/2
 106              		.p2align 1
 107              	.L8:
ARM GAS  /var/folders/0d/93p3r6493yg7p0rvl_4r983m0000gn/T//cc7OQubD.s 			page 12


 344:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****         MSC_Handle->unit[MSC_Handle->current_lun].state = MSC_READ_INQUIRY;
 108              		.loc 1 344 0
 109 0050 E048     		ldr	r0, .L40
 110              	.LVL6:
 111 0052 FFF7FEFF 		bl	printf
 112              	.LVL7:
 113 0056 0A20     		movs	r0, #10
 114 0058 FFF7FEFF 		bl	putchar
 115              	.LVL8:
 345:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****         MSC_Handle->timer = phost->Timer;
 116              		.loc 1 345 0
 117 005c B4F8F830 		ldrh	r3, [r4, #248]
 118 0060 3422     		movs	r2, #52
 119 0062 02FB0343 		mla	r3, r2, r3, r4
 120 0066 0422     		movs	r2, #4
 121 0068 83F89020 		strb	r2, [r3, #144]
 346:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****         
 122              		.loc 1 346 0
 123 006c D5F8B833 		ldr	r3, [r5, #952]
 124 0070 C4F8FC30 		str	r3, [r4, #252]
 125              	.L12:
 349:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****         
 126              		.loc 1 349 0
 127 0074 B4F8F810 		ldrh	r1, [r4, #248]
 128 0078 3422     		movs	r2, #52
 129 007a 02FB01F2 		mul	r2, r2, r1
 130 007e 9832     		adds	r2, r2, #152
 131 0080 2244     		add	r2, r2, r4
 132 0082 0732     		adds	r2, r2, #7
 133 0084 C9B2     		uxtb	r1, r1
 134 0086 2846     		mov	r0, r5
 135 0088 FFF7FEFF 		bl	USBH_MSC_SCSI_Inquiry
 136              	.LVL9:
 351:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****         {
 137              		.loc 1 351 0
 138 008c 0646     		mov	r6, r0
 139 008e 80B1     		cbz	r0, .L32
 140              	.LVL10:
 141              	.L15:
 358:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****         {
 142              		.loc 1 358 0
 143 0090 022E     		cmp	r6, #2
 144 0092 3ED0     		beq	.L33
 362:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****         {
 145              		.loc 1 362 0
 146 0094 042E     		cmp	r6, #4
 147 0096 40F08481 		bne	.L7
 364:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****           MSC_Handle->unit[MSC_Handle->current_lun].error = MSC_ERROR;
 148              		.loc 1 364 0
 149 009a B4F8F830 		ldrh	r3, [r4, #248]
 150 009e 3422     		movs	r2, #52
 151 00a0 02FB0344 		mla	r4, r2, r3, r4
 152              	.LVL11:
 153 00a4 0123     		movs	r3, #1
 154 00a6 84F89030 		strb	r3, [r4, #144]
 365:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****         }
 155              		.loc 1 365 0
ARM GAS  /var/folders/0d/93p3r6493yg7p0rvl_4r983m0000gn/T//cc7OQubD.s 			page 13


 156 00aa 0223     		movs	r3, #2
 157 00ac 84F89130 		strb	r3, [r4, #145]
 158 00b0 77E1     		b	.L7
 159              	.LVL12:
 160              	.L32:
 353:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****           USBH_UsrLog ("Inquiry Product : %s", MSC_Handle->unit[MSC_Handle->current_lun].inquiry.pr
 161              		.loc 1 353 0
 162 00b2 B4F8F810 		ldrh	r1, [r4, #248]
 163 00b6 3427     		movs	r7, #52
 164 00b8 07FB01F1 		mul	r1, r7, r1
 165 00bc 9831     		adds	r1, r1, #152
 166 00be 2144     		add	r1, r1, r4
 167 00c0 0A31     		adds	r1, r1, #10
 168 00c2 C548     		ldr	r0, .L40+4
 169              	.LVL13:
 170 00c4 FFF7FEFF 		bl	printf
 171              	.LVL14:
 172 00c8 0A20     		movs	r0, #10
 173 00ca FFF7FEFF 		bl	putchar
 174              	.LVL15:
 354:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****           USBH_UsrLog ("Inquiry Version : %s", MSC_Handle->unit[MSC_Handle->current_lun].inquiry.re
 175              		.loc 1 354 0
 176 00ce B4F8F810 		ldrh	r1, [r4, #248]
 177 00d2 07FB01F1 		mul	r1, r7, r1
 178 00d6 A031     		adds	r1, r1, #160
 179 00d8 2144     		add	r1, r1, r4
 180 00da 0B31     		adds	r1, r1, #11
 181 00dc BF48     		ldr	r0, .L40+8
 182 00de FFF7FEFF 		bl	printf
 183              	.LVL16:
 184 00e2 0A20     		movs	r0, #10
 185 00e4 FFF7FEFF 		bl	putchar
 186              	.LVL17:
 355:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****           MSC_Handle->unit[MSC_Handle->current_lun].state = MSC_TEST_UNIT_READY;        
 187              		.loc 1 355 0
 188 00e8 B4F8F810 		ldrh	r1, [r4, #248]
 189 00ec 07FB01F1 		mul	r1, r7, r1
 190 00f0 B031     		adds	r1, r1, #176
 191 00f2 2144     		add	r1, r1, r4
 192 00f4 0C31     		adds	r1, r1, #12
 193 00f6 BA48     		ldr	r0, .L40+12
 194 00f8 FFF7FEFF 		bl	printf
 195              	.LVL18:
 196 00fc 0A20     		movs	r0, #10
 197 00fe FFF7FEFF 		bl	putchar
 198              	.LVL19:
 356:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****         }
 199              		.loc 1 356 0
 200 0102 B4F8F830 		ldrh	r3, [r4, #248]
 201 0106 07FB0347 		mla	r7, r7, r3, r4
 202 010a 0223     		movs	r3, #2
 203 010c 87F89030 		strb	r3, [r7, #144]
 204 0110 BEE7     		b	.L15
 205              	.L33:
 360:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****         }
 206              		.loc 1 360 0
 207 0112 B4F8F830 		ldrh	r3, [r4, #248]
ARM GAS  /var/folders/0d/93p3r6493yg7p0rvl_4r983m0000gn/T//cc7OQubD.s 			page 14


 208 0116 3422     		movs	r2, #52
 209 0118 02FB0344 		mla	r4, r2, r3, r4
 210              	.LVL20:
 211 011c 0523     		movs	r3, #5
 212 011e 84F89030 		strb	r3, [r4, #144]
 213 0122 3EE1     		b	.L7
 214              	.LVL21:
 215              	.L10:
 370:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****         
 216              		.loc 1 370 0
 217 0124 C9B2     		uxtb	r1, r1
 218 0126 FFF7FEFF 		bl	USBH_MSC_SCSI_TestUnitReady
 219              	.LVL22:
 372:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****         {
 220              		.loc 1 372 0
 221 012a 0646     		mov	r6, r0
 222 012c D0B9     		cbnz	r0, .L17
 374:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****           {
 223              		.loc 1 374 0
 224 012e B4F8F830 		ldrh	r3, [r4, #248]
 225 0132 3422     		movs	r2, #52
 226 0134 02FB0342 		mla	r2, r2, r3, r4
 227 0138 92F89220 		ldrb	r2, [r2, #146]	@ zero_extendqisi2
 228 013c 1ABB     		cbnz	r2, .L34
 381:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****           }
 229              		.loc 1 381 0
 230 013e 3422     		movs	r2, #52
 231 0140 02FB0343 		mla	r3, r2, r3, r4
 232 0144 0022     		movs	r2, #0
 233 0146 83F8C120 		strb	r2, [r3, #193]
 234              	.LVL23:
 235              	.L19:
 383:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****           MSC_Handle->unit[MSC_Handle->current_lun].error = MSC_OK;
 236              		.loc 1 383 0
 237 014a B4F8F830 		ldrh	r3, [r4, #248]
 238 014e 3422     		movs	r2, #52
 239 0150 02FB0343 		mla	r3, r2, r3, r4
 240 0154 0322     		movs	r2, #3
 241 0156 83F89020 		strb	r2, [r3, #144]
 384:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****           MSC_Handle->unit[MSC_Handle->current_lun].prev_ready_state = USBH_OK;
 242              		.loc 1 384 0
 243 015a 0022     		movs	r2, #0
 244 015c 83F89120 		strb	r2, [r3, #145]
 385:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****         }
 245              		.loc 1 385 0
 246 0160 83F89220 		strb	r2, [r3, #146]
 247              	.L17:
 387:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****         {
 248              		.loc 1 387 0
 249 0164 022E     		cmp	r6, #2
 250 0166 1BD0     		beq	.L35
 403:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****         {
 251              		.loc 1 403 0
 252 0168 042E     		cmp	r6, #4
 253 016a 40F01A81 		bne	.L7
 405:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****           MSC_Handle->unit[MSC_Handle->current_lun].error = MSC_ERROR;
 254              		.loc 1 405 0
ARM GAS  /var/folders/0d/93p3r6493yg7p0rvl_4r983m0000gn/T//cc7OQubD.s 			page 15


 255 016e B4F8F830 		ldrh	r3, [r4, #248]
 256 0172 3422     		movs	r2, #52
 257 0174 02FB0344 		mla	r4, r2, r3, r4
 258              	.LVL24:
 259 0178 0123     		movs	r3, #1
 260 017a 84F89030 		strb	r3, [r4, #144]
 406:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****         }
 261              		.loc 1 406 0
 262 017e 0223     		movs	r3, #2
 263 0180 84F89130 		strb	r3, [r4, #145]
 264 0184 0DE1     		b	.L7
 265              	.LVL25:
 266              	.L34:
 376:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****             USBH_UsrLog ("MSC Device ready");
 267              		.loc 1 376 0
 268 0186 3422     		movs	r2, #52
 269 0188 02FB0343 		mla	r3, r2, r3, r4
 270 018c 0122     		movs	r2, #1
 271 018e 83F8C120 		strb	r2, [r3, #193]
 377:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****           }
 272              		.loc 1 377 0
 273 0192 9448     		ldr	r0, .L40+16
 274              	.LVL26:
 275 0194 FFF7FEFF 		bl	printf
 276              	.LVL27:
 277 0198 0A20     		movs	r0, #10
 278 019a FFF7FEFF 		bl	putchar
 279              	.LVL28:
 280 019e D4E7     		b	.L19
 281              	.L35:
 390:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****           {
 282              		.loc 1 390 0
 283 01a0 B4F8F830 		ldrh	r3, [r4, #248]
 284 01a4 3422     		movs	r2, #52
 285 01a6 02FB0342 		mla	r2, r2, r3, r4
 286 01aa 92F89220 		ldrb	r2, [r2, #146]	@ zero_extendqisi2
 287 01ae 022A     		cmp	r2, #2
 288 01b0 14D1     		bne	.L36
 397:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****           }         
 289              		.loc 1 397 0
 290 01b2 3422     		movs	r2, #52
 291 01b4 02FB0343 		mla	r3, r2, r3, r4
 292 01b8 0022     		movs	r2, #0
 293 01ba 83F8C120 		strb	r2, [r3, #193]
 294              	.L22:
 399:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****             MSC_Handle->unit[MSC_Handle->current_lun].error = MSC_NOT_READY;
 295              		.loc 1 399 0
 296 01be B4F8F830 		ldrh	r3, [r4, #248]
 297 01c2 3422     		movs	r2, #52
 298 01c4 02FB0344 		mla	r4, r2, r3, r4
 299              	.LVL29:
 300 01c8 0523     		movs	r3, #5
 301 01ca 84F89030 		strb	r3, [r4, #144]
 400:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****             MSC_Handle->unit[MSC_Handle->current_lun].prev_ready_state = USBH_FAIL;
 302              		.loc 1 400 0
 303 01ce 0123     		movs	r3, #1
 304 01d0 84F89130 		strb	r3, [r4, #145]
ARM GAS  /var/folders/0d/93p3r6493yg7p0rvl_4r983m0000gn/T//cc7OQubD.s 			page 16


 401:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****         }
 305              		.loc 1 401 0
 306 01d4 0223     		movs	r3, #2
 307 01d6 84F89230 		strb	r3, [r4, #146]
 308 01da E2E0     		b	.L7
 309              	.LVL30:
 310              	.L36:
 392:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****             USBH_UsrLog ("MSC Device NOT ready");
 311              		.loc 1 392 0
 312 01dc 3422     		movs	r2, #52
 313 01de 02FB0343 		mla	r3, r2, r3, r4
 314 01e2 0122     		movs	r2, #1
 315 01e4 83F8C120 		strb	r2, [r3, #193]
 393:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****           }
 316              		.loc 1 393 0
 317 01e8 7F48     		ldr	r0, .L40+20
 318 01ea FFF7FEFF 		bl	printf
 319              	.LVL31:
 320 01ee 0A20     		movs	r0, #10
 321 01f0 FFF7FEFF 		bl	putchar
 322              	.LVL32:
 323 01f4 E3E7     		b	.L22
 324              	.LVL33:
 325              	.L11:
 411:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****         
 326              		.loc 1 411 0
 327 01f6 3422     		movs	r2, #52
 328 01f8 02FB01F2 		mul	r2, r2, r1
 329 01fc 9032     		adds	r2, r2, #144
 330 01fe 2244     		add	r2, r2, r4
 331 0200 0432     		adds	r2, r2, #4
 332 0202 C9B2     		uxtb	r1, r1
 333 0204 FFF7FEFF 		bl	USBH_MSC_SCSI_ReadCapacity
 334              	.LVL34:
 413:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****         {
 335              		.loc 1 413 0
 336 0208 0028     		cmp	r0, #0
 337 020a 3FD1     		bne	.L23
 415:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****           {
 338              		.loc 1 415 0
 339 020c B4F8F820 		ldrh	r2, [r4, #248]
 340 0210 3423     		movs	r3, #52
 341 0212 03FB0243 		mla	r3, r3, r2, r4
 342 0216 93F8C130 		ldrb	r3, [r3, #193]	@ zero_extendqisi2
 343 021a 012B     		cmp	r3, #1
 344 021c 0ED0     		beq	.L37
 345              	.LVL35:
 346              	.L24:
 422:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****           MSC_Handle->unit[MSC_Handle->current_lun].error = MSC_OK;
 347              		.loc 1 422 0
 348 021e B4F8F830 		ldrh	r3, [r4, #248]
 349 0222 3422     		movs	r2, #52
 350 0224 02FB0342 		mla	r2, r2, r3, r4
 351 0228 0121     		movs	r1, #1
 352 022a 82F89010 		strb	r1, [r2, #144]
 423:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****           MSC_Handle->current_lun++;
 353              		.loc 1 423 0
ARM GAS  /var/folders/0d/93p3r6493yg7p0rvl_4r983m0000gn/T//cc7OQubD.s 			page 17


 354 022e 0021     		movs	r1, #0
 355 0230 82F89110 		strb	r1, [r2, #145]
 424:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****         }
 356              		.loc 1 424 0
 357 0234 0133     		adds	r3, r3, #1
 358 0236 A4F8F830 		strh	r3, [r4, #248]	@ movhi
 359 023a B2E0     		b	.L7
 360              	.LVL36:
 361              	.L37:
 417:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****               (int32_t)(MSC_Handle->unit[MSC_Handle->current_lun].capacity.block_nbr * MSC_Handle->
 362              		.loc 1 417 0
 363 023c 3426     		movs	r6, #52
 364 023e 06FB0242 		mla	r2, r6, r2, r4
 365 0242 D2F89430 		ldr	r3, [r2, #148]
 366 0246 B2F89810 		ldrh	r1, [r2, #152]
 367 024a 01FB03F1 		mul	r1, r1, r3
 368 024e 6748     		ldr	r0, .L40+24
 369              	.LVL37:
 370 0250 FFF7FEFF 		bl	printf
 371              	.LVL38:
 372 0254 0A20     		movs	r0, #10
 373 0256 FFF7FEFF 		bl	putchar
 374              	.LVL39:
 419:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****             USBH_UsrLog ("Block Size   : %lu", (int32_t)(MSC_Handle->unit[MSC_Handle->current_lun].
 375              		.loc 1 419 0
 376 025a B4F8F830 		ldrh	r3, [r4, #248]
 377 025e 06FB0343 		mla	r3, r6, r3, r4
 378 0262 D3F89410 		ldr	r1, [r3, #148]
 379 0266 6248     		ldr	r0, .L40+28
 380 0268 FFF7FEFF 		bl	printf
 381              	.LVL40:
 382 026c 0A20     		movs	r0, #10
 383 026e FFF7FEFF 		bl	putchar
 384              	.LVL41:
 420:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****           }
 385              		.loc 1 420 0
 386 0272 B4F8F830 		ldrh	r3, [r4, #248]
 387 0276 06FB0343 		mla	r3, r6, r3, r4
 388 027a B3F89810 		ldrh	r1, [r3, #152]
 389 027e 5D48     		ldr	r0, .L40+32
 390 0280 FFF7FEFF 		bl	printf
 391              	.LVL42:
 392 0284 0A20     		movs	r0, #10
 393 0286 FFF7FEFF 		bl	putchar
 394              	.LVL43:
 395 028a C8E7     		b	.L24
 396              	.LVL44:
 397              	.L23:
 426:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****         {
 398              		.loc 1 426 0
 399 028c 0228     		cmp	r0, #2
 400 028e 0ED0     		beq	.L38
 430:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****         {
 401              		.loc 1 430 0
 402 0290 0428     		cmp	r0, #4
 403 0292 40F08680 		bne	.L7
 432:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****           MSC_Handle->unit[MSC_Handle->current_lun].error = MSC_ERROR;
ARM GAS  /var/folders/0d/93p3r6493yg7p0rvl_4r983m0000gn/T//cc7OQubD.s 			page 18


 404              		.loc 1 432 0
 405 0296 B4F8F830 		ldrh	r3, [r4, #248]
 406 029a 3422     		movs	r2, #52
 407 029c 02FB0344 		mla	r4, r2, r3, r4
 408              	.LVL45:
 409 02a0 0123     		movs	r3, #1
 410 02a2 84F89030 		strb	r3, [r4, #144]
 433:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****         }
 411              		.loc 1 433 0
 412 02a6 0223     		movs	r3, #2
 413 02a8 84F89130 		strb	r3, [r4, #145]
 414 02ac 79E0     		b	.L7
 415              	.LVL46:
 416              	.L38:
 428:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****         }
 417              		.loc 1 428 0
 418 02ae B4F8F830 		ldrh	r3, [r4, #248]
 419 02b2 3422     		movs	r2, #52
 420 02b4 02FB0344 		mla	r4, r2, r3, r4
 421              	.LVL47:
 422 02b8 0523     		movs	r3, #5
 423 02ba 84F89030 		strb	r3, [r4, #144]
 424 02be 70E0     		b	.L7
 425              	.LVL48:
 426              	.L13:
 438:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****         
 427              		.loc 1 438 0
 428 02c0 3422     		movs	r2, #52
 429 02c2 02FB01F2 		mul	r2, r2, r1
 430 02c6 9832     		adds	r2, r2, #152
 431 02c8 2244     		add	r2, r2, r4
 432 02ca 0432     		adds	r2, r2, #4
 433 02cc C9B2     		uxtb	r1, r1
 434 02ce FFF7FEFF 		bl	USBH_MSC_SCSI_RequestSense
 435              	.LVL49:
 440:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****         {
 436              		.loc 1 440 0
 437 02d2 0646     		mov	r6, r0
 438 02d4 98BB     		cbnz	r0, .L26
 442:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****              (MSC_Handle->unit[MSC_Handle->current_lun].sense.key == SCSI_SENSE_KEY_NOT_READY) )   
 439              		.loc 1 442 0
 440 02d6 B4F8F820 		ldrh	r2, [r4, #248]
 441 02da 3423     		movs	r3, #52
 442 02dc 03FB0243 		mla	r3, r3, r2, r4
 443 02e0 93F89C10 		ldrb	r1, [r3, #156]	@ zero_extendqisi2
 444 02e4 0629     		cmp	r1, #6
 445 02e6 3AD0     		beq	.L27
 442:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****              (MSC_Handle->unit[MSC_Handle->current_lun].sense.key == SCSI_SENSE_KEY_NOT_READY) )   
 446              		.loc 1 442 0 is_stmt 0 discriminator 1
 447 02e8 0229     		cmp	r1, #2
 448 02ea 38D0     		beq	.L27
 449              	.LVL50:
 450              	.L28:
 453:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****           USBH_UsrLog ("Additional Sense Code : %x", MSC_Handle->unit[MSC_Handle->current_lun].sens
 451              		.loc 1 453 0 is_stmt 1
 452 02ec 4248     		ldr	r0, .L40+36
 453 02ee FFF7FEFF 		bl	printf
ARM GAS  /var/folders/0d/93p3r6493yg7p0rvl_4r983m0000gn/T//cc7OQubD.s 			page 19


 454              	.LVL51:
 455 02f2 0A20     		movs	r0, #10
 456 02f4 FFF7FEFF 		bl	putchar
 457              	.LVL52:
 454:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****           USBH_UsrLog ("Additional Sense Code Qualifier: %x", MSC_Handle->unit[MSC_Handle->current_
 458              		.loc 1 454 0
 459 02f8 B4F8F830 		ldrh	r3, [r4, #248]
 460 02fc 3427     		movs	r7, #52
 461 02fe 07FB0343 		mla	r3, r7, r3, r4
 462 0302 93F89D10 		ldrb	r1, [r3, #157]	@ zero_extendqisi2
 463 0306 3D48     		ldr	r0, .L40+40
 464 0308 FFF7FEFF 		bl	printf
 465              	.LVL53:
 466 030c 0A20     		movs	r0, #10
 467 030e FFF7FEFF 		bl	putchar
 468              	.LVL54:
 455:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****           MSC_Handle->unit[MSC_Handle->current_lun].state = MSC_IDLE;
 469              		.loc 1 455 0
 470 0312 B4F8F830 		ldrh	r3, [r4, #248]
 471 0316 07FB0343 		mla	r3, r7, r3, r4
 472 031a 93F89E10 		ldrb	r1, [r3, #158]	@ zero_extendqisi2
 473 031e 3848     		ldr	r0, .L40+44
 474 0320 FFF7FEFF 		bl	printf
 475              	.LVL55:
 476 0324 0A20     		movs	r0, #10
 477 0326 FFF7FEFF 		bl	putchar
 478              	.LVL56:
 456:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****           MSC_Handle->current_lun++;
 479              		.loc 1 456 0
 480 032a B4F8F830 		ldrh	r3, [r4, #248]
 481 032e 07FB0347 		mla	r7, r7, r3, r4
 482 0332 0122     		movs	r2, #1
 483 0334 87F89020 		strb	r2, [r7, #144]
 457:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****         }
 484              		.loc 1 457 0
 485 0338 1344     		add	r3, r3, r2
 486 033a A4F8F830 		strh	r3, [r4, #248]	@ movhi
 487              	.L26:
 459:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****         {
 488              		.loc 1 459 0
 489 033e 022E     		cmp	r6, #2
 490 0340 1DD0     		beq	.L39
 464:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****         {
 491              		.loc 1 464 0
 492 0342 042E     		cmp	r6, #4
 493 0344 2DD1     		bne	.L7
 466:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****           MSC_Handle->unit[MSC_Handle->current_lun].error = MSC_ERROR;   
 494              		.loc 1 466 0
 495 0346 B4F8F830 		ldrh	r3, [r4, #248]
 496 034a 3422     		movs	r2, #52
 497 034c 02FB0344 		mla	r4, r2, r3, r4
 498              	.LVL57:
 499 0350 0123     		movs	r3, #1
 500 0352 84F89030 		strb	r3, [r4, #144]
 467:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****         }
 501              		.loc 1 467 0
 502 0356 0223     		movs	r3, #2
ARM GAS  /var/folders/0d/93p3r6493yg7p0rvl_4r983m0000gn/T//cc7OQubD.s 			page 20


 503 0358 84F89130 		strb	r3, [r4, #145]
 504 035c 21E0     		b	.L7
 505              	.LVL58:
 506              	.L27:
 446:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****             {
 507              		.loc 1 446 0
 508 035e D5F8B833 		ldr	r3, [r5, #952]
 509 0362 D4F8FC00 		ldr	r0, [r4, #252]
 510              	.LVL59:
 511 0366 1B1A     		subs	r3, r3, r0
 512 0368 42F20F70 		movw	r0, #9999
 513 036c 8342     		cmp	r3, r0
 514 036e BDD8     		bhi	.L28
 448:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****               break;
 515              		.loc 1 448 0
 516 0370 3423     		movs	r3, #52
 517 0372 03FB0242 		mla	r2, r3, r2, r4
 518 0376 0223     		movs	r3, #2
 519 0378 82F89030 		strb	r3, [r2, #144]
 449:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****             }        
 520              		.loc 1 449 0
 521 037c 11E0     		b	.L7
 522              	.L39:
 461:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****           MSC_Handle->unit[MSC_Handle->current_lun].state = MSC_UNRECOVERED_ERROR; 
 523              		.loc 1 461 0
 524 037e 1A48     		ldr	r0, .L40+20
 525 0380 FFF7FEFF 		bl	printf
 526              	.LVL60:
 527 0384 0A20     		movs	r0, #10
 528 0386 FFF7FEFF 		bl	putchar
 529              	.LVL61:
 462:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****         }
 530              		.loc 1 462 0
 531 038a B4F8F830 		ldrh	r3, [r4, #248]
 532 038e 3422     		movs	r2, #52
 533 0390 02FB0344 		mla	r4, r2, r3, r4
 534              	.LVL62:
 535 0394 0823     		movs	r3, #8
 536 0396 84F89030 		strb	r3, [r4, #144]
 537 039a 02E0     		b	.L7
 538              	.LVL63:
 539              	.L14:
 472:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****         break;  
 540              		.loc 1 472 0
 541 039c 0131     		adds	r1, r1, #1
 542 039e A4F8F810 		strh	r1, [r4, #248]	@ movhi
 543              	.LVL64:
 544              	.L7:
 480:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** #endif       
 545              		.loc 1 480 0
 546 03a2 0022     		movs	r2, #0
 547 03a4 0421     		movs	r1, #4
 548 03a6 D5F8C803 		ldr	r0, [r5, #968]
 549 03aa FFF7FEFF 		bl	osMessagePut
 550              	.LVL65:
 328:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   USBH_StatusTypeDef scsi_status = USBH_BUSY ;  
 551              		.loc 1 328 0
ARM GAS  /var/folders/0d/93p3r6493yg7p0rvl_4r983m0000gn/T//cc7OQubD.s 			page 21


 552 03ae 0120     		movs	r0, #1
 553 03b0 30E6     		b	.L5
 554              	.LVL66:
 555              	.L6:
 485:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     MSC_Handle->state = MSC_IDLE;
 556              		.loc 1 485 0
 557 03b2 0022     		movs	r2, #0
 558 03b4 A4F8F820 		strh	r2, [r4, #248]	@ movhi
 486:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** #if (USBH_USE_OS == 1)
 559              		.loc 1 486 0
 560 03b8 0126     		movs	r6, #1
 561 03ba 2673     		strb	r6, [r4, #12]
 488:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** #endif 
 562              		.loc 1 488 0
 563 03bc 0421     		movs	r1, #4
 564 03be D0F8C803 		ldr	r0, [r0, #968]
 565              	.LVL67:
 566 03c2 FFF7FEFF 		bl	osMessagePut
 567              	.LVL68:
 490:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     }
 568              		.loc 1 490 0
 569 03c6 D5F8C433 		ldr	r3, [r5, #964]
 570 03ca 0221     		movs	r1, #2
 571 03cc 2846     		mov	r0, r5
 572 03ce 9847     		blx	r3
 573              	.LVL69:
 328:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   USBH_StatusTypeDef scsi_status = USBH_BUSY ;  
 574              		.loc 1 328 0
 575 03d0 3046     		mov	r0, r6
 576 03d2 1FE6     		b	.L5
 577              	.L41:
 578              		.align	2
 579              	.L40:
 580 03d4 00000000 		.word	.LC0
 581 03d8 0C000000 		.word	.LC1
 582 03dc 24000000 		.word	.LC2
 583 03e0 3C000000 		.word	.LC3
 584 03e4 54000000 		.word	.LC4
 585 03e8 68000000 		.word	.LC5
 586 03ec 80000000 		.word	.LC6
 587 03f0 A0000000 		.word	.LC7
 588 03f4 B4000000 		.word	.LC8
 589 03f8 C8000000 		.word	.LC9
 590 03fc D8000000 		.word	.LC10
 591 0400 F4000000 		.word	.LC11
 592              	.LVL70:
 593              	.L30:
 495:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     break;
 594              		.loc 1 495 0
 595 0404 0020     		movs	r0, #0
 596              	.LVL71:
 597 0406 05E6     		b	.L5
 598              		.cfi_endproc
 599              	.LFE134:
 601              		.section	.text.USBH_MSC_ClassRequest,"ax",%progbits
 602              		.align	1
 603              		.syntax unified
ARM GAS  /var/folders/0d/93p3r6493yg7p0rvl_4r983m0000gn/T//cc7OQubD.s 			page 22


 604              		.thumb
 605              		.thumb_func
 606              		.fpu fpv4-sp-d16
 608              	USBH_MSC_ClassRequest:
 609              	.LFB133:
 270:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   MSC_HandleTypeDef *MSC_Handle =  (MSC_HandleTypeDef *) phost->pActiveClass->pData;  
 610              		.loc 1 270 0
 611              		.cfi_startproc
 612              		@ args = 0, pretend = 0, frame = 0
 613              		@ frame_needed = 0, uses_anonymous_args = 0
 614              	.LVL72:
 615 0000 38B5     		push	{r3, r4, r5, lr}
 616              	.LCFI1:
 617              		.cfi_def_cfa_offset 16
 618              		.cfi_offset 3, -16
 619              		.cfi_offset 4, -12
 620              		.cfi_offset 5, -8
 621              		.cfi_offset 14, -4
 271:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   USBH_StatusTypeDef status = USBH_BUSY;
 622              		.loc 1 271 0
 623 0002 D0F87433 		ldr	r3, [r0, #884]
 624 0006 DC69     		ldr	r4, [r3, #28]
 625              	.LVL73:
 276:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   {
 626              		.loc 1 276 0
 627 0008 A37B     		ldrb	r3, [r4, #14]	@ zero_extendqisi2
 628 000a 022B     		cmp	r3, #2
 629 000c 05D0     		beq	.L44
 630 000e 032B     		cmp	r3, #3
 631 0010 28D0     		beq	.L45
 632 0012 13B1     		cbz	r3, .L44
 272:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   uint8_t i;
 633              		.loc 1 272 0
 634 0014 0125     		movs	r5, #1
 635              	.LVL74:
 636              	.L43:
 317:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** 
 637              		.loc 1 317 0
 638 0016 2846     		mov	r0, r5
 639 0018 38BD     		pop	{r3, r4, r5, pc}
 640              	.LVL75:
 641              	.L44:
 281:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     
 642              		.loc 1 281 0
 643 001a 2146     		mov	r1, r4
 644 001c FFF7FEFF 		bl	USBH_MSC_BOT_REQ_GetMaxLUN
 645              	.LVL76:
 646 0020 0546     		mov	r5, r0
 647              	.LVL77:
 285:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     {
 648              		.loc 1 285 0
 649 0022 0328     		cmp	r0, #3
 650 0024 0CD0     		beq	.L54
 291:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     {
 651              		.loc 1 291 0
 652 0026 0028     		cmp	r0, #0
 653 0028 F5D1     		bne	.L43
ARM GAS  /var/folders/0d/93p3r6493yg7p0rvl_4r983m0000gn/T//cc7OQubD.s 			page 23


 654              	.LVL78:
 655              	.L47:
 293:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****       USBH_UsrLog ("Number of supported LUN: %lu", (int32_t)(MSC_Handle->max_lun));
 656              		.loc 1 293 0
 657 002a 2178     		ldrb	r1, [r4]	@ zero_extendqisi2
 658 002c 0131     		adds	r1, r1, #1
 659 002e 2160     		str	r1, [r4]
 294:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****       
 660              		.loc 1 294 0
 661 0030 1148     		ldr	r0, .L55
 662 0032 FFF7FEFF 		bl	printf
 663              	.LVL79:
 664 0036 0A20     		movs	r0, #10
 665 0038 FFF7FEFF 		bl	putchar
 666              	.LVL80:
 296:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****       {
 667              		.loc 1 296 0
 668 003c 0023     		movs	r3, #0
 669 003e 0DE0     		b	.L48
 670              	.LVL81:
 671              	.L54:
 287:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****       status = USBH_OK;
 672              		.loc 1 287 0
 673 0040 0025     		movs	r5, #0
 674 0042 2560     		str	r5, [r4]
 675              	.LVL82:
 676 0044 F1E7     		b	.L47
 677              	.LVL83:
 678              	.L49:
 298:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****         MSC_Handle->unit[i].state_changed = 0;
 679              		.loc 1 298 0 discriminator 3
 680 0046 3422     		movs	r2, #52
 681 0048 02FB0342 		mla	r2, r2, r3, r4
 682 004c 0221     		movs	r1, #2
 683 004e 82F89210 		strb	r1, [r2, #146]
 299:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****       }
 684              		.loc 1 299 0 discriminator 3
 685 0052 0021     		movs	r1, #0
 686 0054 82F8C110 		strb	r1, [r2, #193]
 296:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****       {
 687              		.loc 1 296 0 discriminator 3
 688 0058 0133     		adds	r3, r3, #1
 689              	.LVL84:
 690 005a DBB2     		uxtb	r3, r3
 691              	.LVL85:
 692              	.L48:
 296:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****       {
 693              		.loc 1 296 0 is_stmt 0 discriminator 1
 694 005c 2268     		ldr	r2, [r4]
 695 005e 9342     		cmp	r3, r2
 696 0060 F1D3     		bcc	.L49
 697 0062 D8E7     		b	.L43
 698              	.LVL86:
 699              	.L45:
 306:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     {
 700              		.loc 1 306 0 is_stmt 1
 701 0064 0021     		movs	r1, #0
ARM GAS  /var/folders/0d/93p3r6493yg7p0rvl_4r983m0000gn/T//cc7OQubD.s 			page 24


 702 0066 FFF7FEFF 		bl	USBH_ClrFeature
 703              	.LVL87:
 704 006a 18B9     		cbnz	r0, .L51
 308:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     }    
 705              		.loc 1 308 0
 706 006c E37B     		ldrb	r3, [r4, #15]	@ zero_extendqisi2
 707 006e A373     		strb	r3, [r4, #14]
 272:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   uint8_t i;
 708              		.loc 1 272 0
 709 0070 0125     		movs	r5, #1
 710 0072 D0E7     		b	.L43
 711              	.L51:
 712 0074 0125     		movs	r5, #1
 713 0076 CEE7     		b	.L43
 714              	.L56:
 715              		.align	2
 716              	.L55:
 717 0078 00000000 		.word	.LC12
 718              		.cfi_endproc
 719              	.LFE133:
 721              		.section	.text.USBH_MSC_InterfaceDeInit,"ax",%progbits
 722              		.align	1
 723              		.syntax unified
 724              		.thumb
 725              		.thumb_func
 726              		.fpu fpv4-sp-d16
 728              	USBH_MSC_InterfaceDeInit:
 729              	.LFB132:
 236:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   MSC_HandleTypeDef *MSC_Handle =  (MSC_HandleTypeDef *) phost->pActiveClass->pData;
 730              		.loc 1 236 0
 731              		.cfi_startproc
 732              		@ args = 0, pretend = 0, frame = 0
 733              		@ frame_needed = 0, uses_anonymous_args = 0
 734              	.LVL88:
 735 0000 38B5     		push	{r3, r4, r5, lr}
 736              	.LCFI2:
 737              		.cfi_def_cfa_offset 16
 738              		.cfi_offset 3, -16
 739              		.cfi_offset 4, -12
 740              		.cfi_offset 5, -8
 741              		.cfi_offset 14, -4
 742 0002 0446     		mov	r4, r0
 237:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** 
 743              		.loc 1 237 0
 744 0004 D0F87433 		ldr	r3, [r0, #884]
 745 0008 DD69     		ldr	r5, [r3, #28]
 746              	.LVL89:
 239:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   {
 747              		.loc 1 239 0
 748 000a 6979     		ldrb	r1, [r5, #5]	@ zero_extendqisi2
 749 000c 69B9     		cbnz	r1, .L62
 750              	.LVL90:
 751              	.L58:
 246:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   {
 752              		.loc 1 246 0
 753 000e 2979     		ldrb	r1, [r5, #4]	@ zero_extendqisi2
 754 0010 A1B9     		cbnz	r1, .L63
ARM GAS  /var/folders/0d/93p3r6493yg7p0rvl_4r983m0000gn/T//cc7OQubD.s 			page 25


 755              	.L59:
 253:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   {
 756              		.loc 1 253 0
 757 0012 D4F87433 		ldr	r3, [r4, #884]
 758 0016 D869     		ldr	r0, [r3, #28]
 759 0018 28B1     		cbz	r0, .L60
 255:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     phost->pActiveClass->pData = 0;
 760              		.loc 1 255 0
 761 001a FFF7FEFF 		bl	free
 762              	.LVL91:
 256:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   }
 763              		.loc 1 256 0
 764 001e D4F87433 		ldr	r3, [r4, #884]
 765 0022 0022     		movs	r2, #0
 766 0024 DA61     		str	r2, [r3, #28]
 767              	.L60:
 260:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** 
 768              		.loc 1 260 0
 769 0026 0020     		movs	r0, #0
 770 0028 38BD     		pop	{r3, r4, r5, pc}
 771              	.LVL92:
 772              	.L62:
 241:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     USBH_FreePipe  (phost, MSC_Handle->OutPipe);
 773              		.loc 1 241 0
 774 002a FFF7FEFF 		bl	USBH_ClosePipe
 775              	.LVL93:
 242:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     MSC_Handle->OutPipe = 0;     /* Reset the Channel as Free */
 776              		.loc 1 242 0
 777 002e 6979     		ldrb	r1, [r5, #5]	@ zero_extendqisi2
 778 0030 2046     		mov	r0, r4
 779 0032 FFF7FEFF 		bl	USBH_FreePipe
 780              	.LVL94:
 243:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   }
 781              		.loc 1 243 0
 782 0036 0023     		movs	r3, #0
 783 0038 6B71     		strb	r3, [r5, #5]
 784 003a E8E7     		b	.L58
 785              	.L63:
 248:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     USBH_FreePipe  (phost, MSC_Handle->InPipe);
 786              		.loc 1 248 0
 787 003c 2046     		mov	r0, r4
 788 003e FFF7FEFF 		bl	USBH_ClosePipe
 789              	.LVL95:
 249:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     MSC_Handle->InPipe = 0;     /* Reset the Channel as Free */
 790              		.loc 1 249 0
 791 0042 2979     		ldrb	r1, [r5, #4]	@ zero_extendqisi2
 792 0044 2046     		mov	r0, r4
 793 0046 FFF7FEFF 		bl	USBH_FreePipe
 794              	.LVL96:
 250:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   } 
 795              		.loc 1 250 0
 796 004a 0023     		movs	r3, #0
 797 004c 2B71     		strb	r3, [r5, #4]
 798 004e E0E7     		b	.L59
 799              		.cfi_endproc
 800              	.LFE132:
 802              		.section	.text.USBH_MSC_InterfaceInit,"ax",%progbits
ARM GAS  /var/folders/0d/93p3r6493yg7p0rvl_4r983m0000gn/T//cc7OQubD.s 			page 26


 803              		.align	1
 804              		.syntax unified
 805              		.thumb
 806              		.thumb_func
 807              		.fpu fpv4-sp-d16
 809              	USBH_MSC_InterfaceInit:
 810              	.LFB131:
 150:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   uint8_t interface = 0; 
 811              		.loc 1 150 0
 812              		.cfi_startproc
 813              		@ args = 0, pretend = 0, frame = 0
 814              		@ frame_needed = 0, uses_anonymous_args = 0
 815              	.LVL97:
 816 0000 F0B5     		push	{r4, r5, r6, r7, lr}
 817              	.LCFI3:
 818              		.cfi_def_cfa_offset 20
 819              		.cfi_offset 4, -20
 820              		.cfi_offset 5, -16
 821              		.cfi_offset 6, -12
 822              		.cfi_offset 7, -8
 823              		.cfi_offset 14, -4
 824 0002 85B0     		sub	sp, sp, #20
 825              	.LCFI4:
 826              		.cfi_def_cfa_offset 40
 827 0004 0446     		mov	r4, r0
 828              	.LVL98:
 155:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   
 829              		.loc 1 155 0
 830 0006 D0F87413 		ldr	r1, [r0, #884]
 831 000a 5023     		movs	r3, #80
 832 000c 0622     		movs	r2, #6
 833 000e 0979     		ldrb	r1, [r1, #4]	@ zero_extendqisi2
 834 0010 FFF7FEFF 		bl	USBH_FindInterface
 835              	.LVL99:
 157:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   {
 836              		.loc 1 157 0
 837 0014 FF28     		cmp	r0, #255
 838 0016 76D0     		beq	.L72
 164:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     
 839              		.loc 1 164 0
 840 0018 0146     		mov	r1, r0
 841 001a 2046     		mov	r0, r4
 842              	.LVL100:
 843 001c FFF7FEFF 		bl	USBH_SelectInterface
 844              	.LVL101:
 166:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     MSC_Handle =  (MSC_HandleTypeDef *) phost->pActiveClass->pData;
 845              		.loc 1 166 0
 846 0020 D4F87453 		ldr	r5, [r4, #884]
 847 0024 4FF48070 		mov	r0, #256
 848 0028 FFF7FEFF 		bl	malloc
 849              	.LVL102:
 850 002c E861     		str	r0, [r5, #28]
 167:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     
 851              		.loc 1 167 0
 852 002e D4F87433 		ldr	r3, [r4, #884]
 853 0032 DD69     		ldr	r5, [r3, #28]
 854              	.LVL103:
ARM GAS  /var/folders/0d/93p3r6493yg7p0rvl_4r983m0000gn/T//cc7OQubD.s 			page 27


 169:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     {
 855              		.loc 1 169 0
 856 0034 94F81F33 		ldrb	r3, [r4, #799]	@ zero_extendqisi2
 857 0038 1A22     		movs	r2, #26
 858 003a 02FB0343 		mla	r3, r2, r3, r4
 859 003e 93F84833 		ldrb	r3, [r3, #840]	@ zero_extendqisi2
 860 0042 13F0800F 		tst	r3, #128
 861 0046 6CD1     		bne	.L73
 176:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****       MSC_Handle->OutEpSize  = phost->device.CfgDesc.Itf_Desc[phost->device.current_interface].Ep_D
 862              		.loc 1 176 0
 863 0048 AB71     		strb	r3, [r5, #6]
 177:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     }
 864              		.loc 1 177 0
 865 004a 94F81F33 		ldrb	r3, [r4, #799]	@ zero_extendqisi2
 866 004e 1A22     		movs	r2, #26
 867 0050 02FB0343 		mla	r3, r2, r3, r4
 868 0054 B3F84A33 		ldrh	r3, [r3, #842]
 869 0058 2B81     		strh	r3, [r5, #8]	@ movhi
 870              	.L68:
 180:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     {
 871              		.loc 1 180 0
 872 005a 94F81F33 		ldrb	r3, [r4, #799]	@ zero_extendqisi2
 873 005e 1A22     		movs	r2, #26
 874 0060 02FB0343 		mla	r3, r2, r3, r4
 875 0064 93F85033 		ldrb	r3, [r3, #848]	@ zero_extendqisi2
 876 0068 13F0800F 		tst	r3, #128
 877 006c 62D1     		bne	.L74
 187:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****       MSC_Handle->OutEpSize  = phost->device.CfgDesc.Itf_Desc[phost->device.current_interface].Ep_D
 878              		.loc 1 187 0
 879 006e AB71     		strb	r3, [r5, #6]
 188:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     }
 880              		.loc 1 188 0
 881 0070 94F81F33 		ldrb	r3, [r4, #799]	@ zero_extendqisi2
 882 0074 1A22     		movs	r2, #26
 883 0076 02FB0343 		mla	r3, r2, r3, r4
 884 007a B3F85233 		ldrh	r3, [r3, #850]
 885 007e 2B81     		strh	r3, [r5, #8]	@ movhi
 886              	.L70:
 191:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     MSC_Handle->rw_lun = 0;
 887              		.loc 1 191 0
 888 0080 0026     		movs	r6, #0
 889 0082 A5F8F860 		strh	r6, [r5, #248]	@ movhi
 192:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     MSC_Handle->state = MSC_INIT;
 890              		.loc 1 192 0
 891 0086 A5F8FA60 		strh	r6, [r5, #250]	@ movhi
 193:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     MSC_Handle->error = MSC_OK;
 892              		.loc 1 193 0
 893 008a 2E73     		strb	r6, [r5, #12]
 194:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     MSC_Handle->req_state = MSC_REQ_IDLE;
 894              		.loc 1 194 0
 895 008c 6E73     		strb	r6, [r5, #13]
 195:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     MSC_Handle->OutPipe = USBH_AllocPipe(phost, MSC_Handle->OutEp);
 896              		.loc 1 195 0
 897 008e AE73     		strb	r6, [r5, #14]
 196:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     MSC_Handle->InPipe = USBH_AllocPipe(phost, MSC_Handle->InEp);
 898              		.loc 1 196 0
 899 0090 A979     		ldrb	r1, [r5, #6]	@ zero_extendqisi2
ARM GAS  /var/folders/0d/93p3r6493yg7p0rvl_4r983m0000gn/T//cc7OQubD.s 			page 28


 900 0092 2046     		mov	r0, r4
 901 0094 FFF7FEFF 		bl	USBH_AllocPipe
 902              	.LVL104:
 903 0098 6871     		strb	r0, [r5, #5]
 197:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** 
 904              		.loc 1 197 0
 905 009a E979     		ldrb	r1, [r5, #7]	@ zero_extendqisi2
 906 009c 2046     		mov	r0, r4
 907 009e FFF7FEFF 		bl	USBH_AllocPipe
 908              	.LVL105:
 909 00a2 2871     		strb	r0, [r5, #4]
 199:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     
 910              		.loc 1 199 0
 911 00a4 2046     		mov	r0, r4
 912 00a6 FFF7FEFF 		bl	USBH_MSC_BOT_Init
 913              	.LVL106:
 202:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     
 914              		.loc 1 202 0
 915 00aa 6822     		movs	r2, #104
 916 00ac 3146     		mov	r1, r6
 917 00ae 05F19000 		add	r0, r5, #144
 918 00b2 FFF7FEFF 		bl	memset
 919              	.LVL107:
 205:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****                     MSC_Handle->OutPipe,
 920              		.loc 1 205 0
 921 00b6 94F81C33 		ldrb	r3, [r4, #796]	@ zero_extendqisi2
 922 00ba AA79     		ldrb	r2, [r5, #6]	@ zero_extendqisi2
 923 00bc 6979     		ldrb	r1, [r5, #5]	@ zero_extendqisi2
 924 00be 2889     		ldrh	r0, [r5, #8]
 925 00c0 0290     		str	r0, [sp, #8]
 926 00c2 0227     		movs	r7, #2
 927 00c4 0197     		str	r7, [sp, #4]
 928 00c6 94F81D03 		ldrb	r0, [r4, #797]	@ zero_extendqisi2
 929 00ca 0090     		str	r0, [sp]
 930 00cc 2046     		mov	r0, r4
 931 00ce FFF7FEFF 		bl	USBH_OpenPipe
 932              	.LVL108:
 213:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****                     MSC_Handle->InPipe,
 933              		.loc 1 213 0
 934 00d2 94F81C33 		ldrb	r3, [r4, #796]	@ zero_extendqisi2
 935 00d6 EA79     		ldrb	r2, [r5, #7]	@ zero_extendqisi2
 936 00d8 2979     		ldrb	r1, [r5, #4]	@ zero_extendqisi2
 937 00da 6889     		ldrh	r0, [r5, #10]
 938 00dc 0290     		str	r0, [sp, #8]
 939 00de 0197     		str	r7, [sp, #4]
 940 00e0 94F81D03 		ldrb	r0, [r4, #797]	@ zero_extendqisi2
 941 00e4 0090     		str	r0, [sp]
 942 00e6 2046     		mov	r0, r4
 943 00e8 FFF7FEFF 		bl	USBH_OpenPipe
 944              	.LVL109:
 222:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     USBH_LL_SetToggle  (phost, MSC_Handle->OutPipe,0);
 945              		.loc 1 222 0
 946 00ec 3246     		mov	r2, r6
 947 00ee 2979     		ldrb	r1, [r5, #4]	@ zero_extendqisi2
 948 00f0 2046     		mov	r0, r4
 949 00f2 FFF7FEFF 		bl	USBH_LL_SetToggle
 950              	.LVL110:
ARM GAS  /var/folders/0d/93p3r6493yg7p0rvl_4r983m0000gn/T//cc7OQubD.s 			page 29


 223:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     status = USBH_OK; 
 951              		.loc 1 223 0
 952 00f6 3246     		mov	r2, r6
 953 00f8 6979     		ldrb	r1, [r5, #5]	@ zero_extendqisi2
 954 00fa 2046     		mov	r0, r4
 955 00fc FFF7FEFF 		bl	USBH_LL_SetToggle
 956              	.LVL111:
 224:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   }
 957              		.loc 1 224 0
 958 0100 3046     		mov	r0, r6
 959              	.LVL112:
 960              	.L66:
 227:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** 
 961              		.loc 1 227 0
 962 0102 05B0     		add	sp, sp, #20
 963              	.LCFI5:
 964              		.cfi_remember_state
 965              		.cfi_def_cfa_offset 20
 966              		@ sp needed
 967 0104 F0BD     		pop	{r4, r5, r6, r7, pc}
 968              	.LVL113:
 969              	.L72:
 970              	.LCFI6:
 971              		.cfi_restore_state
 159:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     status = USBH_FAIL;      
 972              		.loc 1 159 0
 973 0106 1048     		ldr	r0, .L75
 974              	.LVL114:
 975 0108 FFF7FEFF 		bl	printf
 976              	.LVL115:
 977 010c D4F87433 		ldr	r3, [r4, #884]
 978 0110 1968     		ldr	r1, [r3]
 979 0112 0E48     		ldr	r0, .L75+4
 980 0114 FFF7FEFF 		bl	printf
 981              	.LVL116:
 982 0118 0A20     		movs	r0, #10
 983 011a FFF7FEFF 		bl	putchar
 984              	.LVL117:
 160:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   }
 985              		.loc 1 160 0
 986 011e 0220     		movs	r0, #2
 987 0120 EFE7     		b	.L66
 988              	.LVL118:
 989              	.L73:
 171:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****       MSC_Handle->InEpSize  = phost->device.CfgDesc.Itf_Desc[phost->device.current_interface].Ep_De
 990              		.loc 1 171 0
 991 0122 EB71     		strb	r3, [r5, #7]
 172:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     }
 992              		.loc 1 172 0
 993 0124 94F81F33 		ldrb	r3, [r4, #799]	@ zero_extendqisi2
 994 0128 02FB0343 		mla	r3, r2, r3, r4
 995 012c B3F84A33 		ldrh	r3, [r3, #842]
 996 0130 6B81     		strh	r3, [r5, #10]	@ movhi
 997 0132 92E7     		b	.L68
 998              	.L74:
 182:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****       MSC_Handle->InEpSize  = phost->device.CfgDesc.Itf_Desc[phost->device.current_interface].Ep_De
 999              		.loc 1 182 0
ARM GAS  /var/folders/0d/93p3r6493yg7p0rvl_4r983m0000gn/T//cc7OQubD.s 			page 30


 1000 0134 EB71     		strb	r3, [r5, #7]
 183:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     }
 1001              		.loc 1 183 0
 1002 0136 94F81F33 		ldrb	r3, [r4, #799]	@ zero_extendqisi2
 1003 013a 02FB0343 		mla	r3, r2, r3, r4
 1004 013e B3F85233 		ldrh	r3, [r3, #850]
 1005 0142 6B81     		strh	r3, [r5, #10]	@ movhi
 1006 0144 9CE7     		b	.L70
 1007              	.L76:
 1008 0146 00BF     		.align	2
 1009              	.L75:
 1010 0148 00000000 		.word	.LC13
 1011 014c 0C000000 		.word	.LC14
 1012              		.cfi_endproc
 1013              	.LFE131:
 1015              		.section	.text.USBH_MSC_RdWrProcess,"ax",%progbits
 1016              		.align	1
 1017              		.syntax unified
 1018              		.thumb
 1019              		.thumb_func
 1020              		.fpu fpv4-sp-d16
 1022              	USBH_MSC_RdWrProcess:
 1023              	.LFB136:
 516:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** /**
 517:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   * @brief  USBH_MSC_RdWrProcess 
 518:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   *         The function is for managing state machine for MSC I/O Process
 519:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   * @param  phost: Host handle
 520:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   * @param  lun: logical Unit Number
 521:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   * @retval USBH Status
 522:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   */
 523:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** static USBH_StatusTypeDef USBH_MSC_RdWrProcess(USBH_HandleTypeDef *phost, uint8_t lun)
 524:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** {
 1024              		.loc 1 524 0
 1025              		.cfi_startproc
 1026              		@ args = 0, pretend = 0, frame = 0
 1027              		@ frame_needed = 0, uses_anonymous_args = 0
 1028              	.LVL119:
 1029 0000 2DE9F043 		push	{r4, r5, r6, r7, r8, r9, lr}
 1030              	.LCFI7:
 1031              		.cfi_def_cfa_offset 28
 1032              		.cfi_offset 4, -28
 1033              		.cfi_offset 5, -24
 1034              		.cfi_offset 6, -20
 1035              		.cfi_offset 7, -16
 1036              		.cfi_offset 8, -12
 1037              		.cfi_offset 9, -8
 1038              		.cfi_offset 14, -4
 1039 0004 83B0     		sub	sp, sp, #12
 1040              	.LCFI8:
 1041              		.cfi_def_cfa_offset 40
 1042 0006 0546     		mov	r5, r0
 1043 0008 0C46     		mov	r4, r1
 525:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   MSC_HandleTypeDef *MSC_Handle =  (MSC_HandleTypeDef *) phost->pActiveClass->pData;
 1044              		.loc 1 525 0
 1045 000a D0F87433 		ldr	r3, [r0, #884]
 1046 000e DF69     		ldr	r7, [r3, #28]
 1047              	.LVL120:
ARM GAS  /var/folders/0d/93p3r6493yg7p0rvl_4r983m0000gn/T//cc7OQubD.s 			page 31


 526:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   USBH_StatusTypeDef error = USBH_BUSY ;
 527:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   USBH_StatusTypeDef scsi_status = USBH_BUSY ;  
 528:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   
 529:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   /* Switch MSC REQ state machine */
 530:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   switch (MSC_Handle->unit[lun].state)
 1048              		.loc 1 530 0
 1049 0010 3423     		movs	r3, #52
 1050 0012 03FB0173 		mla	r3, r3, r1, r7
 1051 0016 93F89030 		ldrb	r3, [r3, #144]	@ zero_extendqisi2
 1052 001a 062B     		cmp	r3, #6
 1053 001c 05D0     		beq	.L79
 1054 001e 072B     		cmp	r3, #7
 1055 0020 30D0     		beq	.L80
 1056 0022 052B     		cmp	r3, #5
 1057 0024 58D0     		beq	.L97
 526:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   USBH_StatusTypeDef error = USBH_BUSY ;
 1058              		.loc 1 526 0
 1059 0026 0126     		movs	r6, #1
 1060 0028 12E0     		b	.L78
 1061              	.L79:
 531:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   {
 532:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****  
 533:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   case MSC_READ: 
 534:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     scsi_status = USBH_MSC_SCSI_Read(phost,lun, 0, NULL, 0) ;
 1062              		.loc 1 534 0
 1063 002a 0022     		movs	r2, #0
 1064 002c 0092     		str	r2, [sp]
 1065 002e 1346     		mov	r3, r2
 1066 0030 FFF7FEFF 		bl	USBH_MSC_SCSI_Read
 1067              	.LVL121:
 535:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     
 536:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     if(scsi_status == USBH_OK)
 1068              		.loc 1 536 0
 1069 0034 0646     		mov	r6, r0
 1070 0036 78B9     		cbnz	r0, .L82
 537:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     {
 538:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****       MSC_Handle->unit[lun].state = MSC_IDLE;
 1071              		.loc 1 538 0
 1072 0038 3423     		movs	r3, #52
 1073 003a 03FB0474 		mla	r4, r3, r4, r7
 1074 003e 0123     		movs	r3, #1
 1075 0040 84F89030 		strb	r3, [r4, #144]
 1076              	.LVL122:
 1077              	.L83:
 539:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****       error = USBH_OK;     
 540:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     }
 541:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     else if( scsi_status == USBH_FAIL)
 542:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     {
 543:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****       MSC_Handle->unit[lun].state = MSC_REQUEST_SENSE;  
 544:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     }
 545:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     else if(scsi_status == USBH_UNRECOVERED_ERROR)
 546:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     {
 547:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****       MSC_Handle->unit[lun].state = MSC_UNRECOVERED_ERROR;
 548:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****           error = USBH_FAIL;
 549:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     }
 550:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** #if (USBH_USE_OS == 1)
 551:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     osMessagePut ( phost->os_event, USBH_CLASS_EVENT, 0);
ARM GAS  /var/folders/0d/93p3r6493yg7p0rvl_4r983m0000gn/T//cc7OQubD.s 			page 32


 1078              		.loc 1 551 0
 1079 0044 0022     		movs	r2, #0
 1080 0046 0421     		movs	r1, #4
 1081 0048 D5F8C803 		ldr	r0, [r5, #968]
 1082              	.LVL123:
 1083 004c FFF7FEFF 		bl	osMessagePut
 1084              	.LVL124:
 1085              	.L78:
 552:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** #endif   
 553:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     break;     
 554:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     
 555:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   case MSC_WRITE: 
 556:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     scsi_status = USBH_MSC_SCSI_Write(phost,lun, 0, NULL, 0) ;
 557:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     
 558:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     if(scsi_status == USBH_OK)
 559:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     {
 560:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****         MSC_Handle->unit[lun].state = MSC_IDLE;
 561:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****         error = USBH_OK;             
 562:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     }
 563:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     else if( scsi_status == USBH_FAIL)
 564:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     {
 565:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****       MSC_Handle->unit[lun].state = MSC_REQUEST_SENSE;  
 566:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     }
 567:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     else if(scsi_status == USBH_UNRECOVERED_ERROR)
 568:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     {
 569:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****       MSC_Handle->unit[lun].state = MSC_UNRECOVERED_ERROR;
 570:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****           error = USBH_FAIL;
 571:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     }
 572:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** #if (USBH_USE_OS == 1)
 573:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     osMessagePut ( phost->os_event, USBH_CLASS_EVENT, 0);
 574:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** #endif       
 575:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     break; 
 576:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   
 577:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   case MSC_REQUEST_SENSE:
 578:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     scsi_status = USBH_MSC_SCSI_RequestSense(phost, lun, &MSC_Handle->unit[lun].sense);
 579:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     
 580:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     if( scsi_status == USBH_OK)
 581:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     {
 582:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****       USBH_UsrLog ("Sense Key  : %x", MSC_Handle->unit[lun].sense.key);
 583:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****       USBH_UsrLog ("Additional Sense Code : %x", MSC_Handle->unit[lun].sense.asc);
 584:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****       USBH_UsrLog ("Additional Sense Code Qualifier: %x", MSC_Handle->unit[lun].sense.ascq);
 585:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****       MSC_Handle->unit[lun].state = MSC_IDLE;
 586:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****       MSC_Handle->unit[lun].error = MSC_ERROR;
 587:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****       
 588:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****       error = USBH_FAIL;
 589:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     }
 590:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     if( scsi_status == USBH_FAIL)
 591:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     {
 592:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****       USBH_UsrLog ("MSC Device NOT ready");
 593:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     }
 594:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     else if(scsi_status == USBH_UNRECOVERED_ERROR)
 595:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     {
 596:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****       MSC_Handle->unit[lun].state = MSC_UNRECOVERED_ERROR;  
 597:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****           error = USBH_FAIL;
 598:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     }
 599:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** #if (USBH_USE_OS == 1)
 600:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     osMessagePut ( phost->os_event, USBH_CLASS_EVENT, 0);
ARM GAS  /var/folders/0d/93p3r6493yg7p0rvl_4r983m0000gn/T//cc7OQubD.s 			page 33


 601:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** #endif       
 602:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     break;  
 603:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     
 604:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   default:
 605:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     break;  
 606:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     
 607:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   }
 608:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   return error;
 609:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** }
 1086              		.loc 1 609 0
 1087 0050 3046     		mov	r0, r6
 1088 0052 03B0     		add	sp, sp, #12
 1089              	.LCFI9:
 1090              		.cfi_remember_state
 1091              		.cfi_def_cfa_offset 28
 1092              		@ sp needed
 1093 0054 BDE8F083 		pop	{r4, r5, r6, r7, r8, r9, pc}
 1094              	.LVL125:
 1095              	.L82:
 1096              	.LCFI10:
 1097              		.cfi_restore_state
 541:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     {
 1098              		.loc 1 541 0
 1099 0058 0228     		cmp	r0, #2
 1100 005a 03D0     		beq	.L98
 545:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     {
 1101              		.loc 1 545 0
 1102 005c 0428     		cmp	r0, #4
 1103 005e 09D0     		beq	.L99
 526:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   USBH_StatusTypeDef scsi_status = USBH_BUSY ;  
 1104              		.loc 1 526 0
 1105 0060 0126     		movs	r6, #1
 1106 0062 EFE7     		b	.L83
 1107              	.L98:
 543:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     }
 1108              		.loc 1 543 0
 1109 0064 3423     		movs	r3, #52
 1110 0066 03FB0474 		mla	r4, r3, r4, r7
 1111 006a 0523     		movs	r3, #5
 1112 006c 84F89030 		strb	r3, [r4, #144]
 526:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   USBH_StatusTypeDef scsi_status = USBH_BUSY ;  
 1113              		.loc 1 526 0
 1114 0070 0126     		movs	r6, #1
 1115 0072 E7E7     		b	.L83
 1116              	.L99:
 547:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****           error = USBH_FAIL;
 1117              		.loc 1 547 0
 1118 0074 3423     		movs	r3, #52
 1119 0076 03FB0474 		mla	r4, r3, r4, r7
 1120 007a 0823     		movs	r3, #8
 1121 007c 84F89030 		strb	r3, [r4, #144]
 1122              	.LVL126:
 548:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     }
 1123              		.loc 1 548 0
 1124 0080 0226     		movs	r6, #2
 1125 0082 DFE7     		b	.L83
 1126              	.LVL127:
ARM GAS  /var/folders/0d/93p3r6493yg7p0rvl_4r983m0000gn/T//cc7OQubD.s 			page 34


 1127              	.L80:
 556:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     
 1128              		.loc 1 556 0
 1129 0084 0022     		movs	r2, #0
 1130 0086 0092     		str	r2, [sp]
 1131 0088 1346     		mov	r3, r2
 1132 008a FFF7FEFF 		bl	USBH_MSC_SCSI_Write
 1133              	.LVL128:
 558:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     {
 1134              		.loc 1 558 0
 1135 008e 0646     		mov	r6, r0
 1136 0090 60B9     		cbnz	r0, .L85
 560:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****         error = USBH_OK;             
 1137              		.loc 1 560 0
 1138 0092 3423     		movs	r3, #52
 1139 0094 03FB0474 		mla	r4, r3, r4, r7
 1140 0098 0123     		movs	r3, #1
 1141 009a 84F89030 		strb	r3, [r4, #144]
 1142              	.LVL129:
 1143              	.L86:
 573:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** #endif       
 1144              		.loc 1 573 0
 1145 009e 0022     		movs	r2, #0
 1146 00a0 0421     		movs	r1, #4
 1147 00a2 D5F8C803 		ldr	r0, [r5, #968]
 1148              	.LVL130:
 1149 00a6 FFF7FEFF 		bl	osMessagePut
 1150              	.LVL131:
 575:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   
 1151              		.loc 1 575 0
 1152 00aa D1E7     		b	.L78
 1153              	.LVL132:
 1154              	.L85:
 563:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     {
 1155              		.loc 1 563 0
 1156 00ac 0228     		cmp	r0, #2
 1157 00ae 03D0     		beq	.L100
 567:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     {
 1158              		.loc 1 567 0
 1159 00b0 0428     		cmp	r0, #4
 1160 00b2 09D0     		beq	.L101
 526:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   USBH_StatusTypeDef scsi_status = USBH_BUSY ;  
 1161              		.loc 1 526 0
 1162 00b4 0126     		movs	r6, #1
 1163 00b6 F2E7     		b	.L86
 1164              	.L100:
 565:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     }
 1165              		.loc 1 565 0
 1166 00b8 3423     		movs	r3, #52
 1167 00ba 03FB0474 		mla	r4, r3, r4, r7
 1168 00be 0523     		movs	r3, #5
 1169 00c0 84F89030 		strb	r3, [r4, #144]
 526:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   USBH_StatusTypeDef scsi_status = USBH_BUSY ;  
 1170              		.loc 1 526 0
 1171 00c4 0126     		movs	r6, #1
 1172 00c6 EAE7     		b	.L86
 1173              	.L101:
ARM GAS  /var/folders/0d/93p3r6493yg7p0rvl_4r983m0000gn/T//cc7OQubD.s 			page 35


 569:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****           error = USBH_FAIL;
 1174              		.loc 1 569 0
 1175 00c8 3423     		movs	r3, #52
 1176 00ca 03FB0474 		mla	r4, r3, r4, r7
 1177 00ce 0823     		movs	r3, #8
 1178 00d0 84F89030 		strb	r3, [r4, #144]
 1179              	.LVL133:
 570:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     }
 1180              		.loc 1 570 0
 1181 00d4 0226     		movs	r6, #2
 1182 00d6 E2E7     		b	.L86
 1183              	.LVL134:
 1184              	.L97:
 578:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     
 1185              		.loc 1 578 0
 1186 00d8 3422     		movs	r2, #52
 1187 00da 02FB01F2 		mul	r2, r2, r1
 1188 00de 9832     		adds	r2, r2, #152
 1189 00e0 3A44     		add	r2, r2, r7
 1190 00e2 0432     		adds	r2, r2, #4
 1191 00e4 FFF7FEFF 		bl	USBH_MSC_SCSI_RequestSense
 1192              	.LVL135:
 580:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     {
 1193              		.loc 1 580 0
 1194 00e8 8046     		mov	r8, r0
 1195 00ea 68B1     		cbz	r0, .L102
 526:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   USBH_StatusTypeDef scsi_status = USBH_BUSY ;  
 1196              		.loc 1 526 0
 1197 00ec 0126     		movs	r6, #1
 1198              	.LVL136:
 1199              	.L88:
 590:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     {
 1200              		.loc 1 590 0
 1201 00ee B8F1020F 		cmp	r8, #2
 1202 00f2 2CD0     		beq	.L103
 594:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     {
 1203              		.loc 1 594 0
 1204 00f4 B8F1040F 		cmp	r8, #4
 1205 00f8 30D0     		beq	.L104
 1206              	.LVL137:
 1207              	.L90:
 600:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** #endif       
 1208              		.loc 1 600 0
 1209 00fa 0022     		movs	r2, #0
 1210 00fc 0421     		movs	r1, #4
 1211 00fe D5F8C803 		ldr	r0, [r5, #968]
 1212 0102 FFF7FEFF 		bl	osMessagePut
 1213              	.LVL138:
 602:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     
 1214              		.loc 1 602 0
 1215 0106 A3E7     		b	.L78
 1216              	.LVL139:
 1217              	.L102:
 582:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****       USBH_UsrLog ("Additional Sense Code : %x", MSC_Handle->unit[lun].sense.asc);
 1218              		.loc 1 582 0
 1219 0108 4FF03409 		mov	r9, #52
 1220 010c 09FB0479 		mla	r9, r9, r4, r7
ARM GAS  /var/folders/0d/93p3r6493yg7p0rvl_4r983m0000gn/T//cc7OQubD.s 			page 36


 1221 0110 99F89C10 		ldrb	r1, [r9, #156]	@ zero_extendqisi2
 1222 0114 1548     		ldr	r0, .L105
 1223              	.LVL140:
 1224 0116 FFF7FEFF 		bl	printf
 1225              	.LVL141:
 1226 011a 0A20     		movs	r0, #10
 1227 011c FFF7FEFF 		bl	putchar
 1228              	.LVL142:
 583:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****       USBH_UsrLog ("Additional Sense Code Qualifier: %x", MSC_Handle->unit[lun].sense.ascq);
 1229              		.loc 1 583 0
 1230 0120 99F89D10 		ldrb	r1, [r9, #157]	@ zero_extendqisi2
 1231 0124 1248     		ldr	r0, .L105+4
 1232 0126 FFF7FEFF 		bl	printf
 1233              	.LVL143:
 1234 012a 0A20     		movs	r0, #10
 1235 012c FFF7FEFF 		bl	putchar
 1236              	.LVL144:
 584:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****       MSC_Handle->unit[lun].state = MSC_IDLE;
 1237              		.loc 1 584 0
 1238 0130 99F89E10 		ldrb	r1, [r9, #158]	@ zero_extendqisi2
 1239 0134 0F48     		ldr	r0, .L105+8
 1240 0136 FFF7FEFF 		bl	printf
 1241              	.LVL145:
 1242 013a 0A20     		movs	r0, #10
 1243 013c FFF7FEFF 		bl	putchar
 1244              	.LVL146:
 585:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****       MSC_Handle->unit[lun].error = MSC_ERROR;
 1245              		.loc 1 585 0
 1246 0140 0123     		movs	r3, #1
 1247 0142 89F89030 		strb	r3, [r9, #144]
 586:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****       
 1248              		.loc 1 586 0
 1249 0146 0226     		movs	r6, #2
 1250 0148 89F89160 		strb	r6, [r9, #145]
 1251              	.LVL147:
 1252 014c CFE7     		b	.L88
 1253              	.LVL148:
 1254              	.L103:
 592:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     }
 1255              		.loc 1 592 0
 1256 014e 0A48     		ldr	r0, .L105+12
 1257 0150 FFF7FEFF 		bl	printf
 1258              	.LVL149:
 1259 0154 0A20     		movs	r0, #10
 1260 0156 FFF7FEFF 		bl	putchar
 1261              	.LVL150:
 1262 015a CEE7     		b	.L90
 1263              	.L104:
 596:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****           error = USBH_FAIL;
 1264              		.loc 1 596 0
 1265 015c 3423     		movs	r3, #52
 1266 015e 03FB0474 		mla	r4, r3, r4, r7
 1267 0162 0823     		movs	r3, #8
 1268 0164 84F89030 		strb	r3, [r4, #144]
 1269              	.LVL151:
 597:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     }
 1270              		.loc 1 597 0
ARM GAS  /var/folders/0d/93p3r6493yg7p0rvl_4r983m0000gn/T//cc7OQubD.s 			page 37


 1271 0168 0226     		movs	r6, #2
 1272 016a C6E7     		b	.L90
 1273              	.L106:
 1274              		.align	2
 1275              	.L105:
 1276 016c C8000000 		.word	.LC9
 1277 0170 D8000000 		.word	.LC10
 1278 0174 F4000000 		.word	.LC11
 1279 0178 68000000 		.word	.LC5
 1280              		.cfi_endproc
 1281              	.LFE136:
 1283              		.section	.text.USBH_MSC_IsReady,"ax",%progbits
 1284              		.align	1
 1285              		.global	USBH_MSC_IsReady
 1286              		.syntax unified
 1287              		.thumb
 1288              		.thumb_func
 1289              		.fpu fpv4-sp-d16
 1291              	USBH_MSC_IsReady:
 1292              	.LFB137:
 610:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** 
 611:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** /**
 612:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   * @brief  USBH_MSC_IsReady 
 613:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   *         The function check if the MSC function is ready
 614:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   * @param  phost: Host handle
 615:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   * @retval USBH Status
 616:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   */
 617:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** uint8_t  USBH_MSC_IsReady (USBH_HandleTypeDef *phost)
 618:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** {
 1293              		.loc 1 618 0
 1294              		.cfi_startproc
 1295              		@ args = 0, pretend = 0, frame = 0
 1296              		@ frame_needed = 0, uses_anonymous_args = 0
 1297              		@ link register save eliminated.
 1298              	.LVL152:
 619:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     MSC_HandleTypeDef *MSC_Handle =  (MSC_HandleTypeDef *) phost->pActiveClass->pData;  
 1299              		.loc 1 619 0
 1300 0000 D0F87433 		ldr	r3, [r0, #884]
 1301 0004 DA69     		ldr	r2, [r3, #28]
 1302              	.LVL153:
 620:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     
 621:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   if(phost->gState == HOST_CLASS)
 1303              		.loc 1 621 0
 1304 0006 0378     		ldrb	r3, [r0]	@ zero_extendqisi2
 1305 0008 DBB2     		uxtb	r3, r3
 1306 000a 0A2B     		cmp	r3, #10
 1307 000c 01D0     		beq	.L110
 622:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   {
 623:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     return (MSC_Handle->state == MSC_IDLE);
 624:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   }
 625:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   else
 626:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   {
 627:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     return 0;
 1308              		.loc 1 627 0
 1309 000e 0020     		movs	r0, #0
 1310              	.LVL154:
 628:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   }
ARM GAS  /var/folders/0d/93p3r6493yg7p0rvl_4r983m0000gn/T//cc7OQubD.s 			page 38


 629:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** }
 1311              		.loc 1 629 0
 1312 0010 7047     		bx	lr
 1313              	.LVL155:
 1314              	.L110:
 623:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   }
 1315              		.loc 1 623 0
 1316 0012 107B     		ldrb	r0, [r2, #12]	@ zero_extendqisi2
 1317              	.LVL156:
 1318 0014 0128     		cmp	r0, #1
 1319 0016 14BF     		ite	ne
 1320 0018 0020     		movne	r0, #0
 1321 001a 0120     		moveq	r0, #1
 1322 001c 7047     		bx	lr
 1323              		.cfi_endproc
 1324              	.LFE137:
 1326              		.section	.text.USBH_MSC_GetMaxLUN,"ax",%progbits
 1327              		.align	1
 1328              		.global	USBH_MSC_GetMaxLUN
 1329              		.syntax unified
 1330              		.thumb
 1331              		.thumb_func
 1332              		.fpu fpv4-sp-d16
 1334              	USBH_MSC_GetMaxLUN:
 1335              	.LFB138:
 630:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** 
 631:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** /**
 632:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   * @brief  USBH_MSC_GetMaxLUN 
 633:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   *         The function return the Max LUN supported
 634:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   * @param  phost: Host handle
 635:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   * @retval logical Unit Number supported
 636:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   */
 637:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** int8_t  USBH_MSC_GetMaxLUN (USBH_HandleTypeDef *phost)
 638:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** {
 1336              		.loc 1 638 0
 1337              		.cfi_startproc
 1338              		@ args = 0, pretend = 0, frame = 0
 1339              		@ frame_needed = 0, uses_anonymous_args = 0
 1340              		@ link register save eliminated.
 1341              	.LVL157:
 639:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   MSC_HandleTypeDef *MSC_Handle =  (MSC_HandleTypeDef *) phost->pActiveClass->pData;    
 1342              		.loc 1 639 0
 1343 0000 D0F87433 		ldr	r3, [r0, #884]
 1344 0004 DA69     		ldr	r2, [r3, #28]
 1345              	.LVL158:
 640:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   
 641:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   if ((phost->gState == HOST_CLASS) && (MSC_Handle->state == MSC_IDLE))
 1346              		.loc 1 641 0
 1347 0006 0378     		ldrb	r3, [r0]	@ zero_extendqisi2
 1348 0008 DBB2     		uxtb	r3, r3
 1349 000a 0A2B     		cmp	r3, #10
 1350 000c 05D1     		bne	.L113
 1351              		.loc 1 641 0 is_stmt 0 discriminator 1
 1352 000e 137B     		ldrb	r3, [r2, #12]	@ zero_extendqisi2
 1353 0010 012B     		cmp	r3, #1
 1354 0012 05D1     		bne	.L114
 642:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   {
ARM GAS  /var/folders/0d/93p3r6493yg7p0rvl_4r983m0000gn/T//cc7OQubD.s 			page 39


 643:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     return  MSC_Handle->max_lun;
 1355              		.loc 1 643 0 is_stmt 1
 1356 0014 92F90000 		ldrsb	r0, [r2]
 1357              	.LVL159:
 1358 0018 7047     		bx	lr
 1359              	.LVL160:
 1360              	.L113:
 644:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   }  
 645:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   return 0xFF;
 1361              		.loc 1 645 0
 1362 001a 4FF0FF30 		mov	r0, #-1
 1363              	.LVL161:
 1364 001e 7047     		bx	lr
 1365              	.LVL162:
 1366              	.L114:
 1367 0020 4FF0FF30 		mov	r0, #-1
 1368              	.LVL163:
 646:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** }
 1369              		.loc 1 646 0
 1370 0024 7047     		bx	lr
 1371              		.cfi_endproc
 1372              	.LFE138:
 1374              		.section	.text.USBH_MSC_UnitIsReady,"ax",%progbits
 1375              		.align	1
 1376              		.global	USBH_MSC_UnitIsReady
 1377              		.syntax unified
 1378              		.thumb
 1379              		.thumb_func
 1380              		.fpu fpv4-sp-d16
 1382              	USBH_MSC_UnitIsReady:
 1383              	.LFB139:
 647:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** 
 648:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** /**
 649:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   * @brief  USBH_MSC_UnitIsReady 
 650:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   *         The function check whether a LUN is ready
 651:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   * @param  phost: Host handle
 652:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   * @param  lun: logical Unit Number
 653:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   * @retval Lun status (0: not ready / 1: ready)
 654:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   */
 655:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** uint8_t  USBH_MSC_UnitIsReady (USBH_HandleTypeDef *phost, uint8_t lun)
 656:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** {
 1384              		.loc 1 656 0
 1385              		.cfi_startproc
 1386              		@ args = 0, pretend = 0, frame = 0
 1387              		@ frame_needed = 0, uses_anonymous_args = 0
 1388              		@ link register save eliminated.
 1389              	.LVL164:
 657:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   MSC_HandleTypeDef *MSC_Handle =  (MSC_HandleTypeDef *) phost->pActiveClass->pData;  
 1390              		.loc 1 657 0
 1391 0000 D0F87433 		ldr	r3, [r0, #884]
 1392 0004 DA69     		ldr	r2, [r3, #28]
 1393              	.LVL165:
 658:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   
 659:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   if(phost->gState == HOST_CLASS)
 1394              		.loc 1 659 0
 1395 0006 0378     		ldrb	r3, [r0]	@ zero_extendqisi2
 1396 0008 DBB2     		uxtb	r3, r3
ARM GAS  /var/folders/0d/93p3r6493yg7p0rvl_4r983m0000gn/T//cc7OQubD.s 			page 40


 1397 000a 0A2B     		cmp	r3, #10
 1398 000c 01D0     		beq	.L118
 660:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   {
 661:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     return (MSC_Handle->unit[lun].error == MSC_OK);
 662:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   }
 663:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   else
 664:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   {
 665:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     return 0;
 1399              		.loc 1 665 0
 1400 000e 0020     		movs	r0, #0
 1401              	.LVL166:
 666:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   }
 667:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** }
 1402              		.loc 1 667 0
 1403 0010 7047     		bx	lr
 1404              	.LVL167:
 1405              	.L118:
 661:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   }
 1406              		.loc 1 661 0
 1407 0012 3423     		movs	r3, #52
 1408 0014 03FB0121 		mla	r1, r3, r1, r2
 1409              	.LVL168:
 1410 0018 91F89100 		ldrb	r0, [r1, #145]	@ zero_extendqisi2
 1411              	.LVL169:
 1412 001c B0FA80F0 		clz	r0, r0
 1413 0020 4009     		lsrs	r0, r0, #5
 1414 0022 7047     		bx	lr
 1415              		.cfi_endproc
 1416              	.LFE139:
 1418              		.section	.text.USBH_MSC_GetLUNInfo,"ax",%progbits
 1419              		.align	1
 1420              		.global	USBH_MSC_GetLUNInfo
 1421              		.syntax unified
 1422              		.thumb
 1423              		.thumb_func
 1424              		.fpu fpv4-sp-d16
 1426              	USBH_MSC_GetLUNInfo:
 1427              	.LFB140:
 668:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****       
 669:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** /**
 670:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   * @brief  USBH_MSC_GetLUNInfo 
 671:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   *         The function return a LUN information
 672:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   * @param  phost: Host handle
 673:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   * @param  lun: logical Unit Number
 674:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   * @retval USBH Status
 675:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   */
 676:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** USBH_StatusTypeDef USBH_MSC_GetLUNInfo(USBH_HandleTypeDef *phost, uint8_t lun, MSC_LUNTypeDef *info
 677:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** {
 1428              		.loc 1 677 0
 1429              		.cfi_startproc
 1430              		@ args = 0, pretend = 0, frame = 0
 1431              		@ frame_needed = 0, uses_anonymous_args = 0
 1432              		@ link register save eliminated.
 1433              	.LVL170:
 678:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   MSC_HandleTypeDef *MSC_Handle =  (MSC_HandleTypeDef *) phost->pActiveClass->pData;    
 1434              		.loc 1 678 0
 1435 0000 D0F87433 		ldr	r3, [r0, #884]
ARM GAS  /var/folders/0d/93p3r6493yg7p0rvl_4r983m0000gn/T//cc7OQubD.s 			page 41


 1436 0004 DB69     		ldr	r3, [r3, #28]
 1437              	.LVL171:
 679:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   if(phost->gState == HOST_CLASS)
 1438              		.loc 1 679 0
 1439 0006 0078     		ldrb	r0, [r0]	@ zero_extendqisi2
 1440              	.LVL172:
 1441 0008 C0B2     		uxtb	r0, r0
 1442 000a 0A28     		cmp	r0, #10
 1443 000c 01D0     		beq	.L127
 680:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   {
 681:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     USBH_memcpy(info,&MSC_Handle->unit[lun], sizeof(MSC_LUNTypeDef));
 682:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     return USBH_OK;
 683:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   }
 684:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   else
 685:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   {
 686:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     return USBH_FAIL;
 1444              		.loc 1 686 0
 1445 000e 0220     		movs	r0, #2
 687:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   }
 688:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** }
 1446              		.loc 1 688 0
 1447 0010 7047     		bx	lr
 1448              	.L127:
 677:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   MSC_HandleTypeDef *MSC_Handle =  (MSC_HandleTypeDef *) phost->pActiveClass->pData;    
 1449              		.loc 1 677 0
 1450 0012 70B4     		push	{r4, r5, r6}
 1451              	.LCFI11:
 1452              		.cfi_def_cfa_offset 12
 1453              		.cfi_offset 4, -12
 1454              		.cfi_offset 5, -8
 1455              		.cfi_offset 6, -4
 681:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     return USBH_OK;
 1456              		.loc 1 681 0
 1457 0014 3420     		movs	r0, #52
 1458 0016 00FB01F1 		mul	r1, r0, r1
 1459              	.LVL173:
 1460 001a 9031     		adds	r1, r1, #144
 1461 001c 1944     		add	r1, r1, r3
 1462 001e 01F13003 		add	r3, r1, #48
 1463              	.LVL174:
 1464              	.L121:
 1465 0022 0E68     		ldr	r6, [r1]	@ unaligned
 1466 0024 4D68     		ldr	r5, [r1, #4]	@ unaligned
 1467 0026 8C68     		ldr	r4, [r1, #8]	@ unaligned
 1468 0028 C868     		ldr	r0, [r1, #12]	@ unaligned
 1469 002a 1660     		str	r6, [r2]	@ unaligned
 1470 002c 5560     		str	r5, [r2, #4]	@ unaligned
 1471 002e 9460     		str	r4, [r2, #8]	@ unaligned
 1472 0030 D060     		str	r0, [r2, #12]	@ unaligned
 1473 0032 1031     		adds	r1, r1, #16
 1474 0034 1032     		adds	r2, r2, #16
 1475 0036 9942     		cmp	r1, r3
 1476 0038 F3D1     		bne	.L121
 1477 003a 0B68     		ldr	r3, [r1]	@ unaligned
 1478 003c 1360     		str	r3, [r2]	@ unaligned
 682:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   }
 1479              		.loc 1 682 0
ARM GAS  /var/folders/0d/93p3r6493yg7p0rvl_4r983m0000gn/T//cc7OQubD.s 			page 42


 1480 003e 0020     		movs	r0, #0
 1481              		.loc 1 688 0
 1482 0040 70BC     		pop	{r4, r5, r6}
 1483              	.LCFI12:
 1484              		.cfi_restore 6
 1485              		.cfi_restore 5
 1486              		.cfi_restore 4
 1487              		.cfi_def_cfa_offset 0
 1488 0042 7047     		bx	lr
 1489              		.cfi_endproc
 1490              	.LFE140:
 1492              		.section	.text.USBH_MSC_Read,"ax",%progbits
 1493              		.align	1
 1494              		.global	USBH_MSC_Read
 1495              		.syntax unified
 1496              		.thumb
 1497              		.thumb_func
 1498              		.fpu fpv4-sp-d16
 1500              	USBH_MSC_Read:
 1501              	.LFB141:
 689:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** 
 690:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** /**
 691:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   * @brief  USBH_MSC_Read 
 692:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   *         The function performs a Read operation 
 693:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   * @param  phost: Host handle
 694:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   * @param  lun: logical Unit Number
 695:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   * @param  address: sector address
 696:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   * @param  pbuf: pointer to data
 697:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   * @param  length: number of sector to read
 698:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   * @retval USBH Status
 699:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   */
 700:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** USBH_StatusTypeDef USBH_MSC_Read(USBH_HandleTypeDef *phost,
 701:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****                                      uint8_t lun,
 702:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****                                      uint32_t address,
 703:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****                                      uint8_t *pbuf,
 704:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****                                      uint32_t length)
 705:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** {
 1502              		.loc 1 705 0
 1503              		.cfi_startproc
 1504              		@ args = 4, pretend = 0, frame = 0
 1505              		@ frame_needed = 0, uses_anonymous_args = 0
 1506              	.LVL175:
 1507 0000 F0B5     		push	{r4, r5, r6, r7, lr}
 1508              	.LCFI13:
 1509              		.cfi_def_cfa_offset 20
 1510              		.cfi_offset 4, -20
 1511              		.cfi_offset 5, -16
 1512              		.cfi_offset 6, -12
 1513              		.cfi_offset 7, -8
 1514              		.cfi_offset 14, -4
 1515 0002 83B0     		sub	sp, sp, #12
 1516              	.LCFI14:
 1517              		.cfi_def_cfa_offset 32
 706:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   uint32_t timeout;
 707:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   MSC_HandleTypeDef *MSC_Handle =  (MSC_HandleTypeDef *) phost->pActiveClass->pData;   
 1518              		.loc 1 707 0
 1519 0004 D0F87443 		ldr	r4, [r0, #884]
ARM GAS  /var/folders/0d/93p3r6493yg7p0rvl_4r983m0000gn/T//cc7OQubD.s 			page 43


 1520 0008 E769     		ldr	r7, [r4, #28]
 1521              	.LVL176:
 708:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   
 709:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   if ((phost->device.is_connected == 0) || 
 1522              		.loc 1 709 0
 1523 000a 90F81E43 		ldrb	r4, [r0, #798]	@ zero_extendqisi2
 1524 000e 002C     		cmp	r4, #0
 1525 0010 3BD0     		beq	.L133
 710:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****       (phost->gState != HOST_CLASS) || 
 1526              		.loc 1 710 0 discriminator 1
 1527 0012 0478     		ldrb	r4, [r0]	@ zero_extendqisi2
 1528 0014 E4B2     		uxtb	r4, r4
 709:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****       (phost->gState != HOST_CLASS) || 
 1529              		.loc 1 709 0 discriminator 1
 1530 0016 0A2C     		cmp	r4, #10
 1531 0018 39D1     		bne	.L134
 711:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****       (MSC_Handle->unit[lun].state != MSC_IDLE))
 1532              		.loc 1 711 0
 1533 001a 3424     		movs	r4, #52
 1534 001c 04FB0174 		mla	r4, r4, r1, r7
 1535 0020 94F89040 		ldrb	r4, [r4, #144]	@ zero_extendqisi2
 710:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****       (phost->gState != HOST_CLASS) || 
 1536              		.loc 1 710 0
 1537 0024 012C     		cmp	r4, #1
 1538 0026 01D0     		beq	.L137
 712:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   {
 713:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     return  USBH_FAIL;
 1539              		.loc 1 713 0
 1540 0028 0220     		movs	r0, #2
 1541              	.LVL177:
 1542 002a 31E0     		b	.L129
 1543              	.LVL178:
 1544              	.L137:
 1545 002c 0E46     		mov	r6, r1
 1546 002e 0446     		mov	r4, r0
 714:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   }
 715:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   MSC_Handle->state = MSC_READ;
 1547              		.loc 1 715 0
 1548 0030 0620     		movs	r0, #6
 1549              	.LVL179:
 1550 0032 3873     		strb	r0, [r7, #12]
 716:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   MSC_Handle->unit[lun].state = MSC_READ;
 1551              		.loc 1 716 0
 1552 0034 3421     		movs	r1, #52
 1553              	.LVL180:
 1554 0036 01FB0671 		mla	r1, r1, r6, r7
 1555 003a 81F89000 		strb	r0, [r1, #144]
 717:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   MSC_Handle->rw_lun = lun;
 1556              		.loc 1 717 0
 1557 003e A7F8FA60 		strh	r6, [r7, #250]	@ movhi
 718:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   USBH_MSC_SCSI_Read(phost,
 1558              		.loc 1 718 0
 1559 0042 0899     		ldr	r1, [sp, #32]
 1560 0044 0091     		str	r1, [sp]
 1561 0046 3146     		mov	r1, r6
 1562 0048 2046     		mov	r0, r4
 1563 004a FFF7FEFF 		bl	USBH_MSC_SCSI_Read
ARM GAS  /var/folders/0d/93p3r6493yg7p0rvl_4r983m0000gn/T//cc7OQubD.s 			page 44


 1564              	.LVL181:
 719:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****                      lun,
 720:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****                      address,
 721:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****                      pbuf,
 722:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****                      length);
 723:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   
 724:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   timeout = phost->Timer;
 1565              		.loc 1 724 0
 1566 004e D4F8B853 		ldr	r5, [r4, #952]
 1567              	.LVL182:
 1568              	.L130:
 725:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   
 726:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   while (USBH_MSC_RdWrProcess(phost, lun) == USBH_BUSY)
 1569              		.loc 1 726 0
 1570 0052 3146     		mov	r1, r6
 1571 0054 2046     		mov	r0, r4
 1572 0056 FFF7FEFF 		bl	USBH_MSC_RdWrProcess
 1573              	.LVL183:
 1574 005a 0128     		cmp	r0, #1
 1575 005c 11D1     		bne	.L138
 727:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   {
 728:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     if(((phost->Timer - timeout) > (10000 * length)) || (phost->device.is_connected == 0))
 1576              		.loc 1 728 0
 1577 005e D4F8B823 		ldr	r2, [r4, #952]
 1578 0062 521B     		subs	r2, r2, r5
 1579 0064 42F21073 		movw	r3, #10000
 1580 0068 0899     		ldr	r1, [sp, #32]
 1581 006a 03FB01F3 		mul	r3, r3, r1
 1582 006e 9A42     		cmp	r2, r3
 1583 0070 03D8     		bhi	.L131
 1584              		.loc 1 728 0 is_stmt 0 discriminator 1
 1585 0072 94F81E33 		ldrb	r3, [r4, #798]	@ zero_extendqisi2
 1586 0076 002B     		cmp	r3, #0
 1587 0078 EBD1     		bne	.L130
 1588              	.L131:
 729:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     {
 730:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****       MSC_Handle->state = MSC_IDLE;
 1589              		.loc 1 730 0 is_stmt 1
 1590 007a 0123     		movs	r3, #1
 1591 007c 3B73     		strb	r3, [r7, #12]
 731:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****       return USBH_FAIL;
 1592              		.loc 1 731 0
 1593 007e 0220     		movs	r0, #2
 1594 0080 06E0     		b	.L129
 1595              	.L138:
 732:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     }
 733:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   }
 734:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   MSC_Handle->state = MSC_IDLE;
 1596              		.loc 1 734 0
 1597 0082 0123     		movs	r3, #1
 1598 0084 3B73     		strb	r3, [r7, #12]
 735:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   return USBH_OK;
 1599              		.loc 1 735 0
 1600 0086 0020     		movs	r0, #0
 1601 0088 02E0     		b	.L129
 1602              	.LVL184:
 1603              	.L133:
ARM GAS  /var/folders/0d/93p3r6493yg7p0rvl_4r983m0000gn/T//cc7OQubD.s 			page 45


 713:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   }
 1604              		.loc 1 713 0
 1605 008a 0220     		movs	r0, #2
 1606              	.LVL185:
 1607 008c 00E0     		b	.L129
 1608              	.LVL186:
 1609              	.L134:
 1610 008e 0220     		movs	r0, #2
 1611              	.LVL187:
 1612              	.L129:
 736:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** }
 1613              		.loc 1 736 0
 1614 0090 03B0     		add	sp, sp, #12
 1615              	.LCFI15:
 1616              		.cfi_def_cfa_offset 20
 1617              		@ sp needed
 1618 0092 F0BD     		pop	{r4, r5, r6, r7, pc}
 1619              		.cfi_endproc
 1620              	.LFE141:
 1622              		.section	.text.USBH_MSC_Write,"ax",%progbits
 1623              		.align	1
 1624              		.global	USBH_MSC_Write
 1625              		.syntax unified
 1626              		.thumb
 1627              		.thumb_func
 1628              		.fpu fpv4-sp-d16
 1630              	USBH_MSC_Write:
 1631              	.LFB142:
 737:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** 
 738:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** /**
 739:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   * @brief  USBH_MSC_Write 
 740:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   *         The function performs a Write operation 
 741:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   * @param  phost: Host handle
 742:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   * @param  lun: logical Unit Number
 743:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   * @param  address: sector address
 744:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   * @param  pbuf: pointer to data
 745:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   * @param  length: number of sector to write
 746:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   * @retval USBH Status
 747:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   */
 748:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** USBH_StatusTypeDef USBH_MSC_Write(USBH_HandleTypeDef *phost,
 749:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****                                      uint8_t lun,
 750:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****                                      uint32_t address,
 751:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****                                      uint8_t *pbuf,
 752:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****                                      uint32_t length)
 753:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** {
 1632              		.loc 1 753 0
 1633              		.cfi_startproc
 1634              		@ args = 4, pretend = 0, frame = 0
 1635              		@ frame_needed = 0, uses_anonymous_args = 0
 1636              	.LVL188:
 1637 0000 F0B5     		push	{r4, r5, r6, r7, lr}
 1638              	.LCFI16:
 1639              		.cfi_def_cfa_offset 20
 1640              		.cfi_offset 4, -20
 1641              		.cfi_offset 5, -16
 1642              		.cfi_offset 6, -12
 1643              		.cfi_offset 7, -8
ARM GAS  /var/folders/0d/93p3r6493yg7p0rvl_4r983m0000gn/T//cc7OQubD.s 			page 46


 1644              		.cfi_offset 14, -4
 1645 0002 83B0     		sub	sp, sp, #12
 1646              	.LCFI17:
 1647              		.cfi_def_cfa_offset 32
 754:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   uint32_t timeout;
 755:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   MSC_HandleTypeDef *MSC_Handle =  (MSC_HandleTypeDef *) phost->pActiveClass->pData;   
 1648              		.loc 1 755 0
 1649 0004 D0F87443 		ldr	r4, [r0, #884]
 1650 0008 E769     		ldr	r7, [r4, #28]
 1651              	.LVL189:
 756:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   
 757:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   if ((phost->device.is_connected == 0) || 
 1652              		.loc 1 757 0
 1653 000a 90F81E43 		ldrb	r4, [r0, #798]	@ zero_extendqisi2
 1654 000e 002C     		cmp	r4, #0
 1655 0010 3BD0     		beq	.L144
 758:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****       (phost->gState != HOST_CLASS) || 
 1656              		.loc 1 758 0 discriminator 1
 1657 0012 0478     		ldrb	r4, [r0]	@ zero_extendqisi2
 1658 0014 E4B2     		uxtb	r4, r4
 757:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****       (phost->gState != HOST_CLASS) || 
 1659              		.loc 1 757 0 discriminator 1
 1660 0016 0A2C     		cmp	r4, #10
 1661 0018 39D1     		bne	.L145
 759:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****       (MSC_Handle->unit[lun].state != MSC_IDLE))
 1662              		.loc 1 759 0
 1663 001a 3424     		movs	r4, #52
 1664 001c 04FB0174 		mla	r4, r4, r1, r7
 1665 0020 94F89040 		ldrb	r4, [r4, #144]	@ zero_extendqisi2
 758:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****       (phost->gState != HOST_CLASS) || 
 1666              		.loc 1 758 0
 1667 0024 012C     		cmp	r4, #1
 1668 0026 01D0     		beq	.L148
 760:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   {
 761:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     return  USBH_FAIL;
 1669              		.loc 1 761 0
 1670 0028 0220     		movs	r0, #2
 1671              	.LVL190:
 1672 002a 31E0     		b	.L140
 1673              	.LVL191:
 1674              	.L148:
 1675 002c 0E46     		mov	r6, r1
 1676 002e 0446     		mov	r4, r0
 762:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   }
 763:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   MSC_Handle->state = MSC_WRITE;
 1677              		.loc 1 763 0
 1678 0030 0720     		movs	r0, #7
 1679              	.LVL192:
 1680 0032 3873     		strb	r0, [r7, #12]
 764:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   MSC_Handle->unit[lun].state = MSC_WRITE;
 1681              		.loc 1 764 0
 1682 0034 3421     		movs	r1, #52
 1683              	.LVL193:
 1684 0036 01FB0671 		mla	r1, r1, r6, r7
 1685 003a 81F89000 		strb	r0, [r1, #144]
 765:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   MSC_Handle->rw_lun = lun;
 1686              		.loc 1 765 0
ARM GAS  /var/folders/0d/93p3r6493yg7p0rvl_4r983m0000gn/T//cc7OQubD.s 			page 47


 1687 003e A7F8FA60 		strh	r6, [r7, #250]	@ movhi
 766:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   USBH_MSC_SCSI_Write(phost,
 1688              		.loc 1 766 0
 1689 0042 0899     		ldr	r1, [sp, #32]
 1690 0044 0091     		str	r1, [sp]
 1691 0046 3146     		mov	r1, r6
 1692 0048 2046     		mov	r0, r4
 1693 004a FFF7FEFF 		bl	USBH_MSC_SCSI_Write
 1694              	.LVL194:
 767:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****                      lun,
 768:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****                      address,
 769:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****                      pbuf,
 770:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****                      length);
 771:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   
 772:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   timeout = phost->Timer;
 1695              		.loc 1 772 0
 1696 004e D4F8B853 		ldr	r5, [r4, #952]
 1697              	.LVL195:
 1698              	.L141:
 773:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   while (USBH_MSC_RdWrProcess(phost, lun) == USBH_BUSY)
 1699              		.loc 1 773 0
 1700 0052 3146     		mov	r1, r6
 1701 0054 2046     		mov	r0, r4
 1702 0056 FFF7FEFF 		bl	USBH_MSC_RdWrProcess
 1703              	.LVL196:
 1704 005a 0128     		cmp	r0, #1
 1705 005c 11D1     		bne	.L149
 774:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   {
 775:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     if(((phost->Timer - timeout) >  (10000 * length)) || (phost->device.is_connected == 0))
 1706              		.loc 1 775 0
 1707 005e D4F8B823 		ldr	r2, [r4, #952]
 1708 0062 521B     		subs	r2, r2, r5
 1709 0064 42F21073 		movw	r3, #10000
 1710 0068 0899     		ldr	r1, [sp, #32]
 1711 006a 03FB01F3 		mul	r3, r3, r1
 1712 006e 9A42     		cmp	r2, r3
 1713 0070 03D8     		bhi	.L142
 1714              		.loc 1 775 0 is_stmt 0 discriminator 1
 1715 0072 94F81E33 		ldrb	r3, [r4, #798]	@ zero_extendqisi2
 1716 0076 002B     		cmp	r3, #0
 1717 0078 EBD1     		bne	.L141
 1718              	.L142:
 776:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     {
 777:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****       MSC_Handle->state = MSC_IDLE;
 1719              		.loc 1 777 0 is_stmt 1
 1720 007a 0123     		movs	r3, #1
 1721 007c 3B73     		strb	r3, [r7, #12]
 778:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****       return USBH_FAIL;
 1722              		.loc 1 778 0
 1723 007e 0220     		movs	r0, #2
 1724 0080 06E0     		b	.L140
 1725              	.L149:
 779:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     }
 780:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   }
 781:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   MSC_Handle->state = MSC_IDLE;
 1726              		.loc 1 781 0
 1727 0082 0123     		movs	r3, #1
ARM GAS  /var/folders/0d/93p3r6493yg7p0rvl_4r983m0000gn/T//cc7OQubD.s 			page 48


 1728 0084 3B73     		strb	r3, [r7, #12]
 782:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   return USBH_OK;
 1729              		.loc 1 782 0
 1730 0086 0020     		movs	r0, #0
 1731 0088 02E0     		b	.L140
 1732              	.LVL197:
 1733              	.L144:
 761:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   }
 1734              		.loc 1 761 0
 1735 008a 0220     		movs	r0, #2
 1736              	.LVL198:
 1737 008c 00E0     		b	.L140
 1738              	.LVL199:
 1739              	.L145:
 1740 008e 0220     		movs	r0, #2
 1741              	.LVL200:
 1742              	.L140:
 783:Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** }
 1743              		.loc 1 783 0
 1744 0090 03B0     		add	sp, sp, #12
 1745              	.LCFI18:
 1746              		.cfi_def_cfa_offset 20
 1747              		@ sp needed
 1748 0092 F0BD     		pop	{r4, r5, r6, r7, pc}
 1749              		.cfi_endproc
 1750              	.LFE142:
 1752              		.global	USBH_msc
 1753              		.section	.data.USBH_msc,"aw",%progbits
 1754              		.align	2
 1757              	USBH_msc:
 1758 0000 00000000 		.word	.LC15
 1759 0004 08       		.byte	8
 1760 0005 000000   		.space	3
 1761 0008 00000000 		.word	USBH_MSC_InterfaceInit
 1762 000c 00000000 		.word	USBH_MSC_InterfaceDeInit
 1763 0010 00000000 		.word	USBH_MSC_ClassRequest
 1764 0014 00000000 		.word	USBH_MSC_Process
 1765 0018 00000000 		.word	USBH_MSC_SOFProcess
 1766 001c 00000000 		.word	0
 1767              		.section	.rodata.USBH_MSC_ClassRequest.str1.4,"aMS",%progbits,1
 1768              		.align	2
 1769              	.LC12:
 1770 0000 4E756D62 		.ascii	"Number of supported LUN: %lu\000"
 1770      6572206F 
 1770      66207375 
 1770      70706F72 
 1770      74656420 
 1771              		.section	.rodata.USBH_MSC_InterfaceInit.str1.4,"aMS",%progbits,1
 1772              		.align	2
 1773              	.LC13:
 1774 0000 44454255 		.ascii	"DEBUG : \000"
 1774      47203A20 
 1774      00
 1775 0009 000000   		.space	3
 1776              	.LC14:
 1777 000c 43616E6E 		.ascii	"Cannot Find the interface for %s class.\000"
 1777      6F742046 
ARM GAS  /var/folders/0d/93p3r6493yg7p0rvl_4r983m0000gn/T//cc7OQubD.s 			page 49


 1777      696E6420 
 1777      74686520 
 1777      696E7465 
 1778              		.section	.rodata.USBH_MSC_Process.str1.4,"aMS",%progbits,1
 1779              		.align	2
 1780              	.LC0:
 1781 0000 4C554E20 		.ascii	"LUN #%d: \000"
 1781      2325643A 
 1781      2000
 1782 000a 0000     		.space	2
 1783              	.LC1:
 1784 000c 496E7175 		.ascii	"Inquiry Vendor  : %s\000"
 1784      69727920 
 1784      56656E64 
 1784      6F722020 
 1784      3A202573 
 1785 0021 000000   		.space	3
 1786              	.LC2:
 1787 0024 496E7175 		.ascii	"Inquiry Product : %s\000"
 1787      69727920 
 1787      50726F64 
 1787      75637420 
 1787      3A202573 
 1788 0039 000000   		.space	3
 1789              	.LC3:
 1790 003c 496E7175 		.ascii	"Inquiry Version : %s\000"
 1790      69727920 
 1790      56657273 
 1790      696F6E20 
 1790      3A202573 
 1791 0051 000000   		.space	3
 1792              	.LC4:
 1793 0054 4D534320 		.ascii	"MSC Device ready\000"
 1793      44657669 
 1793      63652072 
 1793      65616479 
 1793      00
 1794 0065 000000   		.space	3
 1795              	.LC5:
 1796 0068 4D534320 		.ascii	"MSC Device NOT ready\000"
 1796      44657669 
 1796      6365204E 
 1796      4F542072 
 1796      65616479 
 1797 007d 000000   		.space	3
 1798              	.LC6:
 1799 0080 4D534320 		.ascii	"MSC Device capacity : %lu Bytes\000"
 1799      44657669 
 1799      63652063 
 1799      61706163 
 1799      69747920 
 1800              	.LC7:
 1801 00a0 426C6F63 		.ascii	"Block number : %lu\000"
 1801      6B206E75 
 1801      6D626572 
 1801      203A2025 
 1801      6C7500
ARM GAS  /var/folders/0d/93p3r6493yg7p0rvl_4r983m0000gn/T//cc7OQubD.s 			page 50


 1802 00b3 00       		.space	1
 1803              	.LC8:
 1804 00b4 426C6F63 		.ascii	"Block Size   : %lu\000"
 1804      6B205369 
 1804      7A652020 
 1804      203A2025 
 1804      6C7500
 1805 00c7 00       		.space	1
 1806              	.LC9:
 1807 00c8 53656E73 		.ascii	"Sense Key  : %x\000"
 1807      65204B65 
 1807      7920203A 
 1807      20257800 
 1808              	.LC10:
 1809 00d8 41646469 		.ascii	"Additional Sense Code : %x\000"
 1809      74696F6E 
 1809      616C2053 
 1809      656E7365 
 1809      20436F64 
 1810 00f3 00       		.space	1
 1811              	.LC11:
 1812 00f4 41646469 		.ascii	"Additional Sense Code Qualifier: %x\000"
 1812      74696F6E 
 1812      616C2053 
 1812      656E7365 
 1812      20436F64 
 1813              		.section	.rodata.str1.4,"aMS",%progbits,1
 1814              		.align	2
 1815              	.LC15:
 1816 0000 4D534300 		.ascii	"MSC\000"
 1817              		.text
 1818              	.Letext0:
 1819              		.file 2 "/usr/local/gcc_arm/gcc-arm-none-eabi-7-2017-q4-major/arm-none-eabi/include/machine/_defau
 1820              		.file 3 "/usr/local/gcc_arm/gcc-arm-none-eabi-7-2017-q4-major/arm-none-eabi/include/sys/lock.h"
 1821              		.file 4 "/usr/local/gcc_arm/gcc-arm-none-eabi-7-2017-q4-major/arm-none-eabi/include/sys/_types.h"
 1822              		.file 5 "/usr/local/gcc_arm/gcc-arm-none-eabi-7-2017-q4-major/lib/gcc/arm-none-eabi/7.2.1/include/
 1823              		.file 6 "/usr/local/gcc_arm/gcc-arm-none-eabi-7-2017-q4-major/arm-none-eabi/include/sys/reent.h"
 1824              		.file 7 "/usr/local/gcc_arm/gcc-arm-none-eabi-7-2017-q4-major/arm-none-eabi/include/sys/_stdint.h"
 1825              		.file 8 "/usr/local/gcc_arm/gcc-arm-none-eabi-7-2017-q4-major/arm-none-eabi/include/stdlib.h"
 1826              		.file 9 "Drivers/CMSIS/Include/core_cm4.h"
 1827              		.file 10 "Drivers/CMSIS/Device/ST/STM32F4xx/Include/system_stm32f4xx.h"
 1828              		.file 11 "Middlewares/Third_Party/FreeRTOS/Source/include/task.h"
 1829              		.file 12 "Middlewares/Third_Party/FreeRTOS/Source/include/queue.h"
 1830              		.file 13 "Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.h"
 1831              		.file 14 "Middlewares/ST/STM32_USB_Host_Library/Core/Inc/usbh_def.h"
 1832              		.file 15 "Middlewares/ST/STM32_USB_Host_Library/Core/Inc/usbh_ctlreq.h"
 1833              		.file 16 "Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Inc/usbh_msc_bot.h"
 1834              		.file 17 "Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Inc/usbh_msc_scsi.h"
 1835              		.file 18 "Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Inc/usbh_msc.h"
 1836              		.file 19 "/usr/local/gcc_arm/gcc-arm-none-eabi-7-2017-q4-major/arm-none-eabi/include/stdio.h"
 1837              		.file 20 "Middlewares/ST/STM32_USB_Host_Library/Core/Inc/usbh_pipes.h"
 1838              		.file 21 "Middlewares/ST/STM32_USB_Host_Library/Core/Inc/usbh_core.h"
 1839              		.file 22 "<built-in>"
ARM GAS  /var/folders/0d/93p3r6493yg7p0rvl_4r983m0000gn/T//cc7OQubD.s 			page 51


DEFINED SYMBOLS
                            *ABS*:0000000000000000 usbh_msc.c
/var/folders/0d/93p3r6493yg7p0rvl_4r983m0000gn/T//cc7OQubD.s:18     .text.USBH_MSC_SOFProcess:0000000000000000 $t
/var/folders/0d/93p3r6493yg7p0rvl_4r983m0000gn/T//cc7OQubD.s:24     .text.USBH_MSC_SOFProcess:0000000000000000 USBH_MSC_SOFProcess
/var/folders/0d/93p3r6493yg7p0rvl_4r983m0000gn/T//cc7OQubD.s:41     .text.USBH_MSC_Process:0000000000000000 $t
/var/folders/0d/93p3r6493yg7p0rvl_4r983m0000gn/T//cc7OQubD.s:47     .text.USBH_MSC_Process:0000000000000000 USBH_MSC_Process
/var/folders/0d/93p3r6493yg7p0rvl_4r983m0000gn/T//cc7OQubD.s:97     .text.USBH_MSC_Process:000000000000003e $d
/var/folders/0d/93p3r6493yg7p0rvl_4r983m0000gn/T//cc7OQubD.s:106    .text.USBH_MSC_Process:0000000000000050 $t
/var/folders/0d/93p3r6493yg7p0rvl_4r983m0000gn/T//cc7OQubD.s:580    .text.USBH_MSC_Process:00000000000003d4 $d
/var/folders/0d/93p3r6493yg7p0rvl_4r983m0000gn/T//cc7OQubD.s:595    .text.USBH_MSC_Process:0000000000000404 $t
/var/folders/0d/93p3r6493yg7p0rvl_4r983m0000gn/T//cc7OQubD.s:602    .text.USBH_MSC_ClassRequest:0000000000000000 $t
/var/folders/0d/93p3r6493yg7p0rvl_4r983m0000gn/T//cc7OQubD.s:608    .text.USBH_MSC_ClassRequest:0000000000000000 USBH_MSC_ClassRequest
/var/folders/0d/93p3r6493yg7p0rvl_4r983m0000gn/T//cc7OQubD.s:717    .text.USBH_MSC_ClassRequest:0000000000000078 $d
/var/folders/0d/93p3r6493yg7p0rvl_4r983m0000gn/T//cc7OQubD.s:722    .text.USBH_MSC_InterfaceDeInit:0000000000000000 $t
/var/folders/0d/93p3r6493yg7p0rvl_4r983m0000gn/T//cc7OQubD.s:728    .text.USBH_MSC_InterfaceDeInit:0000000000000000 USBH_MSC_InterfaceDeInit
/var/folders/0d/93p3r6493yg7p0rvl_4r983m0000gn/T//cc7OQubD.s:803    .text.USBH_MSC_InterfaceInit:0000000000000000 $t
/var/folders/0d/93p3r6493yg7p0rvl_4r983m0000gn/T//cc7OQubD.s:809    .text.USBH_MSC_InterfaceInit:0000000000000000 USBH_MSC_InterfaceInit
/var/folders/0d/93p3r6493yg7p0rvl_4r983m0000gn/T//cc7OQubD.s:1010   .text.USBH_MSC_InterfaceInit:0000000000000148 $d
/var/folders/0d/93p3r6493yg7p0rvl_4r983m0000gn/T//cc7OQubD.s:1016   .text.USBH_MSC_RdWrProcess:0000000000000000 $t
/var/folders/0d/93p3r6493yg7p0rvl_4r983m0000gn/T//cc7OQubD.s:1022   .text.USBH_MSC_RdWrProcess:0000000000000000 USBH_MSC_RdWrProcess
/var/folders/0d/93p3r6493yg7p0rvl_4r983m0000gn/T//cc7OQubD.s:1276   .text.USBH_MSC_RdWrProcess:000000000000016c $d
/var/folders/0d/93p3r6493yg7p0rvl_4r983m0000gn/T//cc7OQubD.s:1284   .text.USBH_MSC_IsReady:0000000000000000 $t
/var/folders/0d/93p3r6493yg7p0rvl_4r983m0000gn/T//cc7OQubD.s:1291   .text.USBH_MSC_IsReady:0000000000000000 USBH_MSC_IsReady
/var/folders/0d/93p3r6493yg7p0rvl_4r983m0000gn/T//cc7OQubD.s:1327   .text.USBH_MSC_GetMaxLUN:0000000000000000 $t
/var/folders/0d/93p3r6493yg7p0rvl_4r983m0000gn/T//cc7OQubD.s:1334   .text.USBH_MSC_GetMaxLUN:0000000000000000 USBH_MSC_GetMaxLUN
/var/folders/0d/93p3r6493yg7p0rvl_4r983m0000gn/T//cc7OQubD.s:1375   .text.USBH_MSC_UnitIsReady:0000000000000000 $t
/var/folders/0d/93p3r6493yg7p0rvl_4r983m0000gn/T//cc7OQubD.s:1382   .text.USBH_MSC_UnitIsReady:0000000000000000 USBH_MSC_UnitIsReady
/var/folders/0d/93p3r6493yg7p0rvl_4r983m0000gn/T//cc7OQubD.s:1419   .text.USBH_MSC_GetLUNInfo:0000000000000000 $t
/var/folders/0d/93p3r6493yg7p0rvl_4r983m0000gn/T//cc7OQubD.s:1426   .text.USBH_MSC_GetLUNInfo:0000000000000000 USBH_MSC_GetLUNInfo
/var/folders/0d/93p3r6493yg7p0rvl_4r983m0000gn/T//cc7OQubD.s:1493   .text.USBH_MSC_Read:0000000000000000 $t
/var/folders/0d/93p3r6493yg7p0rvl_4r983m0000gn/T//cc7OQubD.s:1500   .text.USBH_MSC_Read:0000000000000000 USBH_MSC_Read
/var/folders/0d/93p3r6493yg7p0rvl_4r983m0000gn/T//cc7OQubD.s:1623   .text.USBH_MSC_Write:0000000000000000 $t
/var/folders/0d/93p3r6493yg7p0rvl_4r983m0000gn/T//cc7OQubD.s:1630   .text.USBH_MSC_Write:0000000000000000 USBH_MSC_Write
/var/folders/0d/93p3r6493yg7p0rvl_4r983m0000gn/T//cc7OQubD.s:1757   .data.USBH_msc:0000000000000000 USBH_msc
/var/folders/0d/93p3r6493yg7p0rvl_4r983m0000gn/T//cc7OQubD.s:1754   .data.USBH_msc:0000000000000000 $d
/var/folders/0d/93p3r6493yg7p0rvl_4r983m0000gn/T//cc7OQubD.s:1768   .rodata.USBH_MSC_ClassRequest.str1.4:0000000000000000 $d
/var/folders/0d/93p3r6493yg7p0rvl_4r983m0000gn/T//cc7OQubD.s:1772   .rodata.USBH_MSC_InterfaceInit.str1.4:0000000000000000 $d
/var/folders/0d/93p3r6493yg7p0rvl_4r983m0000gn/T//cc7OQubD.s:1779   .rodata.USBH_MSC_Process.str1.4:0000000000000000 $d
/var/folders/0d/93p3r6493yg7p0rvl_4r983m0000gn/T//cc7OQubD.s:1814   .rodata.str1.4:0000000000000000 $d

UNDEFINED SYMBOLS
printf
putchar
USBH_MSC_SCSI_Inquiry
USBH_MSC_SCSI_TestUnitReady
USBH_MSC_SCSI_ReadCapacity
USBH_MSC_SCSI_RequestSense
osMessagePut
USBH_MSC_BOT_REQ_GetMaxLUN
USBH_ClrFeature
free
USBH_ClosePipe
USBH_FreePipe
USBH_FindInterface
USBH_SelectInterface
malloc
USBH_AllocPipe
ARM GAS  /var/folders/0d/93p3r6493yg7p0rvl_4r983m0000gn/T//cc7OQubD.s 			page 52


USBH_MSC_BOT_Init
memset
USBH_OpenPipe
USBH_LL_SetToggle
USBH_MSC_SCSI_Read
USBH_MSC_SCSI_Write
