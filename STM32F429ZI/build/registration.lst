ARM GAS  /var/folders/0d/93p3r6493yg7p0rvl_4r983m0000gn/T//ccQ77D09.s 			page 1


   1              		.cpu cortex-m4
   2              		.eabi_attribute 27, 1
   3              		.eabi_attribute 28, 1
   4              		.eabi_attribute 20, 1
   5              		.eabi_attribute 21, 1
   6              		.eabi_attribute 23, 3
   7              		.eabi_attribute 24, 1
   8              		.eabi_attribute 25, 1
   9              		.eabi_attribute 26, 1
  10              		.eabi_attribute 30, 1
  11              		.eabi_attribute 34, 1
  12              		.eabi_attribute 18, 4
  13              		.file	"registration.c"
  14              		.text
  15              	.Ltext0:
  16              		.cfi_sections	.debug_frame
  17              		.section	.text.prv_handleDeregistrationReply,"ax",%progbits
  18              		.align	1
  19              		.syntax unified
  20              		.thumb
  21              		.thumb_func
  22              		.fpu fpv4-sp-d16
  24              	prv_handleDeregistrationReply:
  25              	.LFB12:
  26              		.file 1 "Middlewares/Third_Party/wakaama/registration.c"
   1:Middlewares/Third_Party/wakaama/registration.c **** /*******************************************************************************
   2:Middlewares/Third_Party/wakaama/registration.c ****  *
   3:Middlewares/Third_Party/wakaama/registration.c ****  * Copyright (c) 2013, 2014 Intel Corporation and others.
   4:Middlewares/Third_Party/wakaama/registration.c ****  * All rights reserved. This program and the accompanying materials
   5:Middlewares/Third_Party/wakaama/registration.c ****  * are made available under the terms of the Eclipse Public License v1.0
   6:Middlewares/Third_Party/wakaama/registration.c ****  * and Eclipse Distribution License v1.0 which accompany this distribution.
   7:Middlewares/Third_Party/wakaama/registration.c ****  *
   8:Middlewares/Third_Party/wakaama/registration.c ****  * The Eclipse Public License is available at
   9:Middlewares/Third_Party/wakaama/registration.c ****  *    http://www.eclipse.org/legal/epl-v10.html
  10:Middlewares/Third_Party/wakaama/registration.c ****  * The Eclipse Distribution License is available at
  11:Middlewares/Third_Party/wakaama/registration.c ****  *    http://www.eclipse.org/org/documents/edl-v10.php.
  12:Middlewares/Third_Party/wakaama/registration.c ****  *
  13:Middlewares/Third_Party/wakaama/registration.c ****  * Contributors:
  14:Middlewares/Third_Party/wakaama/registration.c ****  *    David Navarro, Intel Corporation - initial API and implementation
  15:Middlewares/Third_Party/wakaama/registration.c ****  *    domedambrosio - Please refer to git log
  16:Middlewares/Third_Party/wakaama/registration.c ****  *    Fabien Fleutot - Please refer to git log
  17:Middlewares/Third_Party/wakaama/registration.c ****  *    Simon Bernard - Please refer to git log
  18:Middlewares/Third_Party/wakaama/registration.c ****  *    Toby Jaffey - Please refer to git log
  19:Middlewares/Third_Party/wakaama/registration.c ****  *    Manuel Sangoi - Please refer to git log
  20:Middlewares/Third_Party/wakaama/registration.c ****  *    Julien Vermillard - Please refer to git log
  21:Middlewares/Third_Party/wakaama/registration.c ****  *    Bosch Software Innovations GmbH - Please refer to git log
  22:Middlewares/Third_Party/wakaama/registration.c ****  *    Pascal Rieux - Please refer to git log
  23:Middlewares/Third_Party/wakaama/registration.c ****  *    Scott Bertin - Please refer to git log
  24:Middlewares/Third_Party/wakaama/registration.c ****  *
  25:Middlewares/Third_Party/wakaama/registration.c ****  *******************************************************************************/
  26:Middlewares/Third_Party/wakaama/registration.c **** 
  27:Middlewares/Third_Party/wakaama/registration.c **** /*
  28:Middlewares/Third_Party/wakaama/registration.c ****  Copyright (c) 2013, 2014 Intel Corporation
  29:Middlewares/Third_Party/wakaama/registration.c **** 
  30:Middlewares/Third_Party/wakaama/registration.c ****  Redistribution and use in source and binary forms, with or without modification,
  31:Middlewares/Third_Party/wakaama/registration.c ****  are permitted provided that the following conditions are met:
  32:Middlewares/Third_Party/wakaama/registration.c **** 
ARM GAS  /var/folders/0d/93p3r6493yg7p0rvl_4r983m0000gn/T//ccQ77D09.s 			page 2


  33:Middlewares/Third_Party/wakaama/registration.c ****      * Redistributions of source code must retain the above copyright notice,
  34:Middlewares/Third_Party/wakaama/registration.c ****        this list of conditions and the following disclaimer.
  35:Middlewares/Third_Party/wakaama/registration.c ****      * Redistributions in binary form must reproduce the above copyright notice,
  36:Middlewares/Third_Party/wakaama/registration.c ****        this list of conditions and the following disclaimer in the documentation
  37:Middlewares/Third_Party/wakaama/registration.c ****        and/or other materials provided with the distribution.
  38:Middlewares/Third_Party/wakaama/registration.c ****      * Neither the name of Intel Corporation nor the names of its contributors
  39:Middlewares/Third_Party/wakaama/registration.c ****        may be used to endorse or promote products derived from this software
  40:Middlewares/Third_Party/wakaama/registration.c ****        without specific prior written permission.
  41:Middlewares/Third_Party/wakaama/registration.c **** 
  42:Middlewares/Third_Party/wakaama/registration.c ****  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND
  43:Middlewares/Third_Party/wakaama/registration.c ****  ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
  44:Middlewares/Third_Party/wakaama/registration.c ****  WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED.
  45:Middlewares/Third_Party/wakaama/registration.c ****  IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT,
  46:Middlewares/Third_Party/wakaama/registration.c ****  INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING,
  47:Middlewares/Third_Party/wakaama/registration.c ****  BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
  48:Middlewares/Third_Party/wakaama/registration.c ****  DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  49:Middlewares/Third_Party/wakaama/registration.c ****  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR
  50:Middlewares/Third_Party/wakaama/registration.c ****  OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF
  51:Middlewares/Third_Party/wakaama/registration.c ****  THE POSSIBILITY OF SUCH DAMAGE.
  52:Middlewares/Third_Party/wakaama/registration.c **** 
  53:Middlewares/Third_Party/wakaama/registration.c ****  David Navarro <david.navarro@intel.com>
  54:Middlewares/Third_Party/wakaama/registration.c **** 
  55:Middlewares/Third_Party/wakaama/registration.c **** */
  56:Middlewares/Third_Party/wakaama/registration.c **** 
  57:Middlewares/Third_Party/wakaama/registration.c **** #include "internals.h"
  58:Middlewares/Third_Party/wakaama/registration.c **** 
  59:Middlewares/Third_Party/wakaama/registration.c **** #include <stdlib.h>
  60:Middlewares/Third_Party/wakaama/registration.c **** #include <string.h>
  61:Middlewares/Third_Party/wakaama/registration.c **** #include <stdio.h>
  62:Middlewares/Third_Party/wakaama/registration.c **** 
  63:Middlewares/Third_Party/wakaama/registration.c **** #define MAX_LOCATION_LENGTH 10      // strlen("/rd/65534") + 1
  64:Middlewares/Third_Party/wakaama/registration.c **** 
  65:Middlewares/Third_Party/wakaama/registration.c **** #ifdef LWM2M_CLIENT_MODE
  66:Middlewares/Third_Party/wakaama/registration.c **** 
  67:Middlewares/Third_Party/wakaama/registration.c **** static int prv_getRegistrationQueryLength(lwm2m_context_t * contextP,
  68:Middlewares/Third_Party/wakaama/registration.c ****                                           lwm2m_server_t * server)
  69:Middlewares/Third_Party/wakaama/registration.c **** {
  70:Middlewares/Third_Party/wakaama/registration.c ****     int index;
  71:Middlewares/Third_Party/wakaama/registration.c ****     int res;
  72:Middlewares/Third_Party/wakaama/registration.c ****     char buffer[21];
  73:Middlewares/Third_Party/wakaama/registration.c **** 
  74:Middlewares/Third_Party/wakaama/registration.c ****     index = strlen(QUERY_STARTER QUERY_VERSION_FULL QUERY_DELIMITER QUERY_NAME);
  75:Middlewares/Third_Party/wakaama/registration.c ****     index += strlen(contextP->endpointName);
  76:Middlewares/Third_Party/wakaama/registration.c **** 
  77:Middlewares/Third_Party/wakaama/registration.c ****     if (NULL != contextP->msisdn)
  78:Middlewares/Third_Party/wakaama/registration.c ****     {
  79:Middlewares/Third_Party/wakaama/registration.c ****         index += strlen(QUERY_DELIMITER QUERY_SMS);
  80:Middlewares/Third_Party/wakaama/registration.c ****         index += strlen(contextP->msisdn);
  81:Middlewares/Third_Party/wakaama/registration.c ****     }
  82:Middlewares/Third_Party/wakaama/registration.c **** 
  83:Middlewares/Third_Party/wakaama/registration.c ****     switch (server->binding)
  84:Middlewares/Third_Party/wakaama/registration.c ****     {
  85:Middlewares/Third_Party/wakaama/registration.c ****     case BINDING_U:
  86:Middlewares/Third_Party/wakaama/registration.c ****         index += strlen("&b=U");
  87:Middlewares/Third_Party/wakaama/registration.c ****         break;
  88:Middlewares/Third_Party/wakaama/registration.c ****     case BINDING_UQ:
  89:Middlewares/Third_Party/wakaama/registration.c ****         index += strlen("&b=UQ");
ARM GAS  /var/folders/0d/93p3r6493yg7p0rvl_4r983m0000gn/T//ccQ77D09.s 			page 3


  90:Middlewares/Third_Party/wakaama/registration.c ****         break;
  91:Middlewares/Third_Party/wakaama/registration.c ****     case BINDING_S:
  92:Middlewares/Third_Party/wakaama/registration.c ****         index += strlen("&b=S");
  93:Middlewares/Third_Party/wakaama/registration.c ****         break;
  94:Middlewares/Third_Party/wakaama/registration.c ****     case BINDING_SQ:
  95:Middlewares/Third_Party/wakaama/registration.c ****         index += strlen("&b=SQ");
  96:Middlewares/Third_Party/wakaama/registration.c ****         break;
  97:Middlewares/Third_Party/wakaama/registration.c ****     case BINDING_US:
  98:Middlewares/Third_Party/wakaama/registration.c ****         index += strlen("&b=US");
  99:Middlewares/Third_Party/wakaama/registration.c ****         break;
 100:Middlewares/Third_Party/wakaama/registration.c ****     case BINDING_UQS:
 101:Middlewares/Third_Party/wakaama/registration.c ****         index += strlen("&b=UQS");
 102:Middlewares/Third_Party/wakaama/registration.c ****         break;
 103:Middlewares/Third_Party/wakaama/registration.c ****     default:
 104:Middlewares/Third_Party/wakaama/registration.c ****         return 0;
 105:Middlewares/Third_Party/wakaama/registration.c ****     }
 106:Middlewares/Third_Party/wakaama/registration.c **** 
 107:Middlewares/Third_Party/wakaama/registration.c ****     if (0 != server->lifetime)
 108:Middlewares/Third_Party/wakaama/registration.c ****     {
 109:Middlewares/Third_Party/wakaama/registration.c ****         index += strlen(QUERY_DELIMITER QUERY_LIFETIME);
 110:Middlewares/Third_Party/wakaama/registration.c ****         res = utils_intToText(server->lifetime, buffer, sizeof(buffer));
 111:Middlewares/Third_Party/wakaama/registration.c ****         if (res == 0) return 0;
 112:Middlewares/Third_Party/wakaama/registration.c ****         index += res;
 113:Middlewares/Third_Party/wakaama/registration.c ****     }
 114:Middlewares/Third_Party/wakaama/registration.c **** 
 115:Middlewares/Third_Party/wakaama/registration.c ****     return index + 1;
 116:Middlewares/Third_Party/wakaama/registration.c **** }
 117:Middlewares/Third_Party/wakaama/registration.c **** 
 118:Middlewares/Third_Party/wakaama/registration.c **** static int prv_getRegistrationQuery(lwm2m_context_t * contextP,
 119:Middlewares/Third_Party/wakaama/registration.c ****                                     lwm2m_server_t * server,
 120:Middlewares/Third_Party/wakaama/registration.c ****                                     char * buffer,
 121:Middlewares/Third_Party/wakaama/registration.c ****                                     size_t length)
 122:Middlewares/Third_Party/wakaama/registration.c **** {
 123:Middlewares/Third_Party/wakaama/registration.c ****     int index;
 124:Middlewares/Third_Party/wakaama/registration.c ****     int res;
 125:Middlewares/Third_Party/wakaama/registration.c **** 
 126:Middlewares/Third_Party/wakaama/registration.c ****     index = utils_stringCopy(buffer, length, QUERY_STARTER QUERY_VERSION_FULL QUERY_DELIMITER QUERY
 127:Middlewares/Third_Party/wakaama/registration.c ****     if (index < 0) return 0;
 128:Middlewares/Third_Party/wakaama/registration.c ****     res = utils_stringCopy(buffer + index, length - index, contextP->endpointName);
 129:Middlewares/Third_Party/wakaama/registration.c ****     if (res < 0) return 0;
 130:Middlewares/Third_Party/wakaama/registration.c ****     index += res;
 131:Middlewares/Third_Party/wakaama/registration.c **** 
 132:Middlewares/Third_Party/wakaama/registration.c ****     if (NULL != contextP->msisdn)
 133:Middlewares/Third_Party/wakaama/registration.c ****     {
 134:Middlewares/Third_Party/wakaama/registration.c ****         res = utils_stringCopy(buffer + index, length - index, QUERY_DELIMITER QUERY_SMS);
 135:Middlewares/Third_Party/wakaama/registration.c ****         if (res < 0) return 0;
 136:Middlewares/Third_Party/wakaama/registration.c ****         index += res;
 137:Middlewares/Third_Party/wakaama/registration.c ****         res = utils_stringCopy(buffer + index, length - index, contextP->msisdn);
 138:Middlewares/Third_Party/wakaama/registration.c ****         if (res < 0) return 0;
 139:Middlewares/Third_Party/wakaama/registration.c ****         index += res;
 140:Middlewares/Third_Party/wakaama/registration.c ****     }
 141:Middlewares/Third_Party/wakaama/registration.c **** 
 142:Middlewares/Third_Party/wakaama/registration.c ****     switch (server->binding)
 143:Middlewares/Third_Party/wakaama/registration.c ****     {
 144:Middlewares/Third_Party/wakaama/registration.c ****     case BINDING_U:
 145:Middlewares/Third_Party/wakaama/registration.c ****         res = utils_stringCopy(buffer + index, length - index, "&b=U");
 146:Middlewares/Third_Party/wakaama/registration.c ****         break;
ARM GAS  /var/folders/0d/93p3r6493yg7p0rvl_4r983m0000gn/T//ccQ77D09.s 			page 4


 147:Middlewares/Third_Party/wakaama/registration.c ****     case BINDING_UQ:
 148:Middlewares/Third_Party/wakaama/registration.c ****         res = utils_stringCopy(buffer + index, length - index, "&b=UQ");
 149:Middlewares/Third_Party/wakaama/registration.c ****         break;
 150:Middlewares/Third_Party/wakaama/registration.c ****     case BINDING_S:
 151:Middlewares/Third_Party/wakaama/registration.c ****         res = utils_stringCopy(buffer + index, length - index, "&b=S");
 152:Middlewares/Third_Party/wakaama/registration.c ****         break;
 153:Middlewares/Third_Party/wakaama/registration.c ****     case BINDING_SQ:
 154:Middlewares/Third_Party/wakaama/registration.c ****         res = utils_stringCopy(buffer + index, length - index, "&b=SQ");
 155:Middlewares/Third_Party/wakaama/registration.c ****         break;
 156:Middlewares/Third_Party/wakaama/registration.c ****     case BINDING_US:
 157:Middlewares/Third_Party/wakaama/registration.c ****         res = utils_stringCopy(buffer + index, length - index, "&b=US");
 158:Middlewares/Third_Party/wakaama/registration.c ****         break;
 159:Middlewares/Third_Party/wakaama/registration.c ****     case BINDING_UQS:
 160:Middlewares/Third_Party/wakaama/registration.c ****         res = utils_stringCopy(buffer + index, length - index, "&b=UQS");
 161:Middlewares/Third_Party/wakaama/registration.c ****         break;
 162:Middlewares/Third_Party/wakaama/registration.c ****     default:
 163:Middlewares/Third_Party/wakaama/registration.c ****         res = -1;
 164:Middlewares/Third_Party/wakaama/registration.c ****     }
 165:Middlewares/Third_Party/wakaama/registration.c ****     if (res < 0) return 0;
 166:Middlewares/Third_Party/wakaama/registration.c ****     index += res;
 167:Middlewares/Third_Party/wakaama/registration.c **** 
 168:Middlewares/Third_Party/wakaama/registration.c ****     if (0 != server->lifetime)
 169:Middlewares/Third_Party/wakaama/registration.c ****     {
 170:Middlewares/Third_Party/wakaama/registration.c ****         res = utils_stringCopy(buffer + index, length - index, QUERY_DELIMITER QUERY_LIFETIME);
 171:Middlewares/Third_Party/wakaama/registration.c ****         if (res < 0) return 0;
 172:Middlewares/Third_Party/wakaama/registration.c ****         index += res;
 173:Middlewares/Third_Party/wakaama/registration.c ****         res = utils_intToText(server->lifetime, buffer + index, length - index);
 174:Middlewares/Third_Party/wakaama/registration.c ****         if (res == 0) return 0;
 175:Middlewares/Third_Party/wakaama/registration.c ****         index += res;
 176:Middlewares/Third_Party/wakaama/registration.c ****     }
 177:Middlewares/Third_Party/wakaama/registration.c **** 
 178:Middlewares/Third_Party/wakaama/registration.c ****     if(index < (int)length)
 179:Middlewares/Third_Party/wakaama/registration.c ****     {
 180:Middlewares/Third_Party/wakaama/registration.c ****         buffer[index++] = '\0';
 181:Middlewares/Third_Party/wakaama/registration.c ****     }
 182:Middlewares/Third_Party/wakaama/registration.c ****     else
 183:Middlewares/Third_Party/wakaama/registration.c ****     {
 184:Middlewares/Third_Party/wakaama/registration.c ****         return 0;
 185:Middlewares/Third_Party/wakaama/registration.c ****     }
 186:Middlewares/Third_Party/wakaama/registration.c **** 
 187:Middlewares/Third_Party/wakaama/registration.c ****     return index;
 188:Middlewares/Third_Party/wakaama/registration.c **** }
 189:Middlewares/Third_Party/wakaama/registration.c **** 
 190:Middlewares/Third_Party/wakaama/registration.c **** static void prv_handleRegistrationReply(lwm2m_transaction_t * transacP,
 191:Middlewares/Third_Party/wakaama/registration.c ****                                         void * message)
 192:Middlewares/Third_Party/wakaama/registration.c **** {
 193:Middlewares/Third_Party/wakaama/registration.c ****     coap_packet_t * packet = (coap_packet_t *)message;
 194:Middlewares/Third_Party/wakaama/registration.c ****     lwm2m_server_t * targetP = (lwm2m_server_t *)(transacP->userData);
 195:Middlewares/Third_Party/wakaama/registration.c **** 
 196:Middlewares/Third_Party/wakaama/registration.c ****     if (targetP->status == STATE_REG_PENDING)
 197:Middlewares/Third_Party/wakaama/registration.c ****     {
 198:Middlewares/Third_Party/wakaama/registration.c ****         time_t tv_sec = lwm2m_gettime();
 199:Middlewares/Third_Party/wakaama/registration.c ****         if (tv_sec >= 0)
 200:Middlewares/Third_Party/wakaama/registration.c ****         {
 201:Middlewares/Third_Party/wakaama/registration.c ****             targetP->registration = tv_sec;
 202:Middlewares/Third_Party/wakaama/registration.c ****         }
 203:Middlewares/Third_Party/wakaama/registration.c ****         if (packet != NULL && packet->code == COAP_201_CREATED)
ARM GAS  /var/folders/0d/93p3r6493yg7p0rvl_4r983m0000gn/T//ccQ77D09.s 			page 5


 204:Middlewares/Third_Party/wakaama/registration.c ****         {
 205:Middlewares/Third_Party/wakaama/registration.c ****             targetP->status = STATE_REGISTERED;
 206:Middlewares/Third_Party/wakaama/registration.c ****             if (NULL != targetP->location)
 207:Middlewares/Third_Party/wakaama/registration.c ****             {
 208:Middlewares/Third_Party/wakaama/registration.c ****                 lwm2m_free(targetP->location);
 209:Middlewares/Third_Party/wakaama/registration.c ****             }
 210:Middlewares/Third_Party/wakaama/registration.c ****             targetP->location = coap_get_multi_option_as_string(packet->location_path);
 211:Middlewares/Third_Party/wakaama/registration.c **** 
 212:Middlewares/Third_Party/wakaama/registration.c ****             LOG("Registration successful");
 213:Middlewares/Third_Party/wakaama/registration.c ****         }
 214:Middlewares/Third_Party/wakaama/registration.c ****         else
 215:Middlewares/Third_Party/wakaama/registration.c ****         {
 216:Middlewares/Third_Party/wakaama/registration.c ****             targetP->status = STATE_REG_FAILED;
 217:Middlewares/Third_Party/wakaama/registration.c ****             LOG("Registration failed");
 218:Middlewares/Third_Party/wakaama/registration.c ****         }
 219:Middlewares/Third_Party/wakaama/registration.c ****     }
 220:Middlewares/Third_Party/wakaama/registration.c **** }
 221:Middlewares/Third_Party/wakaama/registration.c **** 
 222:Middlewares/Third_Party/wakaama/registration.c **** // send the registration for a single server
 223:Middlewares/Third_Party/wakaama/registration.c **** static uint8_t prv_register(lwm2m_context_t * contextP,
 224:Middlewares/Third_Party/wakaama/registration.c ****                             lwm2m_server_t * server)
 225:Middlewares/Third_Party/wakaama/registration.c **** {
 226:Middlewares/Third_Party/wakaama/registration.c ****     char * query;
 227:Middlewares/Third_Party/wakaama/registration.c ****     int query_length;
 228:Middlewares/Third_Party/wakaama/registration.c ****     uint8_t * payload;
 229:Middlewares/Third_Party/wakaama/registration.c ****     int payload_length;
 230:Middlewares/Third_Party/wakaama/registration.c ****     lwm2m_transaction_t * transaction;
 231:Middlewares/Third_Party/wakaama/registration.c **** 
 232:Middlewares/Third_Party/wakaama/registration.c ****     payload_length = object_getRegisterPayloadBufferLength(contextP);
 233:Middlewares/Third_Party/wakaama/registration.c ****     if(payload_length == 0) return COAP_500_INTERNAL_SERVER_ERROR;
 234:Middlewares/Third_Party/wakaama/registration.c ****     payload = lwm2m_malloc(payload_length);
 235:Middlewares/Third_Party/wakaama/registration.c ****     if(!payload) return COAP_500_INTERNAL_SERVER_ERROR;
 236:Middlewares/Third_Party/wakaama/registration.c ****     payload_length = object_getRegisterPayload(contextP, payload, payload_length);
 237:Middlewares/Third_Party/wakaama/registration.c ****     if(payload_length == 0)
 238:Middlewares/Third_Party/wakaama/registration.c ****     {
 239:Middlewares/Third_Party/wakaama/registration.c ****         lwm2m_free(payload);
 240:Middlewares/Third_Party/wakaama/registration.c ****         return COAP_500_INTERNAL_SERVER_ERROR;
 241:Middlewares/Third_Party/wakaama/registration.c ****     }
 242:Middlewares/Third_Party/wakaama/registration.c **** 
 243:Middlewares/Third_Party/wakaama/registration.c ****     query_length = prv_getRegistrationQueryLength(contextP, server);
 244:Middlewares/Third_Party/wakaama/registration.c ****     if(query_length == 0)
 245:Middlewares/Third_Party/wakaama/registration.c ****     {
 246:Middlewares/Third_Party/wakaama/registration.c ****         lwm2m_free(payload);
 247:Middlewares/Third_Party/wakaama/registration.c ****         return COAP_500_INTERNAL_SERVER_ERROR;
 248:Middlewares/Third_Party/wakaama/registration.c ****     }
 249:Middlewares/Third_Party/wakaama/registration.c ****     query = lwm2m_malloc(query_length);
 250:Middlewares/Third_Party/wakaama/registration.c ****     if(!query)
 251:Middlewares/Third_Party/wakaama/registration.c ****     {
 252:Middlewares/Third_Party/wakaama/registration.c ****         lwm2m_free(payload);
 253:Middlewares/Third_Party/wakaama/registration.c ****         return COAP_500_INTERNAL_SERVER_ERROR;
 254:Middlewares/Third_Party/wakaama/registration.c ****     }
 255:Middlewares/Third_Party/wakaama/registration.c ****     if(prv_getRegistrationQuery(contextP, server, query, query_length) != query_length)
 256:Middlewares/Third_Party/wakaama/registration.c ****     {
 257:Middlewares/Third_Party/wakaama/registration.c ****         lwm2m_free(payload);
 258:Middlewares/Third_Party/wakaama/registration.c ****         lwm2m_free(query);
 259:Middlewares/Third_Party/wakaama/registration.c ****         return COAP_500_INTERNAL_SERVER_ERROR;
 260:Middlewares/Third_Party/wakaama/registration.c ****     }
ARM GAS  /var/folders/0d/93p3r6493yg7p0rvl_4r983m0000gn/T//ccQ77D09.s 			page 6


 261:Middlewares/Third_Party/wakaama/registration.c **** 
 262:Middlewares/Third_Party/wakaama/registration.c ****     if (server->sessionH == NULL)
 263:Middlewares/Third_Party/wakaama/registration.c ****     {
 264:Middlewares/Third_Party/wakaama/registration.c ****         server->sessionH = lwm2m_connect_server(server->secObjInstID, contextP->userData);
 265:Middlewares/Third_Party/wakaama/registration.c ****     }
 266:Middlewares/Third_Party/wakaama/registration.c **** 
 267:Middlewares/Third_Party/wakaama/registration.c ****     if (NULL == server->sessionH)
 268:Middlewares/Third_Party/wakaama/registration.c ****     {
 269:Middlewares/Third_Party/wakaama/registration.c ****         lwm2m_free(payload);
 270:Middlewares/Third_Party/wakaama/registration.c ****         lwm2m_free(query);
 271:Middlewares/Third_Party/wakaama/registration.c ****         return COAP_503_SERVICE_UNAVAILABLE;
 272:Middlewares/Third_Party/wakaama/registration.c ****     }
 273:Middlewares/Third_Party/wakaama/registration.c **** 
 274:Middlewares/Third_Party/wakaama/registration.c ****     transaction = transaction_new(server->sessionH, COAP_POST, NULL, NULL, contextP->nextMID++, 4, 
 275:Middlewares/Third_Party/wakaama/registration.c ****     if (transaction == NULL)
 276:Middlewares/Third_Party/wakaama/registration.c ****     {
 277:Middlewares/Third_Party/wakaama/registration.c ****         lwm2m_free(payload);
 278:Middlewares/Third_Party/wakaama/registration.c ****         lwm2m_free(query);
 279:Middlewares/Third_Party/wakaama/registration.c ****         return COAP_503_SERVICE_UNAVAILABLE;
 280:Middlewares/Third_Party/wakaama/registration.c ****     }
 281:Middlewares/Third_Party/wakaama/registration.c **** 
 282:Middlewares/Third_Party/wakaama/registration.c ****     coap_set_header_uri_path(transaction->message, "/"URI_REGISTRATION_SEGMENT);
 283:Middlewares/Third_Party/wakaama/registration.c ****     coap_set_header_uri_query(transaction->message, query);
 284:Middlewares/Third_Party/wakaama/registration.c ****     coap_set_header_content_type(transaction->message, LWM2M_CONTENT_LINK);
 285:Middlewares/Third_Party/wakaama/registration.c ****     coap_set_payload(transaction->message, payload, payload_length);
 286:Middlewares/Third_Party/wakaama/registration.c **** 
 287:Middlewares/Third_Party/wakaama/registration.c ****     transaction->callback = prv_handleRegistrationReply;
 288:Middlewares/Third_Party/wakaama/registration.c ****     transaction->userData = (void *) server;
 289:Middlewares/Third_Party/wakaama/registration.c **** 
 290:Middlewares/Third_Party/wakaama/registration.c ****     contextP->transactionList = (lwm2m_transaction_t *)LWM2M_LIST_ADD(contextP->transactionList, tr
 291:Middlewares/Third_Party/wakaama/registration.c ****     if (transaction_send(contextP, transaction) != 0)
 292:Middlewares/Third_Party/wakaama/registration.c ****     {
 293:Middlewares/Third_Party/wakaama/registration.c ****         lwm2m_free(payload);
 294:Middlewares/Third_Party/wakaama/registration.c ****         lwm2m_free(query);
 295:Middlewares/Third_Party/wakaama/registration.c ****         return COAP_503_SERVICE_UNAVAILABLE;
 296:Middlewares/Third_Party/wakaama/registration.c ****     }
 297:Middlewares/Third_Party/wakaama/registration.c **** 
 298:Middlewares/Third_Party/wakaama/registration.c ****     lwm2m_free(payload);
 299:Middlewares/Third_Party/wakaama/registration.c ****     lwm2m_free(query);
 300:Middlewares/Third_Party/wakaama/registration.c ****     server->status = STATE_REG_PENDING;
 301:Middlewares/Third_Party/wakaama/registration.c **** 
 302:Middlewares/Third_Party/wakaama/registration.c ****     return COAP_NO_ERROR;
 303:Middlewares/Third_Party/wakaama/registration.c **** }
 304:Middlewares/Third_Party/wakaama/registration.c **** 
 305:Middlewares/Third_Party/wakaama/registration.c **** static void prv_handleRegistrationUpdateReply(lwm2m_transaction_t * transacP,
 306:Middlewares/Third_Party/wakaama/registration.c ****                                               void * message)
 307:Middlewares/Third_Party/wakaama/registration.c **** {
 308:Middlewares/Third_Party/wakaama/registration.c ****     coap_packet_t * packet = (coap_packet_t *)message;
 309:Middlewares/Third_Party/wakaama/registration.c ****     lwm2m_server_t * targetP = (lwm2m_server_t *)(transacP->userData);
 310:Middlewares/Third_Party/wakaama/registration.c **** 
 311:Middlewares/Third_Party/wakaama/registration.c ****     if (targetP->status == STATE_REG_UPDATE_PENDING)
 312:Middlewares/Third_Party/wakaama/registration.c ****     {
 313:Middlewares/Third_Party/wakaama/registration.c ****         time_t tv_sec = lwm2m_gettime();
 314:Middlewares/Third_Party/wakaama/registration.c ****         if (tv_sec >= 0)
 315:Middlewares/Third_Party/wakaama/registration.c ****         {
 316:Middlewares/Third_Party/wakaama/registration.c ****             targetP->registration = tv_sec;
 317:Middlewares/Third_Party/wakaama/registration.c ****         }
ARM GAS  /var/folders/0d/93p3r6493yg7p0rvl_4r983m0000gn/T//ccQ77D09.s 			page 7


 318:Middlewares/Third_Party/wakaama/registration.c ****         if (packet != NULL && packet->code == COAP_204_CHANGED)
 319:Middlewares/Third_Party/wakaama/registration.c ****         {
 320:Middlewares/Third_Party/wakaama/registration.c ****             targetP->status = STATE_REGISTERED;
 321:Middlewares/Third_Party/wakaama/registration.c ****             LOG("Registration update successful");
 322:Middlewares/Third_Party/wakaama/registration.c ****         }
 323:Middlewares/Third_Party/wakaama/registration.c ****         else
 324:Middlewares/Third_Party/wakaama/registration.c ****         {
 325:Middlewares/Third_Party/wakaama/registration.c ****             targetP->status = STATE_REG_FAILED;
 326:Middlewares/Third_Party/wakaama/registration.c ****             LOG("Registration update failed");
 327:Middlewares/Third_Party/wakaama/registration.c ****         }
 328:Middlewares/Third_Party/wakaama/registration.c ****     }
 329:Middlewares/Third_Party/wakaama/registration.c **** }
 330:Middlewares/Third_Party/wakaama/registration.c **** 
 331:Middlewares/Third_Party/wakaama/registration.c **** static int prv_updateRegistration(lwm2m_context_t * contextP,
 332:Middlewares/Third_Party/wakaama/registration.c ****                                   lwm2m_server_t * server,
 333:Middlewares/Third_Party/wakaama/registration.c ****                                   bool withObjects)
 334:Middlewares/Third_Party/wakaama/registration.c **** {
 335:Middlewares/Third_Party/wakaama/registration.c ****     lwm2m_transaction_t * transaction;
 336:Middlewares/Third_Party/wakaama/registration.c ****     uint8_t * payload = NULL;
 337:Middlewares/Third_Party/wakaama/registration.c ****     int payload_length;
 338:Middlewares/Third_Party/wakaama/registration.c **** 
 339:Middlewares/Third_Party/wakaama/registration.c ****     transaction = transaction_new(server->sessionH, COAP_POST, NULL, NULL, contextP->nextMID++, 4, 
 340:Middlewares/Third_Party/wakaama/registration.c ****     if (transaction == NULL) return COAP_500_INTERNAL_SERVER_ERROR;
 341:Middlewares/Third_Party/wakaama/registration.c **** 
 342:Middlewares/Third_Party/wakaama/registration.c ****     coap_set_header_uri_path(transaction->message, server->location);
 343:Middlewares/Third_Party/wakaama/registration.c **** 
 344:Middlewares/Third_Party/wakaama/registration.c ****     if (withObjects == true)
 345:Middlewares/Third_Party/wakaama/registration.c ****     {
 346:Middlewares/Third_Party/wakaama/registration.c ****         payload_length = object_getRegisterPayloadBufferLength(contextP);
 347:Middlewares/Third_Party/wakaama/registration.c ****         if(payload_length == 0)
 348:Middlewares/Third_Party/wakaama/registration.c ****         {
 349:Middlewares/Third_Party/wakaama/registration.c ****             transaction_free(transaction);
 350:Middlewares/Third_Party/wakaama/registration.c ****             return COAP_500_INTERNAL_SERVER_ERROR;
 351:Middlewares/Third_Party/wakaama/registration.c ****         }
 352:Middlewares/Third_Party/wakaama/registration.c **** 
 353:Middlewares/Third_Party/wakaama/registration.c ****         payload = lwm2m_malloc(payload_length);
 354:Middlewares/Third_Party/wakaama/registration.c ****         if(!payload)
 355:Middlewares/Third_Party/wakaama/registration.c ****         {
 356:Middlewares/Third_Party/wakaama/registration.c ****             transaction_free(transaction);
 357:Middlewares/Third_Party/wakaama/registration.c ****             return COAP_500_INTERNAL_SERVER_ERROR;
 358:Middlewares/Third_Party/wakaama/registration.c ****         }
 359:Middlewares/Third_Party/wakaama/registration.c **** 
 360:Middlewares/Third_Party/wakaama/registration.c ****         payload_length = object_getRegisterPayload(contextP, payload, payload_length);
 361:Middlewares/Third_Party/wakaama/registration.c ****         if(payload_length == 0)
 362:Middlewares/Third_Party/wakaama/registration.c ****         {
 363:Middlewares/Third_Party/wakaama/registration.c ****             transaction_free(transaction);
 364:Middlewares/Third_Party/wakaama/registration.c ****             lwm2m_free(payload);
 365:Middlewares/Third_Party/wakaama/registration.c ****             return COAP_500_INTERNAL_SERVER_ERROR;
 366:Middlewares/Third_Party/wakaama/registration.c ****         }
 367:Middlewares/Third_Party/wakaama/registration.c ****         coap_set_payload(transaction->message, payload, payload_length);
 368:Middlewares/Third_Party/wakaama/registration.c ****     }
 369:Middlewares/Third_Party/wakaama/registration.c **** 
 370:Middlewares/Third_Party/wakaama/registration.c ****     transaction->callback = prv_handleRegistrationUpdateReply;
 371:Middlewares/Third_Party/wakaama/registration.c ****     transaction->userData = (void *) server;
 372:Middlewares/Third_Party/wakaama/registration.c **** 
 373:Middlewares/Third_Party/wakaama/registration.c ****     contextP->transactionList = (lwm2m_transaction_t *)LWM2M_LIST_ADD(contextP->transactionList, tr
 374:Middlewares/Third_Party/wakaama/registration.c **** 
ARM GAS  /var/folders/0d/93p3r6493yg7p0rvl_4r983m0000gn/T//ccQ77D09.s 			page 8


 375:Middlewares/Third_Party/wakaama/registration.c ****     if (transaction_send(contextP, transaction) == 0)
 376:Middlewares/Third_Party/wakaama/registration.c ****     {
 377:Middlewares/Third_Party/wakaama/registration.c ****         server->status = STATE_REG_UPDATE_PENDING;
 378:Middlewares/Third_Party/wakaama/registration.c ****     }
 379:Middlewares/Third_Party/wakaama/registration.c **** 
 380:Middlewares/Third_Party/wakaama/registration.c ****     if (withObjects == true)
 381:Middlewares/Third_Party/wakaama/registration.c ****     {
 382:Middlewares/Third_Party/wakaama/registration.c ****         lwm2m_free(payload);
 383:Middlewares/Third_Party/wakaama/registration.c ****     }
 384:Middlewares/Third_Party/wakaama/registration.c ****     return COAP_NO_ERROR;
 385:Middlewares/Third_Party/wakaama/registration.c **** }
 386:Middlewares/Third_Party/wakaama/registration.c **** 
 387:Middlewares/Third_Party/wakaama/registration.c **** // update the registration of a given server
 388:Middlewares/Third_Party/wakaama/registration.c **** int lwm2m_update_registration(lwm2m_context_t * contextP,
 389:Middlewares/Third_Party/wakaama/registration.c ****                               uint16_t shortServerID,
 390:Middlewares/Third_Party/wakaama/registration.c ****                               bool withObjects)
 391:Middlewares/Third_Party/wakaama/registration.c **** {
 392:Middlewares/Third_Party/wakaama/registration.c ****     lwm2m_server_t * targetP;
 393:Middlewares/Third_Party/wakaama/registration.c ****     uint8_t result;
 394:Middlewares/Third_Party/wakaama/registration.c **** 
 395:Middlewares/Third_Party/wakaama/registration.c ****     LOG_ARG("State: %s, shortServerID: %d", STR_STATE(contextP->state), shortServerID);
 396:Middlewares/Third_Party/wakaama/registration.c **** 
 397:Middlewares/Third_Party/wakaama/registration.c ****     result = COAP_NO_ERROR;
 398:Middlewares/Third_Party/wakaama/registration.c **** 
 399:Middlewares/Third_Party/wakaama/registration.c ****     targetP = contextP->serverList;
 400:Middlewares/Third_Party/wakaama/registration.c ****     if (targetP == NULL)
 401:Middlewares/Third_Party/wakaama/registration.c ****     {
 402:Middlewares/Third_Party/wakaama/registration.c ****         if (object_getServers(contextP, false) == -1)
 403:Middlewares/Third_Party/wakaama/registration.c ****         {
 404:Middlewares/Third_Party/wakaama/registration.c ****             LOG("No server found");
 405:Middlewares/Third_Party/wakaama/registration.c ****             return COAP_404_NOT_FOUND;
 406:Middlewares/Third_Party/wakaama/registration.c ****         }
 407:Middlewares/Third_Party/wakaama/registration.c ****     }
 408:Middlewares/Third_Party/wakaama/registration.c ****     while (targetP != NULL && result == COAP_NO_ERROR)
 409:Middlewares/Third_Party/wakaama/registration.c ****     {
 410:Middlewares/Third_Party/wakaama/registration.c ****         if (shortServerID != 0)
 411:Middlewares/Third_Party/wakaama/registration.c ****         {
 412:Middlewares/Third_Party/wakaama/registration.c ****             if (targetP->shortID == shortServerID)
 413:Middlewares/Third_Party/wakaama/registration.c ****             {
 414:Middlewares/Third_Party/wakaama/registration.c ****                 // found the server, trigger the update transaction
 415:Middlewares/Third_Party/wakaama/registration.c ****                 if (targetP->status == STATE_REGISTERED
 416:Middlewares/Third_Party/wakaama/registration.c ****                  || targetP->status == STATE_REG_UPDATE_PENDING)
 417:Middlewares/Third_Party/wakaama/registration.c ****                 {
 418:Middlewares/Third_Party/wakaama/registration.c ****                     if (withObjects == true)
 419:Middlewares/Third_Party/wakaama/registration.c ****                     {
 420:Middlewares/Third_Party/wakaama/registration.c ****                         targetP->status = STATE_REG_FULL_UPDATE_NEEDED;
 421:Middlewares/Third_Party/wakaama/registration.c ****                     }
 422:Middlewares/Third_Party/wakaama/registration.c ****                     else
 423:Middlewares/Third_Party/wakaama/registration.c ****                     {
 424:Middlewares/Third_Party/wakaama/registration.c ****                         targetP->status = STATE_REG_UPDATE_NEEDED;
 425:Middlewares/Third_Party/wakaama/registration.c ****                     }
 426:Middlewares/Third_Party/wakaama/registration.c ****                     return COAP_NO_ERROR;
 427:Middlewares/Third_Party/wakaama/registration.c ****                 }
 428:Middlewares/Third_Party/wakaama/registration.c ****                 else if ((targetP->status == STATE_REG_FULL_UPDATE_NEEDED)
 429:Middlewares/Third_Party/wakaama/registration.c ****                       || (targetP->status == STATE_REG_UPDATE_NEEDED))
 430:Middlewares/Third_Party/wakaama/registration.c ****                 {
 431:Middlewares/Third_Party/wakaama/registration.c ****                     // if REG (FULL) UPDATE is already set, returns COAP_NO_ERROR
ARM GAS  /var/folders/0d/93p3r6493yg7p0rvl_4r983m0000gn/T//ccQ77D09.s 			page 9


 432:Middlewares/Third_Party/wakaama/registration.c ****                     if (withObjects == true)
 433:Middlewares/Third_Party/wakaama/registration.c ****                     {
 434:Middlewares/Third_Party/wakaama/registration.c ****                         targetP->status = STATE_REG_FULL_UPDATE_NEEDED;
 435:Middlewares/Third_Party/wakaama/registration.c ****                     }
 436:Middlewares/Third_Party/wakaama/registration.c ****                     return COAP_NO_ERROR;
 437:Middlewares/Third_Party/wakaama/registration.c ****                 }
 438:Middlewares/Third_Party/wakaama/registration.c ****                 else
 439:Middlewares/Third_Party/wakaama/registration.c ****                 {
 440:Middlewares/Third_Party/wakaama/registration.c ****                     return COAP_400_BAD_REQUEST;
 441:Middlewares/Third_Party/wakaama/registration.c ****                 }
 442:Middlewares/Third_Party/wakaama/registration.c ****             }
 443:Middlewares/Third_Party/wakaama/registration.c ****         }
 444:Middlewares/Third_Party/wakaama/registration.c ****         else
 445:Middlewares/Third_Party/wakaama/registration.c ****         {
 446:Middlewares/Third_Party/wakaama/registration.c ****             if (targetP->status == STATE_REGISTERED
 447:Middlewares/Third_Party/wakaama/registration.c ****              || targetP->status == STATE_REG_UPDATE_PENDING)
 448:Middlewares/Third_Party/wakaama/registration.c ****             {
 449:Middlewares/Third_Party/wakaama/registration.c ****                 if (withObjects == true)
 450:Middlewares/Third_Party/wakaama/registration.c ****                 {
 451:Middlewares/Third_Party/wakaama/registration.c ****                     targetP->status = STATE_REG_FULL_UPDATE_NEEDED;
 452:Middlewares/Third_Party/wakaama/registration.c ****                 }
 453:Middlewares/Third_Party/wakaama/registration.c ****                 else
 454:Middlewares/Third_Party/wakaama/registration.c ****                 {
 455:Middlewares/Third_Party/wakaama/registration.c ****                     targetP->status = STATE_REG_UPDATE_NEEDED;
 456:Middlewares/Third_Party/wakaama/registration.c ****                 }
 457:Middlewares/Third_Party/wakaama/registration.c ****             }
 458:Middlewares/Third_Party/wakaama/registration.c ****         }
 459:Middlewares/Third_Party/wakaama/registration.c ****         targetP = targetP->next;
 460:Middlewares/Third_Party/wakaama/registration.c ****     }
 461:Middlewares/Third_Party/wakaama/registration.c **** 
 462:Middlewares/Third_Party/wakaama/registration.c ****     if (shortServerID != 0
 463:Middlewares/Third_Party/wakaama/registration.c ****      && targetP == NULL)
 464:Middlewares/Third_Party/wakaama/registration.c ****     {
 465:Middlewares/Third_Party/wakaama/registration.c ****         // no server found
 466:Middlewares/Third_Party/wakaama/registration.c ****         result = COAP_404_NOT_FOUND;
 467:Middlewares/Third_Party/wakaama/registration.c ****     }
 468:Middlewares/Third_Party/wakaama/registration.c **** 
 469:Middlewares/Third_Party/wakaama/registration.c ****     return result;
 470:Middlewares/Third_Party/wakaama/registration.c **** }
 471:Middlewares/Third_Party/wakaama/registration.c **** 
 472:Middlewares/Third_Party/wakaama/registration.c **** uint8_t registration_start(lwm2m_context_t * contextP)
 473:Middlewares/Third_Party/wakaama/registration.c **** {
 474:Middlewares/Third_Party/wakaama/registration.c ****     lwm2m_server_t * targetP;
 475:Middlewares/Third_Party/wakaama/registration.c ****     uint8_t result;
 476:Middlewares/Third_Party/wakaama/registration.c **** 
 477:Middlewares/Third_Party/wakaama/registration.c ****     LOG_ARG("State: %s", STR_STATE(contextP->state));
 478:Middlewares/Third_Party/wakaama/registration.c **** 
 479:Middlewares/Third_Party/wakaama/registration.c ****     result = COAP_NO_ERROR;
 480:Middlewares/Third_Party/wakaama/registration.c **** 
 481:Middlewares/Third_Party/wakaama/registration.c ****     targetP = contextP->serverList;
 482:Middlewares/Third_Party/wakaama/registration.c ****     while (targetP != NULL && result == COAP_NO_ERROR)
 483:Middlewares/Third_Party/wakaama/registration.c ****     {
 484:Middlewares/Third_Party/wakaama/registration.c ****         if (targetP->status == STATE_DEREGISTERED
 485:Middlewares/Third_Party/wakaama/registration.c ****          || targetP->status == STATE_REG_FAILED)
 486:Middlewares/Third_Party/wakaama/registration.c ****         {
 487:Middlewares/Third_Party/wakaama/registration.c ****             result = prv_register(contextP, targetP);
 488:Middlewares/Third_Party/wakaama/registration.c ****         }
ARM GAS  /var/folders/0d/93p3r6493yg7p0rvl_4r983m0000gn/T//ccQ77D09.s 			page 10


 489:Middlewares/Third_Party/wakaama/registration.c ****         targetP = targetP->next;
 490:Middlewares/Third_Party/wakaama/registration.c ****     }
 491:Middlewares/Third_Party/wakaama/registration.c **** 
 492:Middlewares/Third_Party/wakaama/registration.c ****     return result;
 493:Middlewares/Third_Party/wakaama/registration.c **** }
 494:Middlewares/Third_Party/wakaama/registration.c **** 
 495:Middlewares/Third_Party/wakaama/registration.c **** 
 496:Middlewares/Third_Party/wakaama/registration.c **** /*
 497:Middlewares/Third_Party/wakaama/registration.c ****  * Returns STATE_REG_PENDING if at least one registration is still pending
 498:Middlewares/Third_Party/wakaama/registration.c ****  * Returns STATE_REGISTERED if no registration is pending and there is at least one server the clie
 499:Middlewares/Third_Party/wakaama/registration.c ****  * Returns STATE_REG_FAILED if all registration failed.
 500:Middlewares/Third_Party/wakaama/registration.c ****  */
 501:Middlewares/Third_Party/wakaama/registration.c **** lwm2m_status_t registration_getStatus(lwm2m_context_t * contextP)
 502:Middlewares/Third_Party/wakaama/registration.c **** {
 503:Middlewares/Third_Party/wakaama/registration.c ****     lwm2m_server_t * targetP;
 504:Middlewares/Third_Party/wakaama/registration.c ****     lwm2m_status_t reg_status;
 505:Middlewares/Third_Party/wakaama/registration.c **** 
 506:Middlewares/Third_Party/wakaama/registration.c ****     LOG_ARG("State: %s", STR_STATE(contextP->state));
 507:Middlewares/Third_Party/wakaama/registration.c **** 
 508:Middlewares/Third_Party/wakaama/registration.c ****     targetP = contextP->serverList;
 509:Middlewares/Third_Party/wakaama/registration.c ****     reg_status = STATE_REG_FAILED;
 510:Middlewares/Third_Party/wakaama/registration.c **** 
 511:Middlewares/Third_Party/wakaama/registration.c ****     while (targetP != NULL)
 512:Middlewares/Third_Party/wakaama/registration.c ****     {
 513:Middlewares/Third_Party/wakaama/registration.c ****         LOG_ARG("targetP->status: %s", STR_STATUS(targetP->status));
 514:Middlewares/Third_Party/wakaama/registration.c ****         switch (targetP->status)
 515:Middlewares/Third_Party/wakaama/registration.c ****         {
 516:Middlewares/Third_Party/wakaama/registration.c ****             case STATE_REGISTERED:
 517:Middlewares/Third_Party/wakaama/registration.c ****             case STATE_REG_UPDATE_NEEDED:
 518:Middlewares/Third_Party/wakaama/registration.c ****             case STATE_REG_FULL_UPDATE_NEEDED:
 519:Middlewares/Third_Party/wakaama/registration.c ****             case STATE_REG_UPDATE_PENDING:
 520:Middlewares/Third_Party/wakaama/registration.c ****                 if (reg_status == STATE_REG_FAILED)
 521:Middlewares/Third_Party/wakaama/registration.c ****                 {
 522:Middlewares/Third_Party/wakaama/registration.c ****                     reg_status = STATE_REGISTERED;
 523:Middlewares/Third_Party/wakaama/registration.c ****                 }
 524:Middlewares/Third_Party/wakaama/registration.c ****                 break;
 525:Middlewares/Third_Party/wakaama/registration.c **** 
 526:Middlewares/Third_Party/wakaama/registration.c ****             case STATE_REG_PENDING:
 527:Middlewares/Third_Party/wakaama/registration.c ****                 reg_status = STATE_REG_PENDING;
 528:Middlewares/Third_Party/wakaama/registration.c ****                 break;
 529:Middlewares/Third_Party/wakaama/registration.c **** 
 530:Middlewares/Third_Party/wakaama/registration.c ****             case STATE_REG_FAILED:
 531:Middlewares/Third_Party/wakaama/registration.c ****             case STATE_DEREG_PENDING:
 532:Middlewares/Third_Party/wakaama/registration.c ****             case STATE_DEREGISTERED:
 533:Middlewares/Third_Party/wakaama/registration.c ****             default:
 534:Middlewares/Third_Party/wakaama/registration.c ****                 break;
 535:Middlewares/Third_Party/wakaama/registration.c ****         }
 536:Middlewares/Third_Party/wakaama/registration.c ****         LOG_ARG("reg_status: %s", STR_STATUS(reg_status));
 537:Middlewares/Third_Party/wakaama/registration.c **** 
 538:Middlewares/Third_Party/wakaama/registration.c ****         targetP = targetP->next;
 539:Middlewares/Third_Party/wakaama/registration.c ****     }
 540:Middlewares/Third_Party/wakaama/registration.c **** 
 541:Middlewares/Third_Party/wakaama/registration.c ****     return reg_status;
 542:Middlewares/Third_Party/wakaama/registration.c **** }
 543:Middlewares/Third_Party/wakaama/registration.c **** 
 544:Middlewares/Third_Party/wakaama/registration.c **** static void prv_handleDeregistrationReply(lwm2m_transaction_t * transacP,
 545:Middlewares/Third_Party/wakaama/registration.c ****                                           void * message)
ARM GAS  /var/folders/0d/93p3r6493yg7p0rvl_4r983m0000gn/T//ccQ77D09.s 			page 11


 546:Middlewares/Third_Party/wakaama/registration.c **** {
  27              		.loc 1 546 0
  28              		.cfi_startproc
  29              		@ args = 0, pretend = 0, frame = 0
  30              		@ frame_needed = 0, uses_anonymous_args = 0
  31              		@ link register save eliminated.
  32              	.LVL0:
 547:Middlewares/Third_Party/wakaama/registration.c ****     lwm2m_server_t * targetP;
 548:Middlewares/Third_Party/wakaama/registration.c **** 
 549:Middlewares/Third_Party/wakaama/registration.c ****     targetP = (lwm2m_server_t *)(transacP->userData);
  33              		.loc 1 549 0
  34 0000 836B     		ldr	r3, [r0, #56]
  35              	.LVL1:
 550:Middlewares/Third_Party/wakaama/registration.c ****     if (NULL != targetP)
  36              		.loc 1 550 0
  37 0002 1BB1     		cbz	r3, .L1
 551:Middlewares/Third_Party/wakaama/registration.c ****     {
 552:Middlewares/Third_Party/wakaama/registration.c ****         if (targetP->status == STATE_DEREG_PENDING)
  38              		.loc 1 552 0
  39 0004 93F82020 		ldrb	r2, [r3, #32]	@ zero_extendqisi2
  40 0008 072A     		cmp	r2, #7
  41 000a 00D0     		beq	.L3
  42              	.L1:
 553:Middlewares/Third_Party/wakaama/registration.c ****         {
 554:Middlewares/Third_Party/wakaama/registration.c ****             targetP->status = STATE_DEREGISTERED;
 555:Middlewares/Third_Party/wakaama/registration.c ****         }
 556:Middlewares/Third_Party/wakaama/registration.c ****     }
 557:Middlewares/Third_Party/wakaama/registration.c **** }
  43              		.loc 1 557 0
  44 000c 7047     		bx	lr
  45              	.L3:
 554:Middlewares/Third_Party/wakaama/registration.c ****         }
  46              		.loc 1 554 0
  47 000e 0022     		movs	r2, #0
  48 0010 83F82020 		strb	r2, [r3, #32]
  49              		.loc 1 557 0
  50 0014 FAE7     		b	.L1
  51              		.cfi_endproc
  52              	.LFE12:
  54              		.section	.text.prv_handleRegistrationUpdateReply,"ax",%progbits
  55              		.align	1
  56              		.syntax unified
  57              		.thumb
  58              		.thumb_func
  59              		.fpu fpv4-sp-d16
  61              	prv_handleRegistrationUpdateReply:
  62              	.LFB7:
 307:Middlewares/Third_Party/wakaama/registration.c ****     coap_packet_t * packet = (coap_packet_t *)message;
  63              		.loc 1 307 0
  64              		.cfi_startproc
  65              		@ args = 0, pretend = 0, frame = 0
  66              		@ frame_needed = 0, uses_anonymous_args = 0
  67              	.LVL2:
  68 0000 38B5     		push	{r3, r4, r5, lr}
  69              	.LCFI0:
  70              		.cfi_def_cfa_offset 16
  71              		.cfi_offset 3, -16
ARM GAS  /var/folders/0d/93p3r6493yg7p0rvl_4r983m0000gn/T//ccQ77D09.s 			page 12


  72              		.cfi_offset 4, -12
  73              		.cfi_offset 5, -8
  74              		.cfi_offset 14, -4
  75              	.LVL3:
 309:Middlewares/Third_Party/wakaama/registration.c **** 
  76              		.loc 1 309 0
  77 0002 846B     		ldr	r4, [r0, #56]
  78              	.LVL4:
 311:Middlewares/Third_Party/wakaama/registration.c ****     {
  79              		.loc 1 311 0
  80 0004 94F82030 		ldrb	r3, [r4, #32]	@ zero_extendqisi2
  81 0008 042B     		cmp	r3, #4
  82 000a 00D0     		beq	.L9
  83              	.LVL5:
  84              	.L4:
 329:Middlewares/Third_Party/wakaama/registration.c **** 
  85              		.loc 1 329 0
  86 000c 38BD     		pop	{r3, r4, r5, pc}
  87              	.LVL6:
  88              	.L9:
  89 000e 0D46     		mov	r5, r1
  90              	.LBB2:
 313:Middlewares/Third_Party/wakaama/registration.c ****         if (tv_sec >= 0)
  91              		.loc 1 313 0
  92 0010 FFF7FEFF 		bl	lwm2m_gettime
  93              	.LVL7:
 314:Middlewares/Third_Party/wakaama/registration.c ****         {
  94              		.loc 1 314 0
  95 0014 0028     		cmp	r0, #0
  96 0016 71F10003 		sbcs	r3, r1, #0
  97 001a 01DB     		blt	.L6
 316:Middlewares/Third_Party/wakaama/registration.c ****         }
  98              		.loc 1 316 0
  99 001c C4E90401 		strd	r0, [r4, #16]
 100              	.L6:
 318:Middlewares/Third_Party/wakaama/registration.c ****         {
 101              		.loc 1 318 0
 102 0020 15B1     		cbz	r5, .L7
 318:Middlewares/Third_Party/wakaama/registration.c ****         {
 103              		.loc 1 318 0 is_stmt 0 discriminator 1
 104 0022 AB79     		ldrb	r3, [r5, #6]	@ zero_extendqisi2
 105 0024 442B     		cmp	r3, #68
 106 0026 03D0     		beq	.L10
 107              	.L7:
 325:Middlewares/Third_Party/wakaama/registration.c ****             LOG("Registration update failed");
 108              		.loc 1 325 0 is_stmt 1
 109 0028 0323     		movs	r3, #3
 110 002a 84F82030 		strb	r3, [r4, #32]
 111              	.LBE2:
 329:Middlewares/Third_Party/wakaama/registration.c **** 
 112              		.loc 1 329 0
 113 002e EDE7     		b	.L4
 114              	.L10:
 115              	.LBB3:
 320:Middlewares/Third_Party/wakaama/registration.c ****             LOG("Registration update successful");
 116              		.loc 1 320 0
 117 0030 0223     		movs	r3, #2
ARM GAS  /var/folders/0d/93p3r6493yg7p0rvl_4r983m0000gn/T//ccQ77D09.s 			page 13


 118 0032 84F82030 		strb	r3, [r4, #32]
 119 0036 E9E7     		b	.L4
 120              	.LBE3:
 121              		.cfi_endproc
 122              	.LFE7:
 124              		.section	.text.prv_handleRegistrationReply,"ax",%progbits
 125              		.align	1
 126              		.syntax unified
 127              		.thumb
 128              		.thumb_func
 129              		.fpu fpv4-sp-d16
 131              	prv_handleRegistrationReply:
 132              	.LFB5:
 192:Middlewares/Third_Party/wakaama/registration.c ****     coap_packet_t * packet = (coap_packet_t *)message;
 133              		.loc 1 192 0
 134              		.cfi_startproc
 135              		@ args = 0, pretend = 0, frame = 0
 136              		@ frame_needed = 0, uses_anonymous_args = 0
 137              	.LVL8:
 138 0000 38B5     		push	{r3, r4, r5, lr}
 139              	.LCFI1:
 140              		.cfi_def_cfa_offset 16
 141              		.cfi_offset 3, -16
 142              		.cfi_offset 4, -12
 143              		.cfi_offset 5, -8
 144              		.cfi_offset 14, -4
 145              	.LVL9:
 194:Middlewares/Third_Party/wakaama/registration.c **** 
 146              		.loc 1 194 0
 147 0002 846B     		ldr	r4, [r0, #56]
 148              	.LVL10:
 196:Middlewares/Third_Party/wakaama/registration.c ****     {
 149              		.loc 1 196 0
 150 0004 94F82030 		ldrb	r3, [r4, #32]	@ zero_extendqisi2
 151 0008 012B     		cmp	r3, #1
 152 000a 00D0     		beq	.L17
 153              	.LVL11:
 154              	.L11:
 220:Middlewares/Third_Party/wakaama/registration.c **** 
 155              		.loc 1 220 0
 156 000c 38BD     		pop	{r3, r4, r5, pc}
 157              	.LVL12:
 158              	.L17:
 159 000e 0D46     		mov	r5, r1
 160              	.LBB4:
 198:Middlewares/Third_Party/wakaama/registration.c ****         if (tv_sec >= 0)
 161              		.loc 1 198 0
 162 0010 FFF7FEFF 		bl	lwm2m_gettime
 163              	.LVL13:
 199:Middlewares/Third_Party/wakaama/registration.c ****         {
 164              		.loc 1 199 0
 165 0014 0028     		cmp	r0, #0
 166 0016 71F10003 		sbcs	r3, r1, #0
 167 001a 01DB     		blt	.L13
 201:Middlewares/Third_Party/wakaama/registration.c ****         }
 168              		.loc 1 201 0
 169 001c C4E90401 		strd	r0, [r4, #16]
ARM GAS  /var/folders/0d/93p3r6493yg7p0rvl_4r983m0000gn/T//ccQ77D09.s 			page 14


 170              	.L13:
 203:Middlewares/Third_Party/wakaama/registration.c ****         {
 171              		.loc 1 203 0
 172 0020 15B1     		cbz	r5, .L14
 203:Middlewares/Third_Party/wakaama/registration.c ****         {
 173              		.loc 1 203 0 is_stmt 0 discriminator 1
 174 0022 AB79     		ldrb	r3, [r5, #6]	@ zero_extendqisi2
 175 0024 412B     		cmp	r3, #65
 176 0026 03D0     		beq	.L18
 177              	.L14:
 216:Middlewares/Third_Party/wakaama/registration.c ****             LOG("Registration failed");
 178              		.loc 1 216 0 is_stmt 1
 179 0028 0323     		movs	r3, #3
 180 002a 84F82030 		strb	r3, [r4, #32]
 181              	.LBE4:
 220:Middlewares/Third_Party/wakaama/registration.c **** 
 182              		.loc 1 220 0
 183 002e EDE7     		b	.L11
 184              	.L18:
 185              	.LBB5:
 205:Middlewares/Third_Party/wakaama/registration.c ****             if (NULL != targetP->location)
 186              		.loc 1 205 0
 187 0030 0223     		movs	r3, #2
 188 0032 84F82030 		strb	r3, [r4, #32]
 206:Middlewares/Third_Party/wakaama/registration.c ****             {
 189              		.loc 1 206 0
 190 0036 606A     		ldr	r0, [r4, #36]
 191              	.LVL14:
 192 0038 08B1     		cbz	r0, .L15
 208:Middlewares/Third_Party/wakaama/registration.c ****             }
 193              		.loc 1 208 0
 194 003a FFF7FEFF 		bl	lwm2m_free
 195              	.LVL15:
 196              	.L15:
 210:Middlewares/Third_Party/wakaama/registration.c **** 
 197              		.loc 1 210 0
 198 003e 686B     		ldr	r0, [r5, #52]
 199 0040 FFF7FEFF 		bl	coap_get_multi_option_as_string
 200              	.LVL16:
 201 0044 6062     		str	r0, [r4, #36]
 202 0046 E1E7     		b	.L11
 203              	.LBE5:
 204              		.cfi_endproc
 205              	.LFE5:
 207              		.section	.text.prv_getRegistrationQueryLength,"ax",%progbits
 208              		.align	1
 209              		.syntax unified
 210              		.thumb
 211              		.thumb_func
 212              		.fpu fpv4-sp-d16
 214              	prv_getRegistrationQueryLength:
 215              	.LFB3:
  69:Middlewares/Third_Party/wakaama/registration.c ****     int index;
 216              		.loc 1 69 0
 217              		.cfi_startproc
 218              		@ args = 0, pretend = 0, frame = 24
 219              		@ frame_needed = 0, uses_anonymous_args = 0
ARM GAS  /var/folders/0d/93p3r6493yg7p0rvl_4r983m0000gn/T//ccQ77D09.s 			page 15


 220              	.LVL17:
 221 0000 30B5     		push	{r4, r5, lr}
 222              	.LCFI2:
 223              		.cfi_def_cfa_offset 12
 224              		.cfi_offset 4, -12
 225              		.cfi_offset 5, -8
 226              		.cfi_offset 14, -4
 227 0002 87B0     		sub	sp, sp, #28
 228              	.LCFI3:
 229              		.cfi_def_cfa_offset 40
 230 0004 0446     		mov	r4, r0
 231 0006 0D46     		mov	r5, r1
 232              	.LVL18:
  75:Middlewares/Third_Party/wakaama/registration.c **** 
 233              		.loc 1 75 0
 234 0008 4068     		ldr	r0, [r0, #4]
 235              	.LVL19:
 236 000a FFF7FEFF 		bl	strlen
 237              	.LVL20:
 238 000e 00F10E03 		add	r3, r0, #14
 239              	.LVL21:
  77:Middlewares/Third_Party/wakaama/registration.c ****     {
 240              		.loc 1 77 0
 241 0012 A268     		ldr	r2, [r4, #8]
 242 0014 2AB1     		cbz	r2, .L20
  79:Middlewares/Third_Party/wakaama/registration.c ****         index += strlen(contextP->msisdn);
 243              		.loc 1 79 0
 244 0016 00F11304 		add	r4, r0, #19
 245              	.LVL22:
  80:Middlewares/Third_Party/wakaama/registration.c ****     }
 246              		.loc 1 80 0
 247 001a 1046     		mov	r0, r2
 248 001c FFF7FEFF 		bl	strlen
 249              	.LVL23:
 250 0020 2318     		adds	r3, r4, r0
 251              	.LVL24:
 252              	.L20:
  83:Middlewares/Third_Party/wakaama/registration.c ****     {
 253              		.loc 1 83 0
 254 0022 2A7E     		ldrb	r2, [r5, #24]	@ zero_extendqisi2
 255 0024 013A     		subs	r2, r2, #1
 256 0026 052A     		cmp	r2, #5
 257 0028 22D8     		bhi	.L31
 258 002a DFE802F0 		tbb	[pc, r2]
 259              	.L23:
 260 002e 03       		.byte	(.L22-.L23)/2
 261 002f 0D       		.byte	(.L24-.L23)/2
 262 0030 0F       		.byte	(.L25-.L23)/2
 263 0031 11       		.byte	(.L26-.L23)/2
 264 0032 13       		.byte	(.L27-.L23)/2
 265 0033 15       		.byte	(.L28-.L23)/2
 266              		.p2align 1
 267              	.L22:
  86:Middlewares/Third_Party/wakaama/registration.c ****         break;
 268              		.loc 1 86 0
 269 0034 0433     		adds	r3, r3, #4
 270              	.LVL25:
ARM GAS  /var/folders/0d/93p3r6493yg7p0rvl_4r983m0000gn/T//ccQ77D09.s 			page 16


 271              	.L29:
 107:Middlewares/Third_Party/wakaama/registration.c ****     {
 272              		.loc 1 107 0
 273 0036 D5E90201 		ldrd	r0, [r5, #8]
 274 003a 50EA0102 		orrs	r2, r0, r1
 275 003e 0DD1     		bne	.L33
 276              	.L30:
 115:Middlewares/Third_Party/wakaama/registration.c **** }
 277              		.loc 1 115 0
 278 0040 0133     		adds	r3, r3, #1
 279              	.LVL26:
 280              	.L19:
 116:Middlewares/Third_Party/wakaama/registration.c **** 
 281              		.loc 1 116 0
 282 0042 1846     		mov	r0, r3
 283 0044 07B0     		add	sp, sp, #28
 284              	.LCFI4:
 285              		.cfi_remember_state
 286              		.cfi_def_cfa_offset 12
 287              		@ sp needed
 288 0046 30BD     		pop	{r4, r5, pc}
 289              	.LVL27:
 290              	.L24:
 291              	.LCFI5:
 292              		.cfi_restore_state
  89:Middlewares/Third_Party/wakaama/registration.c ****         break;
 293              		.loc 1 89 0
 294 0048 0533     		adds	r3, r3, #5
 295              	.LVL28:
  90:Middlewares/Third_Party/wakaama/registration.c ****     case BINDING_S:
 296              		.loc 1 90 0
 297 004a F4E7     		b	.L29
 298              	.L25:
  92:Middlewares/Third_Party/wakaama/registration.c ****         break;
 299              		.loc 1 92 0
 300 004c 0433     		adds	r3, r3, #4
 301              	.LVL29:
  93:Middlewares/Third_Party/wakaama/registration.c ****     case BINDING_SQ:
 302              		.loc 1 93 0
 303 004e F2E7     		b	.L29
 304              	.L26:
  95:Middlewares/Third_Party/wakaama/registration.c ****         break;
 305              		.loc 1 95 0
 306 0050 0533     		adds	r3, r3, #5
 307              	.LVL30:
  96:Middlewares/Third_Party/wakaama/registration.c ****     case BINDING_US:
 308              		.loc 1 96 0
 309 0052 F0E7     		b	.L29
 310              	.L27:
  98:Middlewares/Third_Party/wakaama/registration.c ****         break;
 311              		.loc 1 98 0
 312 0054 0533     		adds	r3, r3, #5
 313              	.LVL31:
  99:Middlewares/Third_Party/wakaama/registration.c ****     case BINDING_UQS:
 314              		.loc 1 99 0
 315 0056 EEE7     		b	.L29
 316              	.L28:
ARM GAS  /var/folders/0d/93p3r6493yg7p0rvl_4r983m0000gn/T//ccQ77D09.s 			page 17


 101:Middlewares/Third_Party/wakaama/registration.c ****         break;
 317              		.loc 1 101 0
 318 0058 0633     		adds	r3, r3, #6
 319              	.LVL32:
 102:Middlewares/Third_Party/wakaama/registration.c ****     default:
 320              		.loc 1 102 0
 321 005a ECE7     		b	.L29
 322              	.L33:
 109:Middlewares/Third_Party/wakaama/registration.c ****         res = utils_intToText(server->lifetime, buffer, sizeof(buffer));
 323              		.loc 1 109 0
 324 005c 1C1D     		adds	r4, r3, #4
 325              	.LVL33:
 110:Middlewares/Third_Party/wakaama/registration.c ****         if (res == 0) return 0;
 326              		.loc 1 110 0
 327 005e 1523     		movs	r3, #21
 328 0060 6A46     		mov	r2, sp
 329 0062 FFF7FEFF 		bl	utils_intToText
 330              	.LVL34:
 111:Middlewares/Third_Party/wakaama/registration.c ****         index += res;
 331              		.loc 1 111 0
 332 0066 0346     		mov	r3, r0
 333 0068 0028     		cmp	r0, #0
 334 006a EAD0     		beq	.L19
 112:Middlewares/Third_Party/wakaama/registration.c ****     }
 335              		.loc 1 112 0
 336 006c 2344     		add	r3, r3, r4
 337              	.LVL35:
 338 006e E7E7     		b	.L30
 339              	.LVL36:
 340              	.L31:
 104:Middlewares/Third_Party/wakaama/registration.c ****     }
 341              		.loc 1 104 0
 342 0070 0023     		movs	r3, #0
 343              	.LVL37:
 344 0072 E6E7     		b	.L19
 345              		.cfi_endproc
 346              	.LFE3:
 348              		.section	.text.prv_getRegistrationQuery,"ax",%progbits
 349              		.align	1
 350              		.syntax unified
 351              		.thumb
 352              		.thumb_func
 353              		.fpu fpv4-sp-d16
 355              	prv_getRegistrationQuery:
 356              	.LFB4:
 122:Middlewares/Third_Party/wakaama/registration.c ****     int index;
 357              		.loc 1 122 0
 358              		.cfi_startproc
 359              		@ args = 0, pretend = 0, frame = 0
 360              		@ frame_needed = 0, uses_anonymous_args = 0
 361              	.LVL38:
 362 0000 2DE9F041 		push	{r4, r5, r6, r7, r8, lr}
 363              	.LCFI6:
 364              		.cfi_def_cfa_offset 24
 365              		.cfi_offset 4, -24
 366              		.cfi_offset 5, -20
 367              		.cfi_offset 6, -16
ARM GAS  /var/folders/0d/93p3r6493yg7p0rvl_4r983m0000gn/T//ccQ77D09.s 			page 18


 368              		.cfi_offset 7, -12
 369              		.cfi_offset 8, -8
 370              		.cfi_offset 14, -4
 371 0004 0746     		mov	r7, r0
 372 0006 8846     		mov	r8, r1
 373 0008 1646     		mov	r6, r2
 374 000a 1D46     		mov	r5, r3
 126:Middlewares/Third_Party/wakaama/registration.c ****     if (index < 0) return 0;
 375              		.loc 1 126 0
 376 000c 3F4A     		ldr	r2, .L56
 377              	.LVL39:
 378 000e 1946     		mov	r1, r3
 379              	.LVL40:
 380 0010 3046     		mov	r0, r6
 381              	.LVL41:
 382 0012 FFF7FEFF 		bl	utils_stringCopy
 383              	.LVL42:
 127:Middlewares/Third_Party/wakaama/registration.c ****     res = utils_stringCopy(buffer + index, length - index, contextP->endpointName);
 384              		.loc 1 127 0
 385 0016 041E     		subs	r4, r0, #0
 386 0018 65DB     		blt	.L46
 128:Middlewares/Third_Party/wakaama/registration.c ****     if (res < 0) return 0;
 387              		.loc 1 128 0
 388 001a 7A68     		ldr	r2, [r7, #4]
 389 001c 291B     		subs	r1, r5, r4
 390 001e 3019     		adds	r0, r6, r4
 391              	.LVL43:
 392 0020 FFF7FEFF 		bl	utils_stringCopy
 393              	.LVL44:
 129:Middlewares/Third_Party/wakaama/registration.c ****     index += res;
 394              		.loc 1 129 0
 395 0024 0028     		cmp	r0, #0
 396 0026 62DB     		blt	.L47
 130:Middlewares/Third_Party/wakaama/registration.c **** 
 397              		.loc 1 130 0
 398 0028 0444     		add	r4, r4, r0
 399              	.LVL45:
 132:Middlewares/Third_Party/wakaama/registration.c ****     {
 400              		.loc 1 132 0
 401 002a BB68     		ldr	r3, [r7, #8]
 402 002c 7BB1     		cbz	r3, .L36
 134:Middlewares/Third_Party/wakaama/registration.c ****         if (res < 0) return 0;
 403              		.loc 1 134 0
 404 002e 384A     		ldr	r2, .L56+4
 405 0030 291B     		subs	r1, r5, r4
 406 0032 3019     		adds	r0, r6, r4
 407              	.LVL46:
 408 0034 FFF7FEFF 		bl	utils_stringCopy
 409              	.LVL47:
 135:Middlewares/Third_Party/wakaama/registration.c ****         index += res;
 410              		.loc 1 135 0
 411 0038 0028     		cmp	r0, #0
 412 003a 5ADB     		blt	.L48
 136:Middlewares/Third_Party/wakaama/registration.c ****         res = utils_stringCopy(buffer + index, length - index, contextP->msisdn);
 413              		.loc 1 136 0
 414 003c 0444     		add	r4, r4, r0
 415              	.LVL48:
ARM GAS  /var/folders/0d/93p3r6493yg7p0rvl_4r983m0000gn/T//ccQ77D09.s 			page 19


 137:Middlewares/Third_Party/wakaama/registration.c ****         if (res < 0) return 0;
 416              		.loc 1 137 0
 417 003e BA68     		ldr	r2, [r7, #8]
 418 0040 291B     		subs	r1, r5, r4
 419 0042 3019     		adds	r0, r6, r4
 420              	.LVL49:
 421 0044 FFF7FEFF 		bl	utils_stringCopy
 422              	.LVL50:
 138:Middlewares/Third_Party/wakaama/registration.c ****         index += res;
 423              		.loc 1 138 0
 424 0048 0028     		cmp	r0, #0
 425 004a 54DB     		blt	.L49
 139:Middlewares/Third_Party/wakaama/registration.c ****     }
 426              		.loc 1 139 0
 427 004c 0444     		add	r4, r4, r0
 428              	.LVL51:
 429              	.L36:
 142:Middlewares/Third_Party/wakaama/registration.c ****     {
 430              		.loc 1 142 0
 431 004e 98F81830 		ldrb	r3, [r8, #24]	@ zero_extendqisi2
 432 0052 013B     		subs	r3, r3, #1
 433 0054 052B     		cmp	r3, #5
 434 0056 50D8     		bhi	.L50
 435 0058 DFE803F0 		tbb	[pc, r3]
 436              	.L38:
 437 005c 03       		.byte	(.L37-.L38)/2
 438 005d 15       		.byte	(.L39-.L38)/2
 439 005e 1B       		.byte	(.L40-.L38)/2
 440 005f 21       		.byte	(.L41-.L38)/2
 441 0060 27       		.byte	(.L42-.L38)/2
 442 0061 2D       		.byte	(.L43-.L38)/2
 443              		.p2align 1
 444              	.L37:
 145:Middlewares/Third_Party/wakaama/registration.c ****         break;
 445              		.loc 1 145 0
 446 0062 2C4A     		ldr	r2, .L56+8
 447 0064 291B     		subs	r1, r5, r4
 448 0066 3019     		adds	r0, r6, r4
 449              	.LVL52:
 450 0068 FFF7FEFF 		bl	utils_stringCopy
 451              	.LVL53:
 452              	.L44:
 165:Middlewares/Third_Party/wakaama/registration.c ****     index += res;
 453              		.loc 1 165 0
 454 006c 0028     		cmp	r0, #0
 455 006e 46DB     		blt	.L51
 166:Middlewares/Third_Party/wakaama/registration.c **** 
 456              		.loc 1 166 0
 457 0070 0444     		add	r4, r4, r0
 458              	.LVL54:
 168:Middlewares/Third_Party/wakaama/registration.c ****     {
 459              		.loc 1 168 0
 460 0072 D8E90223 		ldrd	r2, [r8, #8]
 461 0076 1343     		orrs	r3, r2, r3
 462 0078 23D1     		bne	.L55
 463              	.L45:
 178:Middlewares/Third_Party/wakaama/registration.c ****     {
ARM GAS  /var/folders/0d/93p3r6493yg7p0rvl_4r983m0000gn/T//ccQ77D09.s 			page 20


 464              		.loc 1 178 0
 465 007a A542     		cmp	r5, r4
 466 007c 43DD     		ble	.L53
 180:Middlewares/Third_Party/wakaama/registration.c ****     }
 467              		.loc 1 180 0
 468 007e 631C     		adds	r3, r4, #1
 469              	.LVL55:
 470 0080 0022     		movs	r2, #0
 471 0082 3255     		strb	r2, [r6, r4]
 187:Middlewares/Third_Party/wakaama/registration.c **** }
 472              		.loc 1 187 0
 473 0084 30E0     		b	.L34
 474              	.LVL56:
 475              	.L39:
 148:Middlewares/Third_Party/wakaama/registration.c ****         break;
 476              		.loc 1 148 0
 477 0086 244A     		ldr	r2, .L56+12
 478 0088 291B     		subs	r1, r5, r4
 479 008a 3019     		adds	r0, r6, r4
 480              	.LVL57:
 481 008c FFF7FEFF 		bl	utils_stringCopy
 482              	.LVL58:
 149:Middlewares/Third_Party/wakaama/registration.c ****     case BINDING_S:
 483              		.loc 1 149 0
 484 0090 ECE7     		b	.L44
 485              	.L40:
 151:Middlewares/Third_Party/wakaama/registration.c ****         break;
 486              		.loc 1 151 0
 487 0092 224A     		ldr	r2, .L56+16
 488 0094 291B     		subs	r1, r5, r4
 489 0096 3019     		adds	r0, r6, r4
 490              	.LVL59:
 491 0098 FFF7FEFF 		bl	utils_stringCopy
 492              	.LVL60:
 152:Middlewares/Third_Party/wakaama/registration.c ****     case BINDING_SQ:
 493              		.loc 1 152 0
 494 009c E6E7     		b	.L44
 495              	.L41:
 154:Middlewares/Third_Party/wakaama/registration.c ****         break;
 496              		.loc 1 154 0
 497 009e 204A     		ldr	r2, .L56+20
 498 00a0 291B     		subs	r1, r5, r4
 499 00a2 3019     		adds	r0, r6, r4
 500              	.LVL61:
 501 00a4 FFF7FEFF 		bl	utils_stringCopy
 502              	.LVL62:
 155:Middlewares/Third_Party/wakaama/registration.c ****     case BINDING_US:
 503              		.loc 1 155 0
 504 00a8 E0E7     		b	.L44
 505              	.L42:
 157:Middlewares/Third_Party/wakaama/registration.c ****         break;
 506              		.loc 1 157 0
 507 00aa 1E4A     		ldr	r2, .L56+24
 508 00ac 291B     		subs	r1, r5, r4
 509 00ae 3019     		adds	r0, r6, r4
 510              	.LVL63:
 511 00b0 FFF7FEFF 		bl	utils_stringCopy
ARM GAS  /var/folders/0d/93p3r6493yg7p0rvl_4r983m0000gn/T//ccQ77D09.s 			page 21


 512              	.LVL64:
 158:Middlewares/Third_Party/wakaama/registration.c ****     case BINDING_UQS:
 513              		.loc 1 158 0
 514 00b4 DAE7     		b	.L44
 515              	.L43:
 160:Middlewares/Third_Party/wakaama/registration.c ****         break;
 516              		.loc 1 160 0
 517 00b6 1C4A     		ldr	r2, .L56+28
 518 00b8 291B     		subs	r1, r5, r4
 519 00ba 3019     		adds	r0, r6, r4
 520              	.LVL65:
 521 00bc FFF7FEFF 		bl	utils_stringCopy
 522              	.LVL66:
 161:Middlewares/Third_Party/wakaama/registration.c ****     default:
 523              		.loc 1 161 0
 524 00c0 D4E7     		b	.L44
 525              	.L55:
 170:Middlewares/Third_Party/wakaama/registration.c ****         if (res < 0) return 0;
 526              		.loc 1 170 0
 527 00c2 1A4A     		ldr	r2, .L56+32
 528 00c4 291B     		subs	r1, r5, r4
 529 00c6 3019     		adds	r0, r6, r4
 530              	.LVL67:
 531 00c8 FFF7FEFF 		bl	utils_stringCopy
 532              	.LVL68:
 171:Middlewares/Third_Party/wakaama/registration.c ****         index += res;
 533              		.loc 1 171 0
 534 00cc 0028     		cmp	r0, #0
 535 00ce 18DB     		blt	.L52
 172:Middlewares/Third_Party/wakaama/registration.c ****         res = utils_intToText(server->lifetime, buffer + index, length - index);
 536              		.loc 1 172 0
 537 00d0 0444     		add	r4, r4, r0
 538              	.LVL69:
 173:Middlewares/Third_Party/wakaama/registration.c ****         if (res == 0) return 0;
 539              		.loc 1 173 0
 540 00d2 2B1B     		subs	r3, r5, r4
 541 00d4 3219     		adds	r2, r6, r4
 542 00d6 D8E90201 		ldrd	r0, [r8, #8]
 543              	.LVL70:
 544 00da FFF7FEFF 		bl	utils_intToText
 545              	.LVL71:
 174:Middlewares/Third_Party/wakaama/registration.c ****         index += res;
 546              		.loc 1 174 0
 547 00de 0346     		mov	r3, r0
 548 00e0 10B1     		cbz	r0, .L34
 175:Middlewares/Third_Party/wakaama/registration.c ****     }
 549              		.loc 1 175 0
 550 00e2 0444     		add	r4, r4, r0
 551              	.LVL72:
 552 00e4 C9E7     		b	.L45
 553              	.LVL73:
 554              	.L46:
 127:Middlewares/Third_Party/wakaama/registration.c ****     res = utils_stringCopy(buffer + index, length - index, contextP->endpointName);
 555              		.loc 1 127 0
 556 00e6 0023     		movs	r3, #0
 557              	.LVL74:
 558              	.L34:
ARM GAS  /var/folders/0d/93p3r6493yg7p0rvl_4r983m0000gn/T//ccQ77D09.s 			page 22


 188:Middlewares/Third_Party/wakaama/registration.c **** 
 559              		.loc 1 188 0
 560 00e8 1846     		mov	r0, r3
 561 00ea BDE8F081 		pop	{r4, r5, r6, r7, r8, pc}
 562              	.LVL75:
 563              	.L47:
 129:Middlewares/Third_Party/wakaama/registration.c ****     index += res;
 564              		.loc 1 129 0
 565 00ee 0023     		movs	r3, #0
 566 00f0 FAE7     		b	.L34
 567              	.L48:
 135:Middlewares/Third_Party/wakaama/registration.c ****         index += res;
 568              		.loc 1 135 0
 569 00f2 0023     		movs	r3, #0
 570 00f4 F8E7     		b	.L34
 571              	.L49:
 138:Middlewares/Third_Party/wakaama/registration.c ****         index += res;
 572              		.loc 1 138 0
 573 00f6 0023     		movs	r3, #0
 574 00f8 F6E7     		b	.L34
 575              	.L50:
 165:Middlewares/Third_Party/wakaama/registration.c ****     index += res;
 576              		.loc 1 165 0
 577 00fa 0023     		movs	r3, #0
 578 00fc F4E7     		b	.L34
 579              	.L51:
 580 00fe 0023     		movs	r3, #0
 581 0100 F2E7     		b	.L34
 582              	.L52:
 171:Middlewares/Third_Party/wakaama/registration.c ****         index += res;
 583              		.loc 1 171 0
 584 0102 0023     		movs	r3, #0
 585 0104 F0E7     		b	.L34
 586              	.L53:
 184:Middlewares/Third_Party/wakaama/registration.c ****     }
 587              		.loc 1 184 0
 588 0106 0023     		movs	r3, #0
 589 0108 EEE7     		b	.L34
 590              	.L57:
 591 010a 00BF     		.align	2
 592              	.L56:
 593 010c 00000000 		.word	.LC0
 594 0110 10000000 		.word	.LC1
 595 0114 18000000 		.word	.LC2
 596 0118 20000000 		.word	.LC3
 597 011c 28000000 		.word	.LC4
 598 0120 30000000 		.word	.LC5
 599 0124 38000000 		.word	.LC6
 600 0128 40000000 		.word	.LC7
 601 012c 48000000 		.word	.LC8
 602              		.cfi_endproc
 603              	.LFE4:
 605              		.section	.text.prv_register,"ax",%progbits
 606              		.align	1
 607              		.syntax unified
 608              		.thumb
 609              		.thumb_func
ARM GAS  /var/folders/0d/93p3r6493yg7p0rvl_4r983m0000gn/T//ccQ77D09.s 			page 23


 610              		.fpu fpv4-sp-d16
 612              	prv_register:
 613              	.LFB6:
 225:Middlewares/Third_Party/wakaama/registration.c ****     char * query;
 614              		.loc 1 225 0
 615              		.cfi_startproc
 616              		@ args = 0, pretend = 0, frame = 0
 617              		@ frame_needed = 0, uses_anonymous_args = 0
 618              	.LVL76:
 619 0000 2DE9F043 		push	{r4, r5, r6, r7, r8, r9, lr}
 620              	.LCFI7:
 621              		.cfi_def_cfa_offset 28
 622              		.cfi_offset 4, -28
 623              		.cfi_offset 5, -24
 624              		.cfi_offset 6, -20
 625              		.cfi_offset 7, -16
 626              		.cfi_offset 8, -12
 627              		.cfi_offset 9, -8
 628              		.cfi_offset 14, -4
 629 0004 85B0     		sub	sp, sp, #20
 630              	.LCFI8:
 631              		.cfi_def_cfa_offset 48
 632 0006 0446     		mov	r4, r0
 633 0008 0E46     		mov	r6, r1
 232:Middlewares/Third_Party/wakaama/registration.c ****     if(payload_length == 0) return COAP_500_INTERNAL_SERVER_ERROR;
 634              		.loc 1 232 0
 635 000a FFF7FEFF 		bl	object_getRegisterPayloadBufferLength
 636              	.LVL77:
 233:Middlewares/Third_Party/wakaama/registration.c ****     payload = lwm2m_malloc(payload_length);
 637              		.loc 1 233 0
 638 000e 0028     		cmp	r0, #0
 639 0010 00F09680 		beq	.L68
 640 0014 0546     		mov	r5, r0
 234:Middlewares/Third_Party/wakaama/registration.c ****     if(!payload) return COAP_500_INTERNAL_SERVER_ERROR;
 641              		.loc 1 234 0
 642 0016 FFF7FEFF 		bl	lwm2m_malloc
 643              	.LVL78:
 235:Middlewares/Third_Party/wakaama/registration.c ****     payload_length = object_getRegisterPayload(contextP, payload, payload_length);
 644              		.loc 1 235 0
 645 001a 0746     		mov	r7, r0
 646 001c 0028     		cmp	r0, #0
 647 001e 00F09380 		beq	.L69
 236:Middlewares/Third_Party/wakaama/registration.c ****     if(payload_length == 0)
 648              		.loc 1 236 0
 649 0022 2A46     		mov	r2, r5
 650 0024 0146     		mov	r1, r0
 651 0026 2046     		mov	r0, r4
 652              	.LVL79:
 653 0028 FFF7FEFF 		bl	object_getRegisterPayload
 654              	.LVL80:
 237:Middlewares/Third_Party/wakaama/registration.c ****     {
 655              		.loc 1 237 0
 656 002c 8146     		mov	r9, r0
 657 002e 0028     		cmp	r0, #0
 658 0030 51D0     		beq	.L71
 243:Middlewares/Third_Party/wakaama/registration.c ****     if(query_length == 0)
 659              		.loc 1 243 0
ARM GAS  /var/folders/0d/93p3r6493yg7p0rvl_4r983m0000gn/T//ccQ77D09.s 			page 24


 660 0032 3146     		mov	r1, r6
 661 0034 2046     		mov	r0, r4
 662              	.LVL81:
 663 0036 FFF7FEFF 		bl	prv_getRegistrationQueryLength
 664              	.LVL82:
 244:Middlewares/Third_Party/wakaama/registration.c ****     {
 665              		.loc 1 244 0
 666 003a 0546     		mov	r5, r0
 667 003c 0028     		cmp	r0, #0
 668 003e 4FD0     		beq	.L72
 249:Middlewares/Third_Party/wakaama/registration.c ****     if(!query)
 669              		.loc 1 249 0
 670 0040 FFF7FEFF 		bl	lwm2m_malloc
 671              	.LVL83:
 250:Middlewares/Third_Party/wakaama/registration.c ****     {
 672              		.loc 1 250 0
 673 0044 8046     		mov	r8, r0
 674 0046 0028     		cmp	r0, #0
 675 0048 4FD0     		beq	.L73
 255:Middlewares/Third_Party/wakaama/registration.c ****     {
 676              		.loc 1 255 0
 677 004a 2B46     		mov	r3, r5
 678 004c 0246     		mov	r2, r0
 679 004e 3146     		mov	r1, r6
 680 0050 2046     		mov	r0, r4
 681              	.LVL84:
 682 0052 FFF7FEFF 		bl	prv_getRegistrationQuery
 683              	.LVL85:
 684 0056 A842     		cmp	r0, r5
 685 0058 4CD1     		bne	.L74
 262:Middlewares/Third_Party/wakaama/registration.c ****     {
 686              		.loc 1 262 0
 687 005a F369     		ldr	r3, [r6, #28]
 688 005c 002B     		cmp	r3, #0
 689 005e 51D0     		beq	.L75
 690              	.L64:
 267:Middlewares/Third_Party/wakaama/registration.c ****     {
 691              		.loc 1 267 0
 692 0060 F069     		ldr	r0, [r6, #28]
 693 0062 0028     		cmp	r0, #0
 694 0064 54D0     		beq	.L76
 274:Middlewares/Third_Party/wakaama/registration.c ****     if (transaction == NULL)
 695              		.loc 1 274 0
 696 0066 238C     		ldrh	r3, [r4, #32]
 697 0068 5A1C     		adds	r2, r3, #1
 698 006a 2284     		strh	r2, [r4, #32]	@ movhi
 699 006c 0022     		movs	r2, #0
 700 006e 0292     		str	r2, [sp, #8]
 701 0070 0421     		movs	r1, #4
 702 0072 0191     		str	r1, [sp, #4]
 703 0074 0093     		str	r3, [sp]
 704 0076 1346     		mov	r3, r2
 705 0078 0221     		movs	r1, #2
 706 007a FFF7FEFF 		bl	transaction_new
 707              	.LVL86:
 275:Middlewares/Third_Party/wakaama/registration.c ****     {
 708              		.loc 1 275 0
ARM GAS  /var/folders/0d/93p3r6493yg7p0rvl_4r983m0000gn/T//ccQ77D09.s 			page 25


 709 007e 0546     		mov	r5, r0
 710              	.LVL87:
 711 0080 0028     		cmp	r0, #0
 712 0082 4DD0     		beq	.L77
 282:Middlewares/Third_Party/wakaama/registration.c ****     coap_set_header_uri_query(transaction->message, query);
 713              		.loc 1 282 0
 714 0084 3149     		ldr	r1, .L79
 715 0086 806A     		ldr	r0, [r0, #40]
 716              	.LVL88:
 717 0088 FFF7FEFF 		bl	coap_set_header_uri_path
 718              	.LVL89:
 283:Middlewares/Third_Party/wakaama/registration.c ****     coap_set_header_content_type(transaction->message, LWM2M_CONTENT_LINK);
 719              		.loc 1 283 0
 720 008c 4146     		mov	r1, r8
 721 008e A86A     		ldr	r0, [r5, #40]
 722 0090 FFF7FEFF 		bl	coap_set_header_uri_query
 723              	.LVL90:
 284:Middlewares/Third_Party/wakaama/registration.c ****     coap_set_payload(transaction->message, payload, payload_length);
 724              		.loc 1 284 0
 725 0094 2821     		movs	r1, #40
 726 0096 A86A     		ldr	r0, [r5, #40]
 727 0098 FFF7FEFF 		bl	coap_set_header_content_type
 728              	.LVL91:
 285:Middlewares/Third_Party/wakaama/registration.c **** 
 729              		.loc 1 285 0
 730 009c 4A46     		mov	r2, r9
 731 009e 3946     		mov	r1, r7
 732 00a0 A86A     		ldr	r0, [r5, #40]
 733 00a2 FFF7FEFF 		bl	coap_set_payload
 734              	.LVL92:
 287:Middlewares/Third_Party/wakaama/registration.c ****     transaction->userData = (void *) server;
 735              		.loc 1 287 0
 736 00a6 2A4B     		ldr	r3, .L79+4
 737 00a8 6B63     		str	r3, [r5, #52]
 288:Middlewares/Third_Party/wakaama/registration.c **** 
 738              		.loc 1 288 0
 739 00aa AE63     		str	r6, [r5, #56]
 290:Middlewares/Third_Party/wakaama/registration.c ****     if (transaction_send(contextP, transaction) != 0)
 740              		.loc 1 290 0
 741 00ac 2946     		mov	r1, r5
 742 00ae 606A     		ldr	r0, [r4, #36]
 743 00b0 FFF7FEFF 		bl	lwm2m_list_add
 744              	.LVL93:
 745 00b4 6062     		str	r0, [r4, #36]
 291:Middlewares/Third_Party/wakaama/registration.c ****     {
 746              		.loc 1 291 0
 747 00b6 2946     		mov	r1, r5
 748 00b8 2046     		mov	r0, r4
 749 00ba FFF7FEFF 		bl	transaction_send
 750              	.LVL94:
 751 00be B8BB     		cbnz	r0, .L78
 298:Middlewares/Third_Party/wakaama/registration.c ****     lwm2m_free(query);
 752              		.loc 1 298 0
 753 00c0 3846     		mov	r0, r7
 754 00c2 FFF7FEFF 		bl	lwm2m_free
 755              	.LVL95:
 299:Middlewares/Third_Party/wakaama/registration.c ****     server->status = STATE_REG_PENDING;
ARM GAS  /var/folders/0d/93p3r6493yg7p0rvl_4r983m0000gn/T//ccQ77D09.s 			page 26


 756              		.loc 1 299 0
 757 00c6 4046     		mov	r0, r8
 758 00c8 FFF7FEFF 		bl	lwm2m_free
 759              	.LVL96:
 300:Middlewares/Third_Party/wakaama/registration.c **** 
 760              		.loc 1 300 0
 761 00cc 0123     		movs	r3, #1
 762 00ce 86F82030 		strb	r3, [r6, #32]
 302:Middlewares/Third_Party/wakaama/registration.c **** }
 763              		.loc 1 302 0
 764 00d2 0020     		movs	r0, #0
 765 00d4 35E0     		b	.L59
 766              	.LVL97:
 767              	.L71:
 239:Middlewares/Third_Party/wakaama/registration.c ****         return COAP_500_INTERNAL_SERVER_ERROR;
 768              		.loc 1 239 0
 769 00d6 3846     		mov	r0, r7
 770              	.LVL98:
 771 00d8 FFF7FEFF 		bl	lwm2m_free
 772              	.LVL99:
 240:Middlewares/Third_Party/wakaama/registration.c ****     }
 773              		.loc 1 240 0
 774 00dc A020     		movs	r0, #160
 775 00de 30E0     		b	.L59
 776              	.LVL100:
 777              	.L72:
 246:Middlewares/Third_Party/wakaama/registration.c ****         return COAP_500_INTERNAL_SERVER_ERROR;
 778              		.loc 1 246 0
 779 00e0 3846     		mov	r0, r7
 780              	.LVL101:
 781 00e2 FFF7FEFF 		bl	lwm2m_free
 782              	.LVL102:
 247:Middlewares/Third_Party/wakaama/registration.c ****     }
 783              		.loc 1 247 0
 784 00e6 A020     		movs	r0, #160
 785 00e8 2BE0     		b	.L59
 786              	.LVL103:
 787              	.L73:
 252:Middlewares/Third_Party/wakaama/registration.c ****         return COAP_500_INTERNAL_SERVER_ERROR;
 788              		.loc 1 252 0
 789 00ea 3846     		mov	r0, r7
 790              	.LVL104:
 791 00ec FFF7FEFF 		bl	lwm2m_free
 792              	.LVL105:
 253:Middlewares/Third_Party/wakaama/registration.c ****     }
 793              		.loc 1 253 0
 794 00f0 A020     		movs	r0, #160
 795 00f2 26E0     		b	.L59
 796              	.L74:
 257:Middlewares/Third_Party/wakaama/registration.c ****         lwm2m_free(query);
 797              		.loc 1 257 0
 798 00f4 3846     		mov	r0, r7
 799 00f6 FFF7FEFF 		bl	lwm2m_free
 800              	.LVL106:
 258:Middlewares/Third_Party/wakaama/registration.c ****         return COAP_500_INTERNAL_SERVER_ERROR;
 801              		.loc 1 258 0
 802 00fa 4046     		mov	r0, r8
ARM GAS  /var/folders/0d/93p3r6493yg7p0rvl_4r983m0000gn/T//ccQ77D09.s 			page 27


 803 00fc FFF7FEFF 		bl	lwm2m_free
 804              	.LVL107:
 259:Middlewares/Third_Party/wakaama/registration.c ****     }
 805              		.loc 1 259 0
 806 0100 A020     		movs	r0, #160
 807 0102 1EE0     		b	.L59
 808              	.L75:
 264:Middlewares/Third_Party/wakaama/registration.c ****     }
 809              		.loc 1 264 0
 810 0104 A16A     		ldr	r1, [r4, #40]
 811 0106 B088     		ldrh	r0, [r6, #4]
 812 0108 FFF7FEFF 		bl	lwm2m_connect_server
 813              	.LVL108:
 814 010c F061     		str	r0, [r6, #28]
 815 010e A7E7     		b	.L64
 816              	.L76:
 269:Middlewares/Third_Party/wakaama/registration.c ****         lwm2m_free(query);
 817              		.loc 1 269 0
 818 0110 3846     		mov	r0, r7
 819 0112 FFF7FEFF 		bl	lwm2m_free
 820              	.LVL109:
 270:Middlewares/Third_Party/wakaama/registration.c ****         return COAP_503_SERVICE_UNAVAILABLE;
 821              		.loc 1 270 0
 822 0116 4046     		mov	r0, r8
 823 0118 FFF7FEFF 		bl	lwm2m_free
 824              	.LVL110:
 271:Middlewares/Third_Party/wakaama/registration.c ****     }
 825              		.loc 1 271 0
 826 011c A320     		movs	r0, #163
 827 011e 10E0     		b	.L59
 828              	.LVL111:
 829              	.L77:
 277:Middlewares/Third_Party/wakaama/registration.c ****         lwm2m_free(query);
 830              		.loc 1 277 0
 831 0120 3846     		mov	r0, r7
 832              	.LVL112:
 833 0122 FFF7FEFF 		bl	lwm2m_free
 834              	.LVL113:
 278:Middlewares/Third_Party/wakaama/registration.c ****         return COAP_503_SERVICE_UNAVAILABLE;
 835              		.loc 1 278 0
 836 0126 4046     		mov	r0, r8
 837 0128 FFF7FEFF 		bl	lwm2m_free
 838              	.LVL114:
 279:Middlewares/Third_Party/wakaama/registration.c ****     }
 839              		.loc 1 279 0
 840 012c A320     		movs	r0, #163
 841 012e 08E0     		b	.L59
 842              	.L78:
 293:Middlewares/Third_Party/wakaama/registration.c ****         lwm2m_free(query);
 843              		.loc 1 293 0
 844 0130 3846     		mov	r0, r7
 845 0132 FFF7FEFF 		bl	lwm2m_free
 846              	.LVL115:
 294:Middlewares/Third_Party/wakaama/registration.c ****         return COAP_503_SERVICE_UNAVAILABLE;
 847              		.loc 1 294 0
 848 0136 4046     		mov	r0, r8
 849 0138 FFF7FEFF 		bl	lwm2m_free
ARM GAS  /var/folders/0d/93p3r6493yg7p0rvl_4r983m0000gn/T//ccQ77D09.s 			page 28


 850              	.LVL116:
 295:Middlewares/Third_Party/wakaama/registration.c ****     }
 851              		.loc 1 295 0
 852 013c A320     		movs	r0, #163
 853 013e 00E0     		b	.L59
 854              	.LVL117:
 855              	.L68:
 233:Middlewares/Third_Party/wakaama/registration.c ****     payload = lwm2m_malloc(payload_length);
 856              		.loc 1 233 0
 857 0140 A020     		movs	r0, #160
 858              	.LVL118:
 859              	.L59:
 303:Middlewares/Third_Party/wakaama/registration.c **** 
 860              		.loc 1 303 0
 861 0142 05B0     		add	sp, sp, #20
 862              	.LCFI9:
 863              		.cfi_remember_state
 864              		.cfi_def_cfa_offset 28
 865              		@ sp needed
 866 0144 BDE8F083 		pop	{r4, r5, r6, r7, r8, r9, pc}
 867              	.LVL119:
 868              	.L69:
 869              	.LCFI10:
 870              		.cfi_restore_state
 235:Middlewares/Third_Party/wakaama/registration.c ****     payload_length = object_getRegisterPayload(contextP, payload, payload_length);
 871              		.loc 1 235 0
 872 0148 A020     		movs	r0, #160
 873              	.LVL120:
 874 014a FAE7     		b	.L59
 875              	.L80:
 876              		.align	2
 877              	.L79:
 878 014c 00000000 		.word	.LC9
 879 0150 00000000 		.word	prv_handleRegistrationReply
 880              		.cfi_endproc
 881              	.LFE6:
 883              		.section	.text.prv_updateRegistration,"ax",%progbits
 884              		.align	1
 885              		.syntax unified
 886              		.thumb
 887              		.thumb_func
 888              		.fpu fpv4-sp-d16
 890              	prv_updateRegistration:
 891              	.LFB8:
 334:Middlewares/Third_Party/wakaama/registration.c ****     lwm2m_transaction_t * transaction;
 892              		.loc 1 334 0
 893              		.cfi_startproc
 894              		@ args = 0, pretend = 0, frame = 0
 895              		@ frame_needed = 0, uses_anonymous_args = 0
 896              	.LVL121:
 897 0000 2DE9F043 		push	{r4, r5, r6, r7, r8, r9, lr}
 898              	.LCFI11:
 899              		.cfi_def_cfa_offset 28
 900              		.cfi_offset 4, -28
 901              		.cfi_offset 5, -24
 902              		.cfi_offset 6, -20
 903              		.cfi_offset 7, -16
ARM GAS  /var/folders/0d/93p3r6493yg7p0rvl_4r983m0000gn/T//ccQ77D09.s 			page 29


 904              		.cfi_offset 8, -12
 905              		.cfi_offset 9, -8
 906              		.cfi_offset 14, -4
 907 0004 85B0     		sub	sp, sp, #20
 908              	.LCFI12:
 909              		.cfi_def_cfa_offset 48
 910 0006 0446     		mov	r4, r0
 911 0008 0E46     		mov	r6, r1
 912 000a 1746     		mov	r7, r2
 913              	.LVL122:
 339:Middlewares/Third_Party/wakaama/registration.c ****     if (transaction == NULL) return COAP_500_INTERNAL_SERVER_ERROR;
 914              		.loc 1 339 0
 915 000c C869     		ldr	r0, [r1, #28]
 916              	.LVL123:
 917 000e 238C     		ldrh	r3, [r4, #32]
 918 0010 5A1C     		adds	r2, r3, #1
 919              	.LVL124:
 920 0012 2284     		strh	r2, [r4, #32]	@ movhi
 921 0014 0022     		movs	r2, #0
 922 0016 0292     		str	r2, [sp, #8]
 923 0018 0421     		movs	r1, #4
 924              	.LVL125:
 925 001a 0191     		str	r1, [sp, #4]
 926 001c 0093     		str	r3, [sp]
 927 001e 1346     		mov	r3, r2
 928 0020 0221     		movs	r1, #2
 929 0022 FFF7FEFF 		bl	transaction_new
 930              	.LVL126:
 340:Middlewares/Third_Party/wakaama/registration.c **** 
 931              		.loc 1 340 0
 932 0026 0028     		cmp	r0, #0
 933 0028 48D0     		beq	.L88
 934 002a 0546     		mov	r5, r0
 342:Middlewares/Third_Party/wakaama/registration.c **** 
 935              		.loc 1 342 0
 936 002c 716A     		ldr	r1, [r6, #36]
 937 002e 806A     		ldr	r0, [r0, #40]
 938              	.LVL127:
 939 0030 FFF7FEFF 		bl	coap_set_header_uri_path
 940              	.LVL128:
 344:Middlewares/Third_Party/wakaama/registration.c ****     {
 941              		.loc 1 344 0
 942 0034 37B3     		cbz	r7, .L89
 346:Middlewares/Third_Party/wakaama/registration.c ****         if(payload_length == 0)
 943              		.loc 1 346 0
 944 0036 2046     		mov	r0, r4
 945 0038 FFF7FEFF 		bl	object_getRegisterPayloadBufferLength
 946              	.LVL129:
 347:Middlewares/Third_Party/wakaama/registration.c ****         {
 947              		.loc 1 347 0
 948 003c 8146     		mov	r9, r0
 949 003e 78B1     		cbz	r0, .L92
 353:Middlewares/Third_Party/wakaama/registration.c ****         if(!payload)
 950              		.loc 1 353 0
 951 0040 FFF7FEFF 		bl	lwm2m_malloc
 952              	.LVL130:
 354:Middlewares/Third_Party/wakaama/registration.c ****         {
ARM GAS  /var/folders/0d/93p3r6493yg7p0rvl_4r983m0000gn/T//ccQ77D09.s 			page 30


 953              		.loc 1 354 0
 954 0044 8046     		mov	r8, r0
 955 0046 80B1     		cbz	r0, .L93
 360:Middlewares/Third_Party/wakaama/registration.c ****         if(payload_length == 0)
 956              		.loc 1 360 0
 957 0048 4A46     		mov	r2, r9
 958 004a 0146     		mov	r1, r0
 959 004c 2046     		mov	r0, r4
 960              	.LVL131:
 961 004e FFF7FEFF 		bl	object_getRegisterPayload
 962              	.LVL132:
 361:Middlewares/Third_Party/wakaama/registration.c ****         {
 963              		.loc 1 361 0
 964 0052 0246     		mov	r2, r0
 965 0054 70B1     		cbz	r0, .L94
 367:Middlewares/Third_Party/wakaama/registration.c ****     }
 966              		.loc 1 367 0
 967 0056 4146     		mov	r1, r8
 968 0058 A86A     		ldr	r0, [r5, #40]
 969              	.LVL133:
 970 005a FFF7FEFF 		bl	coap_set_payload
 971              	.LVL134:
 972 005e 13E0     		b	.L83
 973              	.LVL135:
 974              	.L92:
 349:Middlewares/Third_Party/wakaama/registration.c ****             return COAP_500_INTERNAL_SERVER_ERROR;
 975              		.loc 1 349 0
 976 0060 2846     		mov	r0, r5
 977              	.LVL136:
 978 0062 FFF7FEFF 		bl	transaction_free
 979              	.LVL137:
 350:Middlewares/Third_Party/wakaama/registration.c ****         }
 980              		.loc 1 350 0
 981 0066 A020     		movs	r0, #160
 982 0068 20E0     		b	.L81
 983              	.LVL138:
 984              	.L93:
 356:Middlewares/Third_Party/wakaama/registration.c ****             return COAP_500_INTERNAL_SERVER_ERROR;
 985              		.loc 1 356 0
 986 006a 2846     		mov	r0, r5
 987              	.LVL139:
 988 006c FFF7FEFF 		bl	transaction_free
 989              	.LVL140:
 357:Middlewares/Third_Party/wakaama/registration.c ****         }
 990              		.loc 1 357 0
 991 0070 A020     		movs	r0, #160
 992 0072 1BE0     		b	.L81
 993              	.LVL141:
 994              	.L94:
 363:Middlewares/Third_Party/wakaama/registration.c ****             lwm2m_free(payload);
 995              		.loc 1 363 0
 996 0074 2846     		mov	r0, r5
 997              	.LVL142:
 998 0076 FFF7FEFF 		bl	transaction_free
 999              	.LVL143:
 364:Middlewares/Third_Party/wakaama/registration.c ****             return COAP_500_INTERNAL_SERVER_ERROR;
 1000              		.loc 1 364 0
ARM GAS  /var/folders/0d/93p3r6493yg7p0rvl_4r983m0000gn/T//ccQ77D09.s 			page 31


 1001 007a 4046     		mov	r0, r8
 1002 007c FFF7FEFF 		bl	lwm2m_free
 1003              	.LVL144:
 365:Middlewares/Third_Party/wakaama/registration.c ****         }
 1004              		.loc 1 365 0
 1005 0080 A020     		movs	r0, #160
 1006 0082 13E0     		b	.L81
 1007              	.LVL145:
 1008              	.L89:
 336:Middlewares/Third_Party/wakaama/registration.c ****     int payload_length;
 1009              		.loc 1 336 0
 1010 0084 4FF00008 		mov	r8, #0
 1011              	.LVL146:
 1012              	.L83:
 370:Middlewares/Third_Party/wakaama/registration.c ****     transaction->userData = (void *) server;
 1013              		.loc 1 370 0
 1014 0088 0D4B     		ldr	r3, .L96
 1015 008a 6B63     		str	r3, [r5, #52]
 371:Middlewares/Third_Party/wakaama/registration.c **** 
 1016              		.loc 1 371 0
 1017 008c AE63     		str	r6, [r5, #56]
 373:Middlewares/Third_Party/wakaama/registration.c **** 
 1018              		.loc 1 373 0
 1019 008e 2946     		mov	r1, r5
 1020 0090 606A     		ldr	r0, [r4, #36]
 1021 0092 FFF7FEFF 		bl	lwm2m_list_add
 1022              	.LVL147:
 1023 0096 6062     		str	r0, [r4, #36]
 375:Middlewares/Third_Party/wakaama/registration.c ****     {
 1024              		.loc 1 375 0
 1025 0098 2946     		mov	r1, r5
 1026 009a 2046     		mov	r0, r4
 1027 009c FFF7FEFF 		bl	transaction_send
 1028              	.LVL148:
 1029 00a0 10B9     		cbnz	r0, .L87
 377:Middlewares/Third_Party/wakaama/registration.c ****     }
 1030              		.loc 1 377 0
 1031 00a2 0423     		movs	r3, #4
 1032 00a4 86F82030 		strb	r3, [r6, #32]
 1033              	.L87:
 380:Middlewares/Third_Party/wakaama/registration.c ****     {
 1034              		.loc 1 380 0
 1035 00a8 1FB9     		cbnz	r7, .L95
 384:Middlewares/Third_Party/wakaama/registration.c **** }
 1036              		.loc 1 384 0
 1037 00aa 0020     		movs	r0, #0
 1038              	.LVL149:
 1039              	.L81:
 385:Middlewares/Third_Party/wakaama/registration.c **** 
 1040              		.loc 1 385 0
 1041 00ac 05B0     		add	sp, sp, #20
 1042              	.LCFI13:
 1043              		.cfi_remember_state
 1044              		.cfi_def_cfa_offset 28
 1045              		@ sp needed
 1046 00ae BDE8F083 		pop	{r4, r5, r6, r7, r8, r9, pc}
 1047              	.LVL150:
ARM GAS  /var/folders/0d/93p3r6493yg7p0rvl_4r983m0000gn/T//ccQ77D09.s 			page 32


 1048              	.L95:
 1049              	.LCFI14:
 1050              		.cfi_restore_state
 382:Middlewares/Third_Party/wakaama/registration.c ****     }
 1051              		.loc 1 382 0
 1052 00b2 4046     		mov	r0, r8
 1053 00b4 FFF7FEFF 		bl	lwm2m_free
 1054              	.LVL151:
 384:Middlewares/Third_Party/wakaama/registration.c **** }
 1055              		.loc 1 384 0
 1056 00b8 0020     		movs	r0, #0
 1057 00ba F7E7     		b	.L81
 1058              	.LVL152:
 1059              	.L88:
 340:Middlewares/Third_Party/wakaama/registration.c **** 
 1060              		.loc 1 340 0
 1061 00bc A020     		movs	r0, #160
 1062              	.LVL153:
 1063 00be F5E7     		b	.L81
 1064              	.L97:
 1065              		.align	2
 1066              	.L96:
 1067 00c0 00000000 		.word	prv_handleRegistrationUpdateReply
 1068              		.cfi_endproc
 1069              	.LFE8:
 1071              		.section	.text.lwm2m_update_registration,"ax",%progbits
 1072              		.align	1
 1073              		.global	lwm2m_update_registration
 1074              		.syntax unified
 1075              		.thumb
 1076              		.thumb_func
 1077              		.fpu fpv4-sp-d16
 1079              	lwm2m_update_registration:
 1080              	.LFB9:
 391:Middlewares/Third_Party/wakaama/registration.c ****     lwm2m_server_t * targetP;
 1081              		.loc 1 391 0
 1082              		.cfi_startproc
 1083              		@ args = 0, pretend = 0, frame = 0
 1084              		@ frame_needed = 0, uses_anonymous_args = 0
 1085              	.LVL154:
 1086 0000 70B5     		push	{r4, r5, r6, lr}
 1087              	.LCFI15:
 1088              		.cfi_def_cfa_offset 16
 1089              		.cfi_offset 4, -16
 1090              		.cfi_offset 5, -12
 1091              		.cfi_offset 6, -8
 1092              		.cfi_offset 14, -4
 1093 0002 0D46     		mov	r5, r1
 1094 0004 1646     		mov	r6, r2
 1095              	.LVL155:
 399:Middlewares/Third_Party/wakaama/registration.c ****     if (targetP == NULL)
 1096              		.loc 1 399 0
 1097 0006 4469     		ldr	r4, [r0, #20]
 1098              	.LVL156:
 400:Middlewares/Third_Party/wakaama/registration.c ****     {
 1099              		.loc 1 400 0
 1100 0008 CCB9     		cbnz	r4, .L100
ARM GAS  /var/folders/0d/93p3r6493yg7p0rvl_4r983m0000gn/T//ccQ77D09.s 			page 33


 402:Middlewares/Third_Party/wakaama/registration.c ****         {
 1101              		.loc 1 402 0
 1102 000a 0021     		movs	r1, #0
 1103              	.LVL157:
 1104 000c FFF7FEFF 		bl	object_getServers
 1105              	.LVL158:
 1106 0010 B0F1FF3F 		cmp	r0, #-1
 1107 0014 13D1     		bne	.L100
 405:Middlewares/Third_Party/wakaama/registration.c ****         }
 1108              		.loc 1 405 0
 1109 0016 8420     		movs	r0, #132
 1110 0018 32E0     		b	.L98
 1111              	.L105:
 418:Middlewares/Third_Party/wakaama/registration.c ****                     {
 1112              		.loc 1 418 0
 1113 001a 26B1     		cbz	r6, .L107
 420:Middlewares/Third_Party/wakaama/registration.c ****                     }
 1114              		.loc 1 420 0
 1115 001c 0623     		movs	r3, #6
 1116 001e 84F82030 		strb	r3, [r4, #32]
 426:Middlewares/Third_Party/wakaama/registration.c ****                 }
 1117              		.loc 1 426 0
 1118 0022 0020     		movs	r0, #0
 1119 0024 2CE0     		b	.L98
 1120              	.L107:
 424:Middlewares/Third_Party/wakaama/registration.c ****                     }
 1121              		.loc 1 424 0
 1122 0026 0523     		movs	r3, #5
 1123 0028 84F82030 		strb	r3, [r4, #32]
 426:Middlewares/Third_Party/wakaama/registration.c ****                 }
 1124              		.loc 1 426 0
 1125 002c 0020     		movs	r0, #0
 1126 002e 27E0     		b	.L98
 1127              	.L103:
 446:Middlewares/Third_Party/wakaama/registration.c ****              || targetP->status == STATE_REG_UPDATE_PENDING)
 1128              		.loc 1 446 0
 1129 0030 94F82030 		ldrb	r3, [r4, #32]	@ zero_extendqisi2
 1130 0034 022B     		cmp	r3, #2
 1131 0036 18D0     		beq	.L108
 447:Middlewares/Third_Party/wakaama/registration.c ****             {
 1132              		.loc 1 447 0
 1133 0038 042B     		cmp	r3, #4
 1134 003a 16D0     		beq	.L108
 1135              	.L104:
 459:Middlewares/Third_Party/wakaama/registration.c ****     }
 1136              		.loc 1 459 0
 1137 003c 2468     		ldr	r4, [r4]
 1138              	.LVL159:
 1139              	.L100:
 408:Middlewares/Third_Party/wakaama/registration.c ****     {
 1140              		.loc 1 408 0
 1141 003e ECB1     		cbz	r4, .L117
 410:Middlewares/Third_Party/wakaama/registration.c ****         {
 1142              		.loc 1 410 0
 1143 0040 002D     		cmp	r5, #0
 1144 0042 F5D0     		beq	.L103
 412:Middlewares/Third_Party/wakaama/registration.c ****             {
ARM GAS  /var/folders/0d/93p3r6493yg7p0rvl_4r983m0000gn/T//ccQ77D09.s 			page 34


 1145              		.loc 1 412 0
 1146 0044 E388     		ldrh	r3, [r4, #6]
 1147 0046 AB42     		cmp	r3, r5
 1148 0048 F8D1     		bne	.L104
 415:Middlewares/Third_Party/wakaama/registration.c ****                  || targetP->status == STATE_REG_UPDATE_PENDING)
 1149              		.loc 1 415 0
 1150 004a 94F82030 		ldrb	r3, [r4, #32]	@ zero_extendqisi2
 1151 004e 022B     		cmp	r3, #2
 1152 0050 E3D0     		beq	.L105
 416:Middlewares/Third_Party/wakaama/registration.c ****                 {
 1153              		.loc 1 416 0
 1154 0052 042B     		cmp	r3, #4
 1155 0054 E1D0     		beq	.L105
 429:Middlewares/Third_Party/wakaama/registration.c ****                 {
 1156              		.loc 1 429 0
 1157 0056 053B     		subs	r3, r3, #5
 1158 0058 DBB2     		uxtb	r3, r3
 428:Middlewares/Third_Party/wakaama/registration.c ****                       || (targetP->status == STATE_REG_UPDATE_NEEDED))
 1159              		.loc 1 428 0
 1160 005a 012B     		cmp	r3, #1
 1161 005c 13D8     		bhi	.L113
 432:Middlewares/Third_Party/wakaama/registration.c ****                     {
 1162              		.loc 1 432 0
 1163 005e A6B1     		cbz	r6, .L114
 434:Middlewares/Third_Party/wakaama/registration.c ****                     }
 1164              		.loc 1 434 0
 1165 0060 0623     		movs	r3, #6
 1166 0062 84F82030 		strb	r3, [r4, #32]
 436:Middlewares/Third_Party/wakaama/registration.c ****                 }
 1167              		.loc 1 436 0
 1168 0066 0020     		movs	r0, #0
 1169 0068 0AE0     		b	.L98
 1170              	.L108:
 449:Middlewares/Third_Party/wakaama/registration.c ****                 {
 1171              		.loc 1 449 0
 1172 006a 1EB1     		cbz	r6, .L109
 451:Middlewares/Third_Party/wakaama/registration.c ****                 }
 1173              		.loc 1 451 0
 1174 006c 0623     		movs	r3, #6
 1175 006e 84F82030 		strb	r3, [r4, #32]
 1176 0072 E3E7     		b	.L104
 1177              	.L109:
 455:Middlewares/Third_Party/wakaama/registration.c ****                 }
 1178              		.loc 1 455 0
 1179 0074 0523     		movs	r3, #5
 1180 0076 84F82030 		strb	r3, [r4, #32]
 1181 007a DFE7     		b	.L104
 1182              	.L117:
 462:Middlewares/Third_Party/wakaama/registration.c ****      && targetP == NULL)
 1183              		.loc 1 462 0
 1184 007c 0DB9     		cbnz	r5, .L115
 397:Middlewares/Third_Party/wakaama/registration.c **** 
 1185              		.loc 1 397 0
 1186 007e 0020     		movs	r0, #0
 1187              	.LVL160:
 1188              	.L98:
 470:Middlewares/Third_Party/wakaama/registration.c **** 
ARM GAS  /var/folders/0d/93p3r6493yg7p0rvl_4r983m0000gn/T//ccQ77D09.s 			page 35


 1189              		.loc 1 470 0
 1190 0080 70BD     		pop	{r4, r5, r6, pc}
 1191              	.LVL161:
 1192              	.L115:
 466:Middlewares/Third_Party/wakaama/registration.c ****     }
 1193              		.loc 1 466 0
 1194 0082 8420     		movs	r0, #132
 1195              	.LVL162:
 469:Middlewares/Third_Party/wakaama/registration.c **** }
 1196              		.loc 1 469 0
 1197 0084 FCE7     		b	.L98
 1198              	.LVL163:
 1199              	.L113:
 440:Middlewares/Third_Party/wakaama/registration.c ****                 }
 1200              		.loc 1 440 0
 1201 0086 8020     		movs	r0, #128
 1202 0088 FAE7     		b	.L98
 1203              	.L114:
 436:Middlewares/Third_Party/wakaama/registration.c ****                 }
 1204              		.loc 1 436 0
 1205 008a 0020     		movs	r0, #0
 1206 008c F8E7     		b	.L98
 1207              		.cfi_endproc
 1208              	.LFE9:
 1210              		.section	.text.registration_start,"ax",%progbits
 1211              		.align	1
 1212              		.global	registration_start
 1213              		.syntax unified
 1214              		.thumb
 1215              		.thumb_func
 1216              		.fpu fpv4-sp-d16
 1218              	registration_start:
 1219              	.LFB10:
 473:Middlewares/Third_Party/wakaama/registration.c ****     lwm2m_server_t * targetP;
 1220              		.loc 1 473 0
 1221              		.cfi_startproc
 1222              		@ args = 0, pretend = 0, frame = 0
 1223              		@ frame_needed = 0, uses_anonymous_args = 0
 1224              	.LVL164:
 1225 0000 38B5     		push	{r3, r4, r5, lr}
 1226              	.LCFI16:
 1227              		.cfi_def_cfa_offset 16
 1228              		.cfi_offset 3, -16
 1229              		.cfi_offset 4, -12
 1230              		.cfi_offset 5, -8
 1231              		.cfi_offset 14, -4
 1232 0002 0546     		mov	r5, r0
 1233              	.LVL165:
 481:Middlewares/Third_Party/wakaama/registration.c ****     while (targetP != NULL && result == COAP_NO_ERROR)
 1234              		.loc 1 481 0
 1235 0004 4469     		ldr	r4, [r0, #20]
 1236              	.LVL166:
 479:Middlewares/Third_Party/wakaama/registration.c **** 
 1237              		.loc 1 479 0
 1238 0006 0020     		movs	r0, #0
 1239              	.LVL167:
 482:Middlewares/Third_Party/wakaama/registration.c ****     {
ARM GAS  /var/folders/0d/93p3r6493yg7p0rvl_4r983m0000gn/T//ccQ77D09.s 			page 36


 1240              		.loc 1 482 0
 1241 0008 04E0     		b	.L119
 1242              	.LVL168:
 1243              	.L120:
 487:Middlewares/Third_Party/wakaama/registration.c ****         }
 1244              		.loc 1 487 0
 1245 000a 2146     		mov	r1, r4
 1246 000c 2846     		mov	r0, r5
 1247              	.LVL169:
 1248 000e FFF7FEFF 		bl	prv_register
 1249              	.LVL170:
 1250              	.L121:
 489:Middlewares/Third_Party/wakaama/registration.c ****     }
 1251              		.loc 1 489 0
 1252 0012 2468     		ldr	r4, [r4]
 1253              	.LVL171:
 1254              	.L119:
 482:Middlewares/Third_Party/wakaama/registration.c ****     {
 1255              		.loc 1 482 0
 1256 0014 3CB1     		cbz	r4, .L122
 482:Middlewares/Third_Party/wakaama/registration.c ****     {
 1257              		.loc 1 482 0 is_stmt 0 discriminator 1
 1258 0016 30B9     		cbnz	r0, .L122
 484:Middlewares/Third_Party/wakaama/registration.c ****          || targetP->status == STATE_REG_FAILED)
 1259              		.loc 1 484 0 is_stmt 1
 1260 0018 94F82030 		ldrb	r3, [r4, #32]	@ zero_extendqisi2
 1261 001c 002B     		cmp	r3, #0
 1262 001e F4D0     		beq	.L120
 485:Middlewares/Third_Party/wakaama/registration.c ****         {
 1263              		.loc 1 485 0
 1264 0020 032B     		cmp	r3, #3
 1265 0022 F6D1     		bne	.L121
 1266 0024 F1E7     		b	.L120
 1267              	.L122:
 493:Middlewares/Third_Party/wakaama/registration.c **** 
 1268              		.loc 1 493 0
 1269 0026 38BD     		pop	{r3, r4, r5, pc}
 1270              		.cfi_endproc
 1271              	.LFE10:
 1273              		.section	.text.registration_getStatus,"ax",%progbits
 1274              		.align	1
 1275              		.global	registration_getStatus
 1276              		.syntax unified
 1277              		.thumb
 1278              		.thumb_func
 1279              		.fpu fpv4-sp-d16
 1281              	registration_getStatus:
 1282              	.LFB11:
 502:Middlewares/Third_Party/wakaama/registration.c ****     lwm2m_server_t * targetP;
 1283              		.loc 1 502 0
 1284              		.cfi_startproc
 1285              		@ args = 0, pretend = 0, frame = 0
 1286              		@ frame_needed = 0, uses_anonymous_args = 0
 1287              		@ link register save eliminated.
 1288              	.LVL172:
 508:Middlewares/Third_Party/wakaama/registration.c ****     reg_status = STATE_REG_FAILED;
 1289              		.loc 1 508 0
ARM GAS  /var/folders/0d/93p3r6493yg7p0rvl_4r983m0000gn/T//ccQ77D09.s 			page 37


 1290 0000 4269     		ldr	r2, [r0, #20]
 1291              	.LVL173:
 509:Middlewares/Third_Party/wakaama/registration.c **** 
 1292              		.loc 1 509 0
 1293 0002 0320     		movs	r0, #3
 1294              	.LVL174:
 511:Middlewares/Third_Party/wakaama/registration.c ****     {
 1295              		.loc 1 511 0
 1296 0004 05E0     		b	.L126
 1297              	.LVL175:
 1298              	.L130:
 520:Middlewares/Third_Party/wakaama/registration.c ****                 {
 1299              		.loc 1 520 0
 1300 0006 0328     		cmp	r0, #3
 1301 0008 02D1     		bne	.L128
 522:Middlewares/Third_Party/wakaama/registration.c ****                 }
 1302              		.loc 1 522 0
 1303 000a 0220     		movs	r0, #2
 1304              	.LVL176:
 1305 000c 00E0     		b	.L128
 1306              	.LVL177:
 1307              	.L132:
 527:Middlewares/Third_Party/wakaama/registration.c ****                 break;
 1308              		.loc 1 527 0
 1309 000e 0120     		movs	r0, #1
 1310              	.LVL178:
 1311              	.L128:
 538:Middlewares/Third_Party/wakaama/registration.c ****     }
 1312              		.loc 1 538 0
 1313 0010 1268     		ldr	r2, [r2]
 1314              	.LVL179:
 1315              	.L126:
 511:Middlewares/Third_Party/wakaama/registration.c ****     {
 1316              		.loc 1 511 0
 1317 0012 9AB1     		cbz	r2, .L134
 514:Middlewares/Third_Party/wakaama/registration.c ****         {
 1318              		.loc 1 514 0
 1319 0014 92F82030 		ldrb	r3, [r2, #32]	@ zero_extendqisi2
 1320 0018 013B     		subs	r3, r3, #1
 1321 001a 052B     		cmp	r3, #5
 1322 001c F8D8     		bhi	.L128
 1323 001e 01A1     		adr	r1, .L129
 1324 0020 51F823F0 		ldr	pc, [r1, r3, lsl #2]
 1325              		.p2align 2
 1326              	.L129:
 1327 0024 0F000000 		.word	.L132+1
 1328 0028 07000000 		.word	.L130+1
 1329 002c 11000000 		.word	.L128+1
 1330 0030 07000000 		.word	.L130+1
 1331 0034 07000000 		.word	.L130+1
 1332 0038 07000000 		.word	.L130+1
 1333              		.p2align 1
 1334              	.L134:
 542:Middlewares/Third_Party/wakaama/registration.c **** 
 1335              		.loc 1 542 0
 1336 003c 7047     		bx	lr
 1337              		.cfi_endproc
ARM GAS  /var/folders/0d/93p3r6493yg7p0rvl_4r983m0000gn/T//ccQ77D09.s 			page 38


 1338              	.LFE11:
 1340 003e 00BF     		.section	.text.registration_deregister,"ax",%progbits
 1341              		.align	1
 1342              		.global	registration_deregister
 1343              		.syntax unified
 1344              		.thumb
 1345              		.thumb_func
 1346              		.fpu fpv4-sp-d16
 1348              	registration_deregister:
 1349              	.LFB13:
 558:Middlewares/Third_Party/wakaama/registration.c **** 
 559:Middlewares/Third_Party/wakaama/registration.c **** void registration_deregister(lwm2m_context_t * contextP,
 560:Middlewares/Third_Party/wakaama/registration.c ****                              lwm2m_server_t * serverP)
 561:Middlewares/Third_Party/wakaama/registration.c **** {
 1350              		.loc 1 561 0
 1351              		.cfi_startproc
 1352              		@ args = 0, pretend = 0, frame = 0
 1353              		@ frame_needed = 0, uses_anonymous_args = 0
 1354              	.LVL180:
 562:Middlewares/Third_Party/wakaama/registration.c ****     lwm2m_transaction_t * transaction;
 563:Middlewares/Third_Party/wakaama/registration.c **** 
 564:Middlewares/Third_Party/wakaama/registration.c ****     LOG_ARG("State: %s, serverP->status: %s", STR_STATE(contextP->state), STR_STATUS(serverP->statu
 565:Middlewares/Third_Party/wakaama/registration.c **** 
 566:Middlewares/Third_Party/wakaama/registration.c ****     if (serverP->status == STATE_DEREGISTERED
 1355              		.loc 1 566 0
 1356 0000 91F82030 		ldrb	r3, [r1, #32]	@ zero_extendqisi2
 1357 0004 012B     		cmp	r3, #1
 1358 0006 2DD9     		bls	.L138
 567:Middlewares/Third_Party/wakaama/registration.c ****      || serverP->status == STATE_REG_PENDING
 568:Middlewares/Third_Party/wakaama/registration.c ****      || serverP->status == STATE_DEREG_PENDING
 1359              		.loc 1 568 0
 1360 0008 072B     		cmp	r3, #7
 1361 000a 2BD0     		beq	.L138
 569:Middlewares/Third_Party/wakaama/registration.c ****      || serverP->status == STATE_REG_FAILED
 1362              		.loc 1 569 0
 1363 000c 032B     		cmp	r3, #3
 1364 000e 29D0     		beq	.L138
 570:Middlewares/Third_Party/wakaama/registration.c ****      || serverP->location == NULL)
 1365              		.loc 1 570 0
 1366 0010 4B6A     		ldr	r3, [r1, #36]
 1367 0012 3BB3     		cbz	r3, .L138
 561:Middlewares/Third_Party/wakaama/registration.c ****     lwm2m_transaction_t * transaction;
 1368              		.loc 1 561 0
 1369 0014 70B5     		push	{r4, r5, r6, lr}
 1370              	.LCFI17:
 1371              		.cfi_def_cfa_offset 16
 1372              		.cfi_offset 4, -16
 1373              		.cfi_offset 5, -12
 1374              		.cfi_offset 6, -8
 1375              		.cfi_offset 14, -4
 1376 0016 84B0     		sub	sp, sp, #16
 1377              	.LCFI18:
 1378              		.cfi_def_cfa_offset 32
 1379 0018 0C46     		mov	r4, r1
 1380 001a 0546     		mov	r5, r0
 571:Middlewares/Third_Party/wakaama/registration.c ****     {
 572:Middlewares/Third_Party/wakaama/registration.c ****         return;
ARM GAS  /var/folders/0d/93p3r6493yg7p0rvl_4r983m0000gn/T//ccQ77D09.s 			page 39


 573:Middlewares/Third_Party/wakaama/registration.c ****     }
 574:Middlewares/Third_Party/wakaama/registration.c **** 
 575:Middlewares/Third_Party/wakaama/registration.c ****     transaction = transaction_new(serverP->sessionH, COAP_DELETE, NULL, NULL, contextP->nextMID++, 
 1381              		.loc 1 575 0
 1382 001c C869     		ldr	r0, [r1, #28]
 1383              	.LVL181:
 1384 001e 2B8C     		ldrh	r3, [r5, #32]
 1385 0020 5A1C     		adds	r2, r3, #1
 1386 0022 2A84     		strh	r2, [r5, #32]	@ movhi
 1387 0024 0022     		movs	r2, #0
 1388 0026 0292     		str	r2, [sp, #8]
 1389 0028 0421     		movs	r1, #4
 1390              	.LVL182:
 1391 002a 0191     		str	r1, [sp, #4]
 1392 002c 0093     		str	r3, [sp]
 1393 002e 1346     		mov	r3, r2
 1394 0030 FFF7FEFF 		bl	transaction_new
 1395              	.LVL183:
 576:Middlewares/Third_Party/wakaama/registration.c ****     if (transaction == NULL) return;
 1396              		.loc 1 576 0
 1397 0034 0646     		mov	r6, r0
 1398 0036 98B1     		cbz	r0, .L135
 577:Middlewares/Third_Party/wakaama/registration.c **** 
 578:Middlewares/Third_Party/wakaama/registration.c ****     coap_set_header_uri_path(transaction->message, serverP->location);
 1399              		.loc 1 578 0
 1400 0038 616A     		ldr	r1, [r4, #36]
 1401 003a 806A     		ldr	r0, [r0, #40]
 1402              	.LVL184:
 1403 003c FFF7FEFF 		bl	coap_set_header_uri_path
 1404              	.LVL185:
 579:Middlewares/Third_Party/wakaama/registration.c **** 
 580:Middlewares/Third_Party/wakaama/registration.c ****     transaction->callback = prv_handleDeregistrationReply;
 1405              		.loc 1 580 0
 1406 0040 094B     		ldr	r3, .L141
 1407 0042 7363     		str	r3, [r6, #52]
 581:Middlewares/Third_Party/wakaama/registration.c ****     transaction->userData = (void *) serverP;
 1408              		.loc 1 581 0
 1409 0044 B463     		str	r4, [r6, #56]
 582:Middlewares/Third_Party/wakaama/registration.c **** 
 583:Middlewares/Third_Party/wakaama/registration.c ****     contextP->transactionList = (lwm2m_transaction_t *)LWM2M_LIST_ADD(contextP->transactionList, tr
 1410              		.loc 1 583 0
 1411 0046 3146     		mov	r1, r6
 1412 0048 686A     		ldr	r0, [r5, #36]
 1413 004a FFF7FEFF 		bl	lwm2m_list_add
 1414              	.LVL186:
 1415 004e 6862     		str	r0, [r5, #36]
 584:Middlewares/Third_Party/wakaama/registration.c ****     if (transaction_send(contextP, transaction) == 0)
 1416              		.loc 1 584 0
 1417 0050 3146     		mov	r1, r6
 1418 0052 2846     		mov	r0, r5
 1419 0054 FFF7FEFF 		bl	transaction_send
 1420              	.LVL187:
 1421 0058 10B9     		cbnz	r0, .L135
 585:Middlewares/Third_Party/wakaama/registration.c ****     {
 586:Middlewares/Third_Party/wakaama/registration.c ****         serverP->status = STATE_DEREG_PENDING;
 1422              		.loc 1 586 0
 1423 005a 0723     		movs	r3, #7
ARM GAS  /var/folders/0d/93p3r6493yg7p0rvl_4r983m0000gn/T//ccQ77D09.s 			page 40


 1424 005c 84F82030 		strb	r3, [r4, #32]
 1425              	.L135:
 587:Middlewares/Third_Party/wakaama/registration.c ****     }
 588:Middlewares/Third_Party/wakaama/registration.c **** }
 1426              		.loc 1 588 0
 1427 0060 04B0     		add	sp, sp, #16
 1428              	.LCFI19:
 1429              		.cfi_def_cfa_offset 16
 1430              		@ sp needed
 1431 0062 70BD     		pop	{r4, r5, r6, pc}
 1432              	.LVL188:
 1433              	.L138:
 1434              	.LCFI20:
 1435              		.cfi_def_cfa_offset 0
 1436              		.cfi_restore 4
 1437              		.cfi_restore 5
 1438              		.cfi_restore 6
 1439              		.cfi_restore 14
 1440 0064 7047     		bx	lr
 1441              	.L142:
 1442 0066 00BF     		.align	2
 1443              	.L141:
 1444 0068 00000000 		.word	prv_handleDeregistrationReply
 1445              		.cfi_endproc
 1446              	.LFE13:
 1448              		.global	__aeabi_l2d
 1449              		.global	__aeabi_dcmpgt
 1450              		.global	__aeabi_dsub
 1451              		.global	__aeabi_d2lz
 1452              		.section	.text.registration_step,"ax",%progbits
 1453              		.align	1
 1454              		.global	registration_step
 1455              		.syntax unified
 1456              		.thumb
 1457              		.thumb_func
 1458              		.fpu fpv4-sp-d16
 1460              	registration_step:
 1461              	.LFB14:
 589:Middlewares/Third_Party/wakaama/registration.c **** #endif
 590:Middlewares/Third_Party/wakaama/registration.c **** 
 591:Middlewares/Third_Party/wakaama/registration.c **** #ifdef LWM2M_SERVER_MODE
 592:Middlewares/Third_Party/wakaama/registration.c **** static void prv_freeClientObjectList(lwm2m_client_object_t * objects)
 593:Middlewares/Third_Party/wakaama/registration.c **** {
 594:Middlewares/Third_Party/wakaama/registration.c ****     while (objects != NULL)
 595:Middlewares/Third_Party/wakaama/registration.c ****     {
 596:Middlewares/Third_Party/wakaama/registration.c ****         lwm2m_client_object_t * objP;
 597:Middlewares/Third_Party/wakaama/registration.c **** 
 598:Middlewares/Third_Party/wakaama/registration.c ****         while (objects->instanceList != NULL)
 599:Middlewares/Third_Party/wakaama/registration.c ****         {
 600:Middlewares/Third_Party/wakaama/registration.c ****             lwm2m_list_t * target;
 601:Middlewares/Third_Party/wakaama/registration.c **** 
 602:Middlewares/Third_Party/wakaama/registration.c ****             target = objects->instanceList;
 603:Middlewares/Third_Party/wakaama/registration.c ****             objects->instanceList = objects->instanceList->next;
 604:Middlewares/Third_Party/wakaama/registration.c ****             lwm2m_free(target);
 605:Middlewares/Third_Party/wakaama/registration.c ****         }
 606:Middlewares/Third_Party/wakaama/registration.c **** 
 607:Middlewares/Third_Party/wakaama/registration.c ****         objP = objects;
ARM GAS  /var/folders/0d/93p3r6493yg7p0rvl_4r983m0000gn/T//ccQ77D09.s 			page 41


 608:Middlewares/Third_Party/wakaama/registration.c ****         objects = objects->next;
 609:Middlewares/Third_Party/wakaama/registration.c ****         lwm2m_free(objP);
 610:Middlewares/Third_Party/wakaama/registration.c ****     }
 611:Middlewares/Third_Party/wakaama/registration.c **** }
 612:Middlewares/Third_Party/wakaama/registration.c **** 
 613:Middlewares/Third_Party/wakaama/registration.c **** static int prv_getParameters(multi_option_t * query,
 614:Middlewares/Third_Party/wakaama/registration.c ****                              char ** nameP,
 615:Middlewares/Third_Party/wakaama/registration.c ****                              uint32_t * lifetimeP,
 616:Middlewares/Third_Party/wakaama/registration.c ****                              char ** msisdnP,
 617:Middlewares/Third_Party/wakaama/registration.c ****                              lwm2m_binding_t * bindingP,
 618:Middlewares/Third_Party/wakaama/registration.c ****                              char ** versionP)
 619:Middlewares/Third_Party/wakaama/registration.c **** {
 620:Middlewares/Third_Party/wakaama/registration.c ****     *nameP = NULL;
 621:Middlewares/Third_Party/wakaama/registration.c ****     *lifetimeP = 0;
 622:Middlewares/Third_Party/wakaama/registration.c ****     *msisdnP = NULL;
 623:Middlewares/Third_Party/wakaama/registration.c ****     *bindingP = BINDING_UNKNOWN;
 624:Middlewares/Third_Party/wakaama/registration.c ****     *versionP = NULL;
 625:Middlewares/Third_Party/wakaama/registration.c **** 
 626:Middlewares/Third_Party/wakaama/registration.c ****     while (query != NULL)
 627:Middlewares/Third_Party/wakaama/registration.c ****     {
 628:Middlewares/Third_Party/wakaama/registration.c ****         if (lwm2m_strncmp((char *)query->data, QUERY_NAME, QUERY_NAME_LEN) == 0)
 629:Middlewares/Third_Party/wakaama/registration.c ****         {
 630:Middlewares/Third_Party/wakaama/registration.c ****             if (*nameP != NULL) goto error;
 631:Middlewares/Third_Party/wakaama/registration.c ****             if (query->len == QUERY_NAME_LEN) goto error;
 632:Middlewares/Third_Party/wakaama/registration.c **** 
 633:Middlewares/Third_Party/wakaama/registration.c ****             *nameP = (char *)lwm2m_malloc(query->len - QUERY_NAME_LEN + 1);
 634:Middlewares/Third_Party/wakaama/registration.c ****             if (*nameP != NULL)
 635:Middlewares/Third_Party/wakaama/registration.c ****             {
 636:Middlewares/Third_Party/wakaama/registration.c ****                 memcpy(*nameP, query->data + QUERY_NAME_LEN, query->len - QUERY_NAME_LEN);
 637:Middlewares/Third_Party/wakaama/registration.c ****                 (*nameP)[query->len - QUERY_NAME_LEN] = 0;
 638:Middlewares/Third_Party/wakaama/registration.c ****             }
 639:Middlewares/Third_Party/wakaama/registration.c ****         }
 640:Middlewares/Third_Party/wakaama/registration.c ****         else if (lwm2m_strncmp((char *)query->data, QUERY_SMS, QUERY_SMS_LEN) == 0)
 641:Middlewares/Third_Party/wakaama/registration.c ****         {
 642:Middlewares/Third_Party/wakaama/registration.c ****             if (*msisdnP != NULL) goto error;
 643:Middlewares/Third_Party/wakaama/registration.c ****             if (query->len == QUERY_SMS_LEN) goto error;
 644:Middlewares/Third_Party/wakaama/registration.c **** 
 645:Middlewares/Third_Party/wakaama/registration.c ****             *msisdnP = (char *)lwm2m_malloc(query->len - QUERY_SMS_LEN + 1);
 646:Middlewares/Third_Party/wakaama/registration.c ****             if (*msisdnP != NULL)
 647:Middlewares/Third_Party/wakaama/registration.c ****             {
 648:Middlewares/Third_Party/wakaama/registration.c ****                 memcpy(*msisdnP, query->data + QUERY_SMS_LEN, query->len - QUERY_SMS_LEN);
 649:Middlewares/Third_Party/wakaama/registration.c ****                 (*msisdnP)[query->len - QUERY_SMS_LEN] = 0;
 650:Middlewares/Third_Party/wakaama/registration.c ****             }
 651:Middlewares/Third_Party/wakaama/registration.c ****         }
 652:Middlewares/Third_Party/wakaama/registration.c ****         else if (lwm2m_strncmp((char *)query->data, QUERY_LIFETIME, QUERY_LIFETIME_LEN) == 0)
 653:Middlewares/Third_Party/wakaama/registration.c ****         {
 654:Middlewares/Third_Party/wakaama/registration.c ****             int i;
 655:Middlewares/Third_Party/wakaama/registration.c **** 
 656:Middlewares/Third_Party/wakaama/registration.c ****             if (*lifetimeP != 0) goto error;
 657:Middlewares/Third_Party/wakaama/registration.c ****             if (query->len == QUERY_LIFETIME_LEN) goto error;
 658:Middlewares/Third_Party/wakaama/registration.c **** 
 659:Middlewares/Third_Party/wakaama/registration.c ****             for (i = QUERY_LIFETIME_LEN ; i < query->len ; i++)
 660:Middlewares/Third_Party/wakaama/registration.c ****             {
 661:Middlewares/Third_Party/wakaama/registration.c ****                 if (query->data[i] < '0' || query->data[i] > '9') goto error;
 662:Middlewares/Third_Party/wakaama/registration.c ****                 *lifetimeP = (*lifetimeP * 10) + (query->data[i] - '0');
 663:Middlewares/Third_Party/wakaama/registration.c ****             }
 664:Middlewares/Third_Party/wakaama/registration.c ****         }
ARM GAS  /var/folders/0d/93p3r6493yg7p0rvl_4r983m0000gn/T//ccQ77D09.s 			page 42


 665:Middlewares/Third_Party/wakaama/registration.c ****         else if (lwm2m_strncmp((char *)query->data, QUERY_VERSION, QUERY_VERSION_LEN) == 0)
 666:Middlewares/Third_Party/wakaama/registration.c ****         {
 667:Middlewares/Third_Party/wakaama/registration.c ****             if (*versionP != NULL) goto error;
 668:Middlewares/Third_Party/wakaama/registration.c ****             if (query->len == QUERY_VERSION_LEN) goto error;
 669:Middlewares/Third_Party/wakaama/registration.c **** 
 670:Middlewares/Third_Party/wakaama/registration.c ****             *versionP = (char *)lwm2m_malloc(query->len - QUERY_VERSION_LEN + 1);
 671:Middlewares/Third_Party/wakaama/registration.c ****             if (*versionP != NULL)
 672:Middlewares/Third_Party/wakaama/registration.c ****             {
 673:Middlewares/Third_Party/wakaama/registration.c ****                 memcpy(*versionP, query->data + QUERY_VERSION_LEN, query->len - QUERY_VERSION_LEN);
 674:Middlewares/Third_Party/wakaama/registration.c ****                 (*versionP)[query->len - QUERY_VERSION_LEN] = 0;
 675:Middlewares/Third_Party/wakaama/registration.c ****             }
 676:Middlewares/Third_Party/wakaama/registration.c ****         }
 677:Middlewares/Third_Party/wakaama/registration.c ****         else if (lwm2m_strncmp((char *)query->data, QUERY_BINDING, QUERY_BINDING_LEN) == 0)
 678:Middlewares/Third_Party/wakaama/registration.c ****         {
 679:Middlewares/Third_Party/wakaama/registration.c ****             if (*bindingP != BINDING_UNKNOWN) goto error;
 680:Middlewares/Third_Party/wakaama/registration.c ****             if (query->len == QUERY_BINDING_LEN) goto error;
 681:Middlewares/Third_Party/wakaama/registration.c **** 
 682:Middlewares/Third_Party/wakaama/registration.c ****             *bindingP = utils_stringToBinding(query->data + QUERY_BINDING_LEN, query->len - QUERY_B
 683:Middlewares/Third_Party/wakaama/registration.c ****         }
 684:Middlewares/Third_Party/wakaama/registration.c ****         query = query->next;
 685:Middlewares/Third_Party/wakaama/registration.c ****     }
 686:Middlewares/Third_Party/wakaama/registration.c **** 
 687:Middlewares/Third_Party/wakaama/registration.c ****     return 0;
 688:Middlewares/Third_Party/wakaama/registration.c **** 
 689:Middlewares/Third_Party/wakaama/registration.c **** error:
 690:Middlewares/Third_Party/wakaama/registration.c ****     if (*nameP != NULL) lwm2m_free(*nameP);
 691:Middlewares/Third_Party/wakaama/registration.c ****     if (*msisdnP != NULL) lwm2m_free(*msisdnP);
 692:Middlewares/Third_Party/wakaama/registration.c ****     if (*versionP != NULL) lwm2m_free(*versionP);
 693:Middlewares/Third_Party/wakaama/registration.c **** 
 694:Middlewares/Third_Party/wakaama/registration.c ****     return -1;
 695:Middlewares/Third_Party/wakaama/registration.c **** }
 696:Middlewares/Third_Party/wakaama/registration.c **** 
 697:Middlewares/Third_Party/wakaama/registration.c **** static uint16_t prv_splitLinkAttribute(uint8_t * data,
 698:Middlewares/Third_Party/wakaama/registration.c ****                                        uint16_t length,
 699:Middlewares/Third_Party/wakaama/registration.c ****                                        uint16_t * keyStart,
 700:Middlewares/Third_Party/wakaama/registration.c ****                                        uint16_t * keyLength,
 701:Middlewares/Third_Party/wakaama/registration.c ****                                        uint16_t * valueStart,
 702:Middlewares/Third_Party/wakaama/registration.c ****                                        uint16_t * valueLength)
 703:Middlewares/Third_Party/wakaama/registration.c **** {
 704:Middlewares/Third_Party/wakaama/registration.c ****     uint16_t index;
 705:Middlewares/Third_Party/wakaama/registration.c ****     uint16_t end;
 706:Middlewares/Third_Party/wakaama/registration.c **** 
 707:Middlewares/Third_Party/wakaama/registration.c ****     index = 0;
 708:Middlewares/Third_Party/wakaama/registration.c ****     while (index < length && data[index] == ' ') index++;
 709:Middlewares/Third_Party/wakaama/registration.c ****     if (index == length) return 0;
 710:Middlewares/Third_Party/wakaama/registration.c **** 
 711:Middlewares/Third_Party/wakaama/registration.c ****     if (data[index] == REG_ATTR_SEPARATOR)
 712:Middlewares/Third_Party/wakaama/registration.c ****     {
 713:Middlewares/Third_Party/wakaama/registration.c ****         index++;
 714:Middlewares/Third_Party/wakaama/registration.c ****     }
 715:Middlewares/Third_Party/wakaama/registration.c ****     if (index == length) return 0;
 716:Middlewares/Third_Party/wakaama/registration.c **** 
 717:Middlewares/Third_Party/wakaama/registration.c ****     *keyStart = index;
 718:Middlewares/Third_Party/wakaama/registration.c **** 
 719:Middlewares/Third_Party/wakaama/registration.c ****     while (index < length && data[index] != REG_ATTR_EQUALS) index++;
 720:Middlewares/Third_Party/wakaama/registration.c ****     if (index == *keyStart || index == length) return 0;
 721:Middlewares/Third_Party/wakaama/registration.c **** 
ARM GAS  /var/folders/0d/93p3r6493yg7p0rvl_4r983m0000gn/T//ccQ77D09.s 			page 43


 722:Middlewares/Third_Party/wakaama/registration.c ****     *keyLength = index - *keyStart;
 723:Middlewares/Third_Party/wakaama/registration.c **** 
 724:Middlewares/Third_Party/wakaama/registration.c ****     index++;
 725:Middlewares/Third_Party/wakaama/registration.c ****     while (index < length && data[index] == ' ') index++;
 726:Middlewares/Third_Party/wakaama/registration.c ****     if (index == length) return 0;
 727:Middlewares/Third_Party/wakaama/registration.c **** 
 728:Middlewares/Third_Party/wakaama/registration.c ****     *valueStart = index;
 729:Middlewares/Third_Party/wakaama/registration.c **** 
 730:Middlewares/Third_Party/wakaama/registration.c ****     while (index < length && data[index] != REG_ATTR_SEPARATOR) index++;
 731:Middlewares/Third_Party/wakaama/registration.c ****     end = index;
 732:Middlewares/Third_Party/wakaama/registration.c **** 
 733:Middlewares/Third_Party/wakaama/registration.c ****     index--;
 734:Middlewares/Third_Party/wakaama/registration.c ****     while (index > *valueStart && data[index] == ' ') index--;
 735:Middlewares/Third_Party/wakaama/registration.c ****     if (index == *valueStart) return 0;
 736:Middlewares/Third_Party/wakaama/registration.c **** 
 737:Middlewares/Third_Party/wakaama/registration.c ****     *valueLength = index - *valueStart + 1;
 738:Middlewares/Third_Party/wakaama/registration.c **** 
 739:Middlewares/Third_Party/wakaama/registration.c ****     return end;
 740:Middlewares/Third_Party/wakaama/registration.c **** }
 741:Middlewares/Third_Party/wakaama/registration.c **** 
 742:Middlewares/Third_Party/wakaama/registration.c **** static int prv_parseLinkAttributes(uint8_t * data,
 743:Middlewares/Third_Party/wakaama/registration.c ****                                    uint16_t length,
 744:Middlewares/Third_Party/wakaama/registration.c ****                                    bool * supportJSON,
 745:Middlewares/Third_Party/wakaama/registration.c ****                                    char ** altPath)
 746:Middlewares/Third_Party/wakaama/registration.c **** {
 747:Middlewares/Third_Party/wakaama/registration.c ****     uint16_t index;
 748:Middlewares/Third_Party/wakaama/registration.c ****     uint16_t pathStart;
 749:Middlewares/Third_Party/wakaama/registration.c ****     uint16_t pathLength;
 750:Middlewares/Third_Party/wakaama/registration.c ****     bool isValid;
 751:Middlewares/Third_Party/wakaama/registration.c **** 
 752:Middlewares/Third_Party/wakaama/registration.c ****     isValid = false;
 753:Middlewares/Third_Party/wakaama/registration.c **** 
 754:Middlewares/Third_Party/wakaama/registration.c ****     // Expecting application/link-format (RFC6690)
 755:Middlewares/Third_Party/wakaama/registration.c ****     // leading space were removed before. Remove trailing spaces.
 756:Middlewares/Third_Party/wakaama/registration.c ****     while (length > 0 && data[length-1] == ' ') length--;
 757:Middlewares/Third_Party/wakaama/registration.c **** 
 758:Middlewares/Third_Party/wakaama/registration.c ****     // strip open tag
 759:Middlewares/Third_Party/wakaama/registration.c ****     if (length >= 2 && data[0] == REG_URI_START)
 760:Middlewares/Third_Party/wakaama/registration.c ****     {
 761:Middlewares/Third_Party/wakaama/registration.c ****         data += 1;
 762:Middlewares/Third_Party/wakaama/registration.c ****         length -= 1;
 763:Middlewares/Third_Party/wakaama/registration.c ****     }
 764:Middlewares/Third_Party/wakaama/registration.c ****     else
 765:Middlewares/Third_Party/wakaama/registration.c ****     {
 766:Middlewares/Third_Party/wakaama/registration.c ****         return 0;
 767:Middlewares/Third_Party/wakaama/registration.c ****     }
 768:Middlewares/Third_Party/wakaama/registration.c **** 
 769:Middlewares/Third_Party/wakaama/registration.c ****     pathStart = 0;
 770:Middlewares/Third_Party/wakaama/registration.c ****     index = length - 1;
 771:Middlewares/Third_Party/wakaama/registration.c ****     while (index > 0 && data[index] != REG_URI_END) index--;
 772:Middlewares/Third_Party/wakaama/registration.c ****     // link attributes are required
 773:Middlewares/Third_Party/wakaama/registration.c ****     if (index == 0 || index == length - 1) return 0;
 774:Middlewares/Third_Party/wakaama/registration.c **** 
 775:Middlewares/Third_Party/wakaama/registration.c ****     // If there is a preceding /, remove it
 776:Middlewares/Third_Party/wakaama/registration.c ****     if (data[pathStart] == '/')
 777:Middlewares/Third_Party/wakaama/registration.c ****     {
 778:Middlewares/Third_Party/wakaama/registration.c ****         pathStart += 1;
ARM GAS  /var/folders/0d/93p3r6493yg7p0rvl_4r983m0000gn/T//ccQ77D09.s 			page 44


 779:Middlewares/Third_Party/wakaama/registration.c ****     }
 780:Middlewares/Third_Party/wakaama/registration.c ****     pathLength = index - pathStart;
 781:Middlewares/Third_Party/wakaama/registration.c **** 
 782:Middlewares/Third_Party/wakaama/registration.c ****     index++;
 783:Middlewares/Third_Party/wakaama/registration.c ****     if (index >= length || data[index] != REG_ATTR_SEPARATOR) return 0;
 784:Middlewares/Third_Party/wakaama/registration.c ****     index++;
 785:Middlewares/Third_Party/wakaama/registration.c **** 
 786:Middlewares/Third_Party/wakaama/registration.c ****     while (index < length)
 787:Middlewares/Third_Party/wakaama/registration.c ****     {
 788:Middlewares/Third_Party/wakaama/registration.c ****         uint16_t result;
 789:Middlewares/Third_Party/wakaama/registration.c ****         uint16_t keyStart;
 790:Middlewares/Third_Party/wakaama/registration.c ****         uint16_t keyLength;
 791:Middlewares/Third_Party/wakaama/registration.c ****         uint16_t valueStart;
 792:Middlewares/Third_Party/wakaama/registration.c ****         uint16_t valueLength;
 793:Middlewares/Third_Party/wakaama/registration.c **** 
 794:Middlewares/Third_Party/wakaama/registration.c ****         result = prv_splitLinkAttribute(data + index, length - index, &keyStart, &keyLength, &value
 795:Middlewares/Third_Party/wakaama/registration.c ****         if (result == 0) return 0;
 796:Middlewares/Third_Party/wakaama/registration.c **** 
 797:Middlewares/Third_Party/wakaama/registration.c ****         if (keyLength == REG_ATTR_TYPE_KEY_LEN
 798:Middlewares/Third_Party/wakaama/registration.c ****          && 0 == lwm2m_strncmp(REG_ATTR_TYPE_KEY, (char*)data + index + keyStart, keyLength))
 799:Middlewares/Third_Party/wakaama/registration.c ****         {
 800:Middlewares/Third_Party/wakaama/registration.c ****             if (isValid == true) return 0; // declared twice
 801:Middlewares/Third_Party/wakaama/registration.c ****             if (valueLength != REG_ATTR_TYPE_VALUE_LEN
 802:Middlewares/Third_Party/wakaama/registration.c ****              || 0 != lwm2m_strncmp(REG_ATTR_TYPE_VALUE, (char*)data + index + valueStart, valueLeng
 803:Middlewares/Third_Party/wakaama/registration.c ****             {
 804:Middlewares/Third_Party/wakaama/registration.c ****                 return 0;
 805:Middlewares/Third_Party/wakaama/registration.c ****             }
 806:Middlewares/Third_Party/wakaama/registration.c ****             isValid = true;
 807:Middlewares/Third_Party/wakaama/registration.c ****         }
 808:Middlewares/Third_Party/wakaama/registration.c ****         else if (keyLength == REG_ATTR_CONTENT_KEY_LEN
 809:Middlewares/Third_Party/wakaama/registration.c ****               && 0 == lwm2m_strncmp(REG_ATTR_CONTENT_KEY, (char*)data + index + keyStart, keyLength
 810:Middlewares/Third_Party/wakaama/registration.c ****         {
 811:Middlewares/Third_Party/wakaama/registration.c ****             if (*supportJSON == true) return 0; // declared twice
 812:Middlewares/Third_Party/wakaama/registration.c ****             if (valueLength == REG_ATTR_CONTENT_JSON_LEN
 813:Middlewares/Third_Party/wakaama/registration.c ****              && 0 == lwm2m_strncmp(REG_ATTR_CONTENT_JSON, (char*)data + index + valueStart, valueLe
 814:Middlewares/Third_Party/wakaama/registration.c ****             {
 815:Middlewares/Third_Party/wakaama/registration.c ****                 *supportJSON = true;
 816:Middlewares/Third_Party/wakaama/registration.c ****             }
 817:Middlewares/Third_Party/wakaama/registration.c ****             else
 818:Middlewares/Third_Party/wakaama/registration.c ****             {
 819:Middlewares/Third_Party/wakaama/registration.c ****                 return 0;
 820:Middlewares/Third_Party/wakaama/registration.c ****             }
 821:Middlewares/Third_Party/wakaama/registration.c ****         }
 822:Middlewares/Third_Party/wakaama/registration.c ****         // else ignore this one
 823:Middlewares/Third_Party/wakaama/registration.c **** 
 824:Middlewares/Third_Party/wakaama/registration.c ****         index += result;
 825:Middlewares/Third_Party/wakaama/registration.c ****     }
 826:Middlewares/Third_Party/wakaama/registration.c **** 
 827:Middlewares/Third_Party/wakaama/registration.c ****     if (isValid == false) return 0;
 828:Middlewares/Third_Party/wakaama/registration.c **** 
 829:Middlewares/Third_Party/wakaama/registration.c ****     if (pathLength != 0)
 830:Middlewares/Third_Party/wakaama/registration.c ****     {
 831:Middlewares/Third_Party/wakaama/registration.c ****         *altPath = (char *)lwm2m_malloc(pathLength + 1);
 832:Middlewares/Third_Party/wakaama/registration.c ****         if (*altPath == NULL) return 0;
 833:Middlewares/Third_Party/wakaama/registration.c ****         memcpy(*altPath, data + pathStart, pathLength);
 834:Middlewares/Third_Party/wakaama/registration.c ****         (*altPath)[pathLength] = 0;
 835:Middlewares/Third_Party/wakaama/registration.c ****     }
ARM GAS  /var/folders/0d/93p3r6493yg7p0rvl_4r983m0000gn/T//ccQ77D09.s 			page 45


 836:Middlewares/Third_Party/wakaama/registration.c **** 
 837:Middlewares/Third_Party/wakaama/registration.c ****     return 1;
 838:Middlewares/Third_Party/wakaama/registration.c **** }
 839:Middlewares/Third_Party/wakaama/registration.c **** 
 840:Middlewares/Third_Party/wakaama/registration.c **** static int prv_getId(uint8_t * data,
 841:Middlewares/Third_Party/wakaama/registration.c ****                      uint16_t length,
 842:Middlewares/Third_Party/wakaama/registration.c ****                      uint16_t * objId,
 843:Middlewares/Third_Party/wakaama/registration.c ****                      uint16_t * instanceId)
 844:Middlewares/Third_Party/wakaama/registration.c **** {
 845:Middlewares/Third_Party/wakaama/registration.c ****     int value;
 846:Middlewares/Third_Party/wakaama/registration.c ****     uint16_t limit;
 847:Middlewares/Third_Party/wakaama/registration.c **** 
 848:Middlewares/Third_Party/wakaama/registration.c ****     // Expecting application/link-format (RFC6690)
 849:Middlewares/Third_Party/wakaama/registration.c ****     // leading space were removed before. Remove trailing spaces.
 850:Middlewares/Third_Party/wakaama/registration.c ****     while (length > 0 && data[length-1] == ' ') length--;
 851:Middlewares/Third_Party/wakaama/registration.c **** 
 852:Middlewares/Third_Party/wakaama/registration.c ****     // strip open and close tags
 853:Middlewares/Third_Party/wakaama/registration.c ****     if (length >= 1 && data[0] == REG_URI_START && data[length-1] == REG_URI_END)
 854:Middlewares/Third_Party/wakaama/registration.c ****     {
 855:Middlewares/Third_Party/wakaama/registration.c ****         data += 1;
 856:Middlewares/Third_Party/wakaama/registration.c ****         length -= 2;
 857:Middlewares/Third_Party/wakaama/registration.c ****     }
 858:Middlewares/Third_Party/wakaama/registration.c ****     else
 859:Middlewares/Third_Party/wakaama/registration.c ****     {
 860:Middlewares/Third_Party/wakaama/registration.c ****         return 0;
 861:Middlewares/Third_Party/wakaama/registration.c ****     }
 862:Middlewares/Third_Party/wakaama/registration.c **** 
 863:Middlewares/Third_Party/wakaama/registration.c ****     // If there is a preceding /, remove it
 864:Middlewares/Third_Party/wakaama/registration.c ****     if (length >= 1 && data[0] == '/')
 865:Middlewares/Third_Party/wakaama/registration.c ****     {
 866:Middlewares/Third_Party/wakaama/registration.c ****         data += 1;
 867:Middlewares/Third_Party/wakaama/registration.c ****         length -= 1;
 868:Middlewares/Third_Party/wakaama/registration.c ****     }
 869:Middlewares/Third_Party/wakaama/registration.c **** 
 870:Middlewares/Third_Party/wakaama/registration.c ****     limit = 0;
 871:Middlewares/Third_Party/wakaama/registration.c ****     while (limit < length && data[limit] != '/') limit++;
 872:Middlewares/Third_Party/wakaama/registration.c ****     value = uri_getNumber(data, limit);
 873:Middlewares/Third_Party/wakaama/registration.c ****     if (value < 0 || value >= LWM2M_MAX_ID) return 0;
 874:Middlewares/Third_Party/wakaama/registration.c ****     *objId = value;
 875:Middlewares/Third_Party/wakaama/registration.c **** 
 876:Middlewares/Third_Party/wakaama/registration.c ****     if (limit < length)
 877:Middlewares/Third_Party/wakaama/registration.c ****     {
 878:Middlewares/Third_Party/wakaama/registration.c ****         limit += 1;
 879:Middlewares/Third_Party/wakaama/registration.c ****         data += limit;
 880:Middlewares/Third_Party/wakaama/registration.c ****         length -= limit;
 881:Middlewares/Third_Party/wakaama/registration.c **** 
 882:Middlewares/Third_Party/wakaama/registration.c ****         if (length > 0)
 883:Middlewares/Third_Party/wakaama/registration.c ****         {
 884:Middlewares/Third_Party/wakaama/registration.c ****             value = uri_getNumber(data, length);
 885:Middlewares/Third_Party/wakaama/registration.c ****             if (value >= 0 && value < LWM2M_MAX_ID)
 886:Middlewares/Third_Party/wakaama/registration.c ****             {
 887:Middlewares/Third_Party/wakaama/registration.c ****                 *instanceId = value;
 888:Middlewares/Third_Party/wakaama/registration.c ****                 return 2;
 889:Middlewares/Third_Party/wakaama/registration.c ****             }
 890:Middlewares/Third_Party/wakaama/registration.c ****             else
 891:Middlewares/Third_Party/wakaama/registration.c ****             {
 892:Middlewares/Third_Party/wakaama/registration.c ****                 return 0;
ARM GAS  /var/folders/0d/93p3r6493yg7p0rvl_4r983m0000gn/T//ccQ77D09.s 			page 46


 893:Middlewares/Third_Party/wakaama/registration.c ****             }
 894:Middlewares/Third_Party/wakaama/registration.c ****         }
 895:Middlewares/Third_Party/wakaama/registration.c ****     }
 896:Middlewares/Third_Party/wakaama/registration.c **** 
 897:Middlewares/Third_Party/wakaama/registration.c ****     return 1;
 898:Middlewares/Third_Party/wakaama/registration.c **** }
 899:Middlewares/Third_Party/wakaama/registration.c **** 
 900:Middlewares/Third_Party/wakaama/registration.c **** static lwm2m_client_object_t * prv_decodeRegisterPayload(uint8_t * payload,
 901:Middlewares/Third_Party/wakaama/registration.c ****                                                          uint16_t payloadLength,
 902:Middlewares/Third_Party/wakaama/registration.c ****                                                          bool * supportJSON,
 903:Middlewares/Third_Party/wakaama/registration.c ****                                                          char ** altPath)
 904:Middlewares/Third_Party/wakaama/registration.c **** {
 905:Middlewares/Third_Party/wakaama/registration.c ****     uint16_t index;
 906:Middlewares/Third_Party/wakaama/registration.c ****     lwm2m_client_object_t * objList;
 907:Middlewares/Third_Party/wakaama/registration.c ****     bool linkAttrFound;
 908:Middlewares/Third_Party/wakaama/registration.c **** 
 909:Middlewares/Third_Party/wakaama/registration.c ****     *altPath = NULL;
 910:Middlewares/Third_Party/wakaama/registration.c ****     *supportJSON = false;
 911:Middlewares/Third_Party/wakaama/registration.c ****     objList = NULL;
 912:Middlewares/Third_Party/wakaama/registration.c ****     linkAttrFound = false;
 913:Middlewares/Third_Party/wakaama/registration.c ****     index = 0;
 914:Middlewares/Third_Party/wakaama/registration.c **** 
 915:Middlewares/Third_Party/wakaama/registration.c ****     while (index <= payloadLength)
 916:Middlewares/Third_Party/wakaama/registration.c ****     {
 917:Middlewares/Third_Party/wakaama/registration.c ****         uint16_t start;
 918:Middlewares/Third_Party/wakaama/registration.c ****         uint16_t length;
 919:Middlewares/Third_Party/wakaama/registration.c ****         int result;
 920:Middlewares/Third_Party/wakaama/registration.c ****         uint16_t id;
 921:Middlewares/Third_Party/wakaama/registration.c ****         uint16_t instance;
 922:Middlewares/Third_Party/wakaama/registration.c **** 
 923:Middlewares/Third_Party/wakaama/registration.c ****         while (index < payloadLength && payload[index] == ' ') index++;
 924:Middlewares/Third_Party/wakaama/registration.c ****         if (index == payloadLength) break;
 925:Middlewares/Third_Party/wakaama/registration.c **** 
 926:Middlewares/Third_Party/wakaama/registration.c ****         start = index;
 927:Middlewares/Third_Party/wakaama/registration.c ****         while (index < payloadLength && payload[index] != REG_DELIMITER) index++;
 928:Middlewares/Third_Party/wakaama/registration.c ****         length = index - start;
 929:Middlewares/Third_Party/wakaama/registration.c **** 
 930:Middlewares/Third_Party/wakaama/registration.c ****         result = prv_getId(payload + start, length, &id, &instance);
 931:Middlewares/Third_Party/wakaama/registration.c ****         if (result != 0)
 932:Middlewares/Third_Party/wakaama/registration.c ****         {
 933:Middlewares/Third_Party/wakaama/registration.c ****             lwm2m_client_object_t * objectP;
 934:Middlewares/Third_Party/wakaama/registration.c **** 
 935:Middlewares/Third_Party/wakaama/registration.c ****             objectP = (lwm2m_client_object_t *)lwm2m_list_find((lwm2m_list_t *)objList, id);
 936:Middlewares/Third_Party/wakaama/registration.c ****             if (objectP == NULL)
 937:Middlewares/Third_Party/wakaama/registration.c ****             {
 938:Middlewares/Third_Party/wakaama/registration.c ****                 objectP = (lwm2m_client_object_t *)lwm2m_malloc(sizeof(lwm2m_client_object_t));
 939:Middlewares/Third_Party/wakaama/registration.c ****                 memset(objectP, 0, sizeof(lwm2m_client_object_t));
 940:Middlewares/Third_Party/wakaama/registration.c ****                 if (objectP == NULL) goto error;
 941:Middlewares/Third_Party/wakaama/registration.c ****                 objectP->id = id;
 942:Middlewares/Third_Party/wakaama/registration.c ****                 objList = (lwm2m_client_object_t *)LWM2M_LIST_ADD(objList, objectP);
 943:Middlewares/Third_Party/wakaama/registration.c ****             }
 944:Middlewares/Third_Party/wakaama/registration.c ****             if (result == 2)
 945:Middlewares/Third_Party/wakaama/registration.c ****             {
 946:Middlewares/Third_Party/wakaama/registration.c ****                 lwm2m_list_t * instanceP;
 947:Middlewares/Third_Party/wakaama/registration.c **** 
 948:Middlewares/Third_Party/wakaama/registration.c ****                 instanceP = lwm2m_list_find(objectP->instanceList, instance);
 949:Middlewares/Third_Party/wakaama/registration.c ****                 if (instanceP == NULL)
ARM GAS  /var/folders/0d/93p3r6493yg7p0rvl_4r983m0000gn/T//ccQ77D09.s 			page 47


 950:Middlewares/Third_Party/wakaama/registration.c ****                 {
 951:Middlewares/Third_Party/wakaama/registration.c ****                     instanceP = (lwm2m_list_t *)lwm2m_malloc(sizeof(lwm2m_list_t));
 952:Middlewares/Third_Party/wakaama/registration.c ****                     memset(instanceP, 0, sizeof(lwm2m_list_t));
 953:Middlewares/Third_Party/wakaama/registration.c ****                     instanceP->id = instance;
 954:Middlewares/Third_Party/wakaama/registration.c ****                     objectP->instanceList = LWM2M_LIST_ADD(objectP->instanceList, instanceP);
 955:Middlewares/Third_Party/wakaama/registration.c ****                 }
 956:Middlewares/Third_Party/wakaama/registration.c ****             }
 957:Middlewares/Third_Party/wakaama/registration.c ****         }
 958:Middlewares/Third_Party/wakaama/registration.c ****         else if (linkAttrFound == false)
 959:Middlewares/Third_Party/wakaama/registration.c ****         {
 960:Middlewares/Third_Party/wakaama/registration.c ****             result = prv_parseLinkAttributes(payload + start, length, supportJSON, altPath);
 961:Middlewares/Third_Party/wakaama/registration.c ****             if (result == 0) goto error;
 962:Middlewares/Third_Party/wakaama/registration.c **** 
 963:Middlewares/Third_Party/wakaama/registration.c ****             linkAttrFound = true;
 964:Middlewares/Third_Party/wakaama/registration.c ****         }
 965:Middlewares/Third_Party/wakaama/registration.c ****         else goto error;
 966:Middlewares/Third_Party/wakaama/registration.c **** 
 967:Middlewares/Third_Party/wakaama/registration.c ****         index++;
 968:Middlewares/Third_Party/wakaama/registration.c ****     }
 969:Middlewares/Third_Party/wakaama/registration.c **** 
 970:Middlewares/Third_Party/wakaama/registration.c ****     return objList;
 971:Middlewares/Third_Party/wakaama/registration.c **** 
 972:Middlewares/Third_Party/wakaama/registration.c **** error:
 973:Middlewares/Third_Party/wakaama/registration.c ****     if (*altPath != NULL)
 974:Middlewares/Third_Party/wakaama/registration.c ****     {
 975:Middlewares/Third_Party/wakaama/registration.c ****         lwm2m_free(*altPath);
 976:Middlewares/Third_Party/wakaama/registration.c ****         *altPath = NULL;
 977:Middlewares/Third_Party/wakaama/registration.c ****     }
 978:Middlewares/Third_Party/wakaama/registration.c ****     prv_freeClientObjectList(objList);
 979:Middlewares/Third_Party/wakaama/registration.c **** 
 980:Middlewares/Third_Party/wakaama/registration.c ****     return NULL;
 981:Middlewares/Third_Party/wakaama/registration.c **** }
 982:Middlewares/Third_Party/wakaama/registration.c **** 
 983:Middlewares/Third_Party/wakaama/registration.c **** static lwm2m_client_t * prv_getClientByName(lwm2m_context_t * contextP,
 984:Middlewares/Third_Party/wakaama/registration.c ****                                             char * name)
 985:Middlewares/Third_Party/wakaama/registration.c **** {
 986:Middlewares/Third_Party/wakaama/registration.c ****     lwm2m_client_t * targetP;
 987:Middlewares/Third_Party/wakaama/registration.c **** 
 988:Middlewares/Third_Party/wakaama/registration.c ****     targetP = contextP->clientList;
 989:Middlewares/Third_Party/wakaama/registration.c ****     while (targetP != NULL && strcmp(name, targetP->name) != 0)
 990:Middlewares/Third_Party/wakaama/registration.c ****     {
 991:Middlewares/Third_Party/wakaama/registration.c ****         targetP = targetP->next;
 992:Middlewares/Third_Party/wakaama/registration.c ****     }
 993:Middlewares/Third_Party/wakaama/registration.c **** 
 994:Middlewares/Third_Party/wakaama/registration.c ****     return targetP;
 995:Middlewares/Third_Party/wakaama/registration.c **** }
 996:Middlewares/Third_Party/wakaama/registration.c **** 
 997:Middlewares/Third_Party/wakaama/registration.c **** void registration_freeClient(lwm2m_client_t * clientP)
 998:Middlewares/Third_Party/wakaama/registration.c **** {
 999:Middlewares/Third_Party/wakaama/registration.c ****     LOG("Entering");
1000:Middlewares/Third_Party/wakaama/registration.c ****     if (clientP->name != NULL) lwm2m_free(clientP->name);
1001:Middlewares/Third_Party/wakaama/registration.c ****     if (clientP->msisdn != NULL) lwm2m_free(clientP->msisdn);
1002:Middlewares/Third_Party/wakaama/registration.c ****     if (clientP->altPath != NULL) lwm2m_free(clientP->altPath);
1003:Middlewares/Third_Party/wakaama/registration.c ****     prv_freeClientObjectList(clientP->objectList);
1004:Middlewares/Third_Party/wakaama/registration.c ****     while(clientP->observationList != NULL)
1005:Middlewares/Third_Party/wakaama/registration.c ****     {
1006:Middlewares/Third_Party/wakaama/registration.c ****         lwm2m_observation_t * targetP;
ARM GAS  /var/folders/0d/93p3r6493yg7p0rvl_4r983m0000gn/T//ccQ77D09.s 			page 48


1007:Middlewares/Third_Party/wakaama/registration.c **** 
1008:Middlewares/Third_Party/wakaama/registration.c ****         targetP = clientP->observationList;
1009:Middlewares/Third_Party/wakaama/registration.c ****         clientP->observationList = clientP->observationList->next;
1010:Middlewares/Third_Party/wakaama/registration.c ****         lwm2m_free(targetP);
1011:Middlewares/Third_Party/wakaama/registration.c ****     }
1012:Middlewares/Third_Party/wakaama/registration.c ****     lwm2m_free(clientP);
1013:Middlewares/Third_Party/wakaama/registration.c **** }
1014:Middlewares/Third_Party/wakaama/registration.c **** 
1015:Middlewares/Third_Party/wakaama/registration.c **** static int prv_getLocationString(uint16_t id,
1016:Middlewares/Third_Party/wakaama/registration.c ****                                  char location[MAX_LOCATION_LENGTH])
1017:Middlewares/Third_Party/wakaama/registration.c **** {
1018:Middlewares/Third_Party/wakaama/registration.c ****     int index;
1019:Middlewares/Third_Party/wakaama/registration.c ****     int result;
1020:Middlewares/Third_Party/wakaama/registration.c **** 
1021:Middlewares/Third_Party/wakaama/registration.c ****     memset(location, 0, MAX_LOCATION_LENGTH);
1022:Middlewares/Third_Party/wakaama/registration.c **** 
1023:Middlewares/Third_Party/wakaama/registration.c ****     result = utils_stringCopy(location, MAX_LOCATION_LENGTH, "/"URI_REGISTRATION_SEGMENT"/");
1024:Middlewares/Third_Party/wakaama/registration.c ****     if (result < 0) return 0;
1025:Middlewares/Third_Party/wakaama/registration.c ****     index = result;
1026:Middlewares/Third_Party/wakaama/registration.c **** 
1027:Middlewares/Third_Party/wakaama/registration.c ****     result = utils_intToText(id, (uint8_t*)location + index, MAX_LOCATION_LENGTH - index);
1028:Middlewares/Third_Party/wakaama/registration.c ****     if (result == 0) return 0;
1029:Middlewares/Third_Party/wakaama/registration.c **** 
1030:Middlewares/Third_Party/wakaama/registration.c ****     return index + result;
1031:Middlewares/Third_Party/wakaama/registration.c **** }
1032:Middlewares/Third_Party/wakaama/registration.c **** 
1033:Middlewares/Third_Party/wakaama/registration.c **** uint8_t registration_handleRequest(lwm2m_context_t * contextP,
1034:Middlewares/Third_Party/wakaama/registration.c ****                                    lwm2m_uri_t * uriP,
1035:Middlewares/Third_Party/wakaama/registration.c ****                                    void * fromSessionH,
1036:Middlewares/Third_Party/wakaama/registration.c ****                                    coap_packet_t * message,
1037:Middlewares/Third_Party/wakaama/registration.c ****                                    coap_packet_t * response)
1038:Middlewares/Third_Party/wakaama/registration.c **** {
1039:Middlewares/Third_Party/wakaama/registration.c ****     uint8_t result;
1040:Middlewares/Third_Party/wakaama/registration.c ****     time_t tv_sec;
1041:Middlewares/Third_Party/wakaama/registration.c **** 
1042:Middlewares/Third_Party/wakaama/registration.c ****     LOG_URI(uriP);
1043:Middlewares/Third_Party/wakaama/registration.c ****     tv_sec = lwm2m_gettime();
1044:Middlewares/Third_Party/wakaama/registration.c ****     if (tv_sec < 0) return COAP_500_INTERNAL_SERVER_ERROR;
1045:Middlewares/Third_Party/wakaama/registration.c **** 
1046:Middlewares/Third_Party/wakaama/registration.c ****     switch(message->code)
1047:Middlewares/Third_Party/wakaama/registration.c ****     {
1048:Middlewares/Third_Party/wakaama/registration.c ****     case COAP_POST:
1049:Middlewares/Third_Party/wakaama/registration.c ****     {
1050:Middlewares/Third_Party/wakaama/registration.c ****         char * name = NULL;
1051:Middlewares/Third_Party/wakaama/registration.c ****         uint32_t lifetime;
1052:Middlewares/Third_Party/wakaama/registration.c ****         char * msisdn;
1053:Middlewares/Third_Party/wakaama/registration.c ****         char * altPath;
1054:Middlewares/Third_Party/wakaama/registration.c ****         char * version;
1055:Middlewares/Third_Party/wakaama/registration.c ****         lwm2m_binding_t binding;
1056:Middlewares/Third_Party/wakaama/registration.c ****         lwm2m_client_object_t * objects;
1057:Middlewares/Third_Party/wakaama/registration.c ****         bool supportJSON;
1058:Middlewares/Third_Party/wakaama/registration.c ****         lwm2m_client_t * clientP;
1059:Middlewares/Third_Party/wakaama/registration.c ****         char location[MAX_LOCATION_LENGTH];
1060:Middlewares/Third_Party/wakaama/registration.c **** 
1061:Middlewares/Third_Party/wakaama/registration.c ****         if (0 != prv_getParameters(message->uri_query, &name, &lifetime, &msisdn, &binding, &versio
1062:Middlewares/Third_Party/wakaama/registration.c ****         {
1063:Middlewares/Third_Party/wakaama/registration.c ****             return COAP_400_BAD_REQUEST;
ARM GAS  /var/folders/0d/93p3r6493yg7p0rvl_4r983m0000gn/T//ccQ77D09.s 			page 49


1064:Middlewares/Third_Party/wakaama/registration.c ****         }
1065:Middlewares/Third_Party/wakaama/registration.c ****         if (message->content_type != (coap_content_type_t)LWM2M_CONTENT_LINK
1066:Middlewares/Third_Party/wakaama/registration.c ****          && message->content_type != (coap_content_type_t)LWM2M_CONTENT_TEXT)
1067:Middlewares/Third_Party/wakaama/registration.c ****         {
1068:Middlewares/Third_Party/wakaama/registration.c ****             return COAP_400_BAD_REQUEST;
1069:Middlewares/Third_Party/wakaama/registration.c ****         }
1070:Middlewares/Third_Party/wakaama/registration.c **** 
1071:Middlewares/Third_Party/wakaama/registration.c ****         objects = prv_decodeRegisterPayload(message->payload, message->payload_len, &supportJSON, &
1072:Middlewares/Third_Party/wakaama/registration.c **** 
1073:Middlewares/Third_Party/wakaama/registration.c ****         switch (uriP->flag & LWM2M_URI_MASK_ID)
1074:Middlewares/Third_Party/wakaama/registration.c ****         {
1075:Middlewares/Third_Party/wakaama/registration.c ****         case 0:
1076:Middlewares/Third_Party/wakaama/registration.c ****             // Register operation
1077:Middlewares/Third_Party/wakaama/registration.c ****             // Version is mandatory
1078:Middlewares/Third_Party/wakaama/registration.c ****             if (version == NULL)
1079:Middlewares/Third_Party/wakaama/registration.c ****             {
1080:Middlewares/Third_Party/wakaama/registration.c ****                 if (name != NULL) lwm2m_free(name);
1081:Middlewares/Third_Party/wakaama/registration.c ****                 if (msisdn != NULL) lwm2m_free(msisdn);
1082:Middlewares/Third_Party/wakaama/registration.c ****                 return COAP_400_BAD_REQUEST;
1083:Middlewares/Third_Party/wakaama/registration.c ****             }
1084:Middlewares/Third_Party/wakaama/registration.c ****             // Endpoint client name is mandatory
1085:Middlewares/Third_Party/wakaama/registration.c ****             if (name == NULL)
1086:Middlewares/Third_Party/wakaama/registration.c ****             {
1087:Middlewares/Third_Party/wakaama/registration.c ****                 lwm2m_free(version);
1088:Middlewares/Third_Party/wakaama/registration.c ****                 if (msisdn != NULL) lwm2m_free(msisdn);
1089:Middlewares/Third_Party/wakaama/registration.c ****                 return COAP_400_BAD_REQUEST;
1090:Middlewares/Third_Party/wakaama/registration.c ****             }
1091:Middlewares/Third_Party/wakaama/registration.c ****             // Object list is mandatory
1092:Middlewares/Third_Party/wakaama/registration.c ****             if (objects == NULL)
1093:Middlewares/Third_Party/wakaama/registration.c ****             {
1094:Middlewares/Third_Party/wakaama/registration.c ****                 lwm2m_free(version);
1095:Middlewares/Third_Party/wakaama/registration.c ****                 lwm2m_free(name);
1096:Middlewares/Third_Party/wakaama/registration.c ****                 if (msisdn != NULL) lwm2m_free(msisdn);
1097:Middlewares/Third_Party/wakaama/registration.c ****                 return COAP_400_BAD_REQUEST;
1098:Middlewares/Third_Party/wakaama/registration.c ****             }
1099:Middlewares/Third_Party/wakaama/registration.c ****             // version must be 1.0
1100:Middlewares/Third_Party/wakaama/registration.c ****             if (strlen(version) != LWM2M_VERSION_LEN
1101:Middlewares/Third_Party/wakaama/registration.c ****                 || lwm2m_strncmp(version, LWM2M_VERSION, LWM2M_VERSION_LEN))
1102:Middlewares/Third_Party/wakaama/registration.c ****             {
1103:Middlewares/Third_Party/wakaama/registration.c ****                 lwm2m_free(version);
1104:Middlewares/Third_Party/wakaama/registration.c ****                 lwm2m_free(name);
1105:Middlewares/Third_Party/wakaama/registration.c ****                 if (msisdn != NULL) lwm2m_free(msisdn);
1106:Middlewares/Third_Party/wakaama/registration.c ****                 return COAP_412_PRECONDITION_FAILED;
1107:Middlewares/Third_Party/wakaama/registration.c ****             }
1108:Middlewares/Third_Party/wakaama/registration.c **** 
1109:Middlewares/Third_Party/wakaama/registration.c ****             if (lifetime == 0)
1110:Middlewares/Third_Party/wakaama/registration.c ****             {
1111:Middlewares/Third_Party/wakaama/registration.c ****                 lifetime = LWM2M_DEFAULT_LIFETIME;
1112:Middlewares/Third_Party/wakaama/registration.c ****             }
1113:Middlewares/Third_Party/wakaama/registration.c **** 
1114:Middlewares/Third_Party/wakaama/registration.c ****             clientP = prv_getClientByName(contextP, name);
1115:Middlewares/Third_Party/wakaama/registration.c ****             if (clientP != NULL)
1116:Middlewares/Third_Party/wakaama/registration.c ****             {
1117:Middlewares/Third_Party/wakaama/registration.c ****                 // we reset this registration
1118:Middlewares/Third_Party/wakaama/registration.c ****                 lwm2m_free(clientP->name);
1119:Middlewares/Third_Party/wakaama/registration.c ****                 if (clientP->msisdn != NULL) lwm2m_free(clientP->msisdn);
1120:Middlewares/Third_Party/wakaama/registration.c ****                 if (clientP->altPath != NULL) lwm2m_free(clientP->altPath);
ARM GAS  /var/folders/0d/93p3r6493yg7p0rvl_4r983m0000gn/T//ccQ77D09.s 			page 50


1121:Middlewares/Third_Party/wakaama/registration.c ****                 prv_freeClientObjectList(clientP->objectList);
1122:Middlewares/Third_Party/wakaama/registration.c ****                 clientP->objectList = NULL;
1123:Middlewares/Third_Party/wakaama/registration.c ****             }
1124:Middlewares/Third_Party/wakaama/registration.c ****             else
1125:Middlewares/Third_Party/wakaama/registration.c ****             {
1126:Middlewares/Third_Party/wakaama/registration.c ****                 clientP = (lwm2m_client_t *)lwm2m_malloc(sizeof(lwm2m_client_t));
1127:Middlewares/Third_Party/wakaama/registration.c ****                 if (clientP == NULL)
1128:Middlewares/Third_Party/wakaama/registration.c ****                 {
1129:Middlewares/Third_Party/wakaama/registration.c ****                     lwm2m_free(name);
1130:Middlewares/Third_Party/wakaama/registration.c ****                     lwm2m_free(altPath);
1131:Middlewares/Third_Party/wakaama/registration.c ****                     if (msisdn != NULL) lwm2m_free(msisdn);
1132:Middlewares/Third_Party/wakaama/registration.c ****                     prv_freeClientObjectList(objects);
1133:Middlewares/Third_Party/wakaama/registration.c ****                     return COAP_500_INTERNAL_SERVER_ERROR;
1134:Middlewares/Third_Party/wakaama/registration.c ****                 }
1135:Middlewares/Third_Party/wakaama/registration.c ****                 memset(clientP, 0, sizeof(lwm2m_client_t));
1136:Middlewares/Third_Party/wakaama/registration.c ****                 clientP->internalID = lwm2m_list_newId((lwm2m_list_t *)contextP->clientList);
1137:Middlewares/Third_Party/wakaama/registration.c ****                 contextP->clientList = (lwm2m_client_t *)LWM2M_LIST_ADD(contextP->clientList, clien
1138:Middlewares/Third_Party/wakaama/registration.c ****             }
1139:Middlewares/Third_Party/wakaama/registration.c ****             clientP->name = name;
1140:Middlewares/Third_Party/wakaama/registration.c ****             clientP->binding = binding;
1141:Middlewares/Third_Party/wakaama/registration.c ****             clientP->msisdn = msisdn;
1142:Middlewares/Third_Party/wakaama/registration.c ****             clientP->altPath = altPath;
1143:Middlewares/Third_Party/wakaama/registration.c ****             clientP->supportJSON = supportJSON;
1144:Middlewares/Third_Party/wakaama/registration.c ****             clientP->lifetime = lifetime;
1145:Middlewares/Third_Party/wakaama/registration.c ****             clientP->endOfLife = tv_sec + lifetime;
1146:Middlewares/Third_Party/wakaama/registration.c ****             clientP->objectList = objects;
1147:Middlewares/Third_Party/wakaama/registration.c ****             clientP->sessionH = fromSessionH;
1148:Middlewares/Third_Party/wakaama/registration.c **** 
1149:Middlewares/Third_Party/wakaama/registration.c ****             if (prv_getLocationString(clientP->internalID, location) == 0)
1150:Middlewares/Third_Party/wakaama/registration.c ****             {
1151:Middlewares/Third_Party/wakaama/registration.c ****                 registration_freeClient(clientP);
1152:Middlewares/Third_Party/wakaama/registration.c ****                 return COAP_500_INTERNAL_SERVER_ERROR;
1153:Middlewares/Third_Party/wakaama/registration.c ****             }
1154:Middlewares/Third_Party/wakaama/registration.c ****             if (coap_set_header_location_path(response, location) == 0)
1155:Middlewares/Third_Party/wakaama/registration.c ****             {
1156:Middlewares/Third_Party/wakaama/registration.c ****                 registration_freeClient(clientP);
1157:Middlewares/Third_Party/wakaama/registration.c ****                 return COAP_500_INTERNAL_SERVER_ERROR;
1158:Middlewares/Third_Party/wakaama/registration.c ****             }
1159:Middlewares/Third_Party/wakaama/registration.c **** 
1160:Middlewares/Third_Party/wakaama/registration.c ****             if (contextP->monitorCallback != NULL)
1161:Middlewares/Third_Party/wakaama/registration.c ****             {
1162:Middlewares/Third_Party/wakaama/registration.c ****                 contextP->monitorCallback(clientP->internalID, NULL, COAP_201_CREATED, LWM2M_CONTEN
1163:Middlewares/Third_Party/wakaama/registration.c ****             }
1164:Middlewares/Third_Party/wakaama/registration.c ****             result = COAP_201_CREATED;
1165:Middlewares/Third_Party/wakaama/registration.c ****             break;
1166:Middlewares/Third_Party/wakaama/registration.c **** 
1167:Middlewares/Third_Party/wakaama/registration.c ****         case LWM2M_URI_FLAG_OBJECT_ID:
1168:Middlewares/Third_Party/wakaama/registration.c ****             clientP = (lwm2m_client_t *)lwm2m_list_find((lwm2m_list_t *)contextP->clientList, uriP-
1169:Middlewares/Third_Party/wakaama/registration.c ****             if (clientP == NULL) return COAP_404_NOT_FOUND;
1170:Middlewares/Third_Party/wakaama/registration.c **** 
1171:Middlewares/Third_Party/wakaama/registration.c ****             // Endpoint client name MUST NOT be present
1172:Middlewares/Third_Party/wakaama/registration.c ****             if (name != NULL)
1173:Middlewares/Third_Party/wakaama/registration.c ****             {
1174:Middlewares/Third_Party/wakaama/registration.c ****                 lwm2m_free(name);
1175:Middlewares/Third_Party/wakaama/registration.c ****                 if (msisdn != NULL) lwm2m_free(msisdn);
1176:Middlewares/Third_Party/wakaama/registration.c ****                 return COAP_400_BAD_REQUEST;
1177:Middlewares/Third_Party/wakaama/registration.c ****             }
ARM GAS  /var/folders/0d/93p3r6493yg7p0rvl_4r983m0000gn/T//ccQ77D09.s 			page 51


1178:Middlewares/Third_Party/wakaama/registration.c **** 
1179:Middlewares/Third_Party/wakaama/registration.c ****             if (binding != BINDING_UNKNOWN)
1180:Middlewares/Third_Party/wakaama/registration.c ****             {
1181:Middlewares/Third_Party/wakaama/registration.c ****                 clientP->binding = binding;
1182:Middlewares/Third_Party/wakaama/registration.c ****             }
1183:Middlewares/Third_Party/wakaama/registration.c ****             if (msisdn != NULL)
1184:Middlewares/Third_Party/wakaama/registration.c ****             {
1185:Middlewares/Third_Party/wakaama/registration.c ****                 if (clientP->msisdn != NULL) lwm2m_free(clientP->msisdn);
1186:Middlewares/Third_Party/wakaama/registration.c ****                 clientP->msisdn = msisdn;
1187:Middlewares/Third_Party/wakaama/registration.c ****             }
1188:Middlewares/Third_Party/wakaama/registration.c ****             if (lifetime != 0)
1189:Middlewares/Third_Party/wakaama/registration.c ****             {
1190:Middlewares/Third_Party/wakaama/registration.c ****                 clientP->lifetime = lifetime;
1191:Middlewares/Third_Party/wakaama/registration.c ****             }
1192:Middlewares/Third_Party/wakaama/registration.c ****             // client IP address, port or MSISDN may have changed
1193:Middlewares/Third_Party/wakaama/registration.c ****             clientP->sessionH = fromSessionH;
1194:Middlewares/Third_Party/wakaama/registration.c **** 
1195:Middlewares/Third_Party/wakaama/registration.c ****             if (objects != NULL)
1196:Middlewares/Third_Party/wakaama/registration.c ****             {
1197:Middlewares/Third_Party/wakaama/registration.c ****                 lwm2m_observation_t * observationP;
1198:Middlewares/Third_Party/wakaama/registration.c **** 
1199:Middlewares/Third_Party/wakaama/registration.c ****                 // remove observations on object/instance no longer existing
1200:Middlewares/Third_Party/wakaama/registration.c ****                 observationP = clientP->observationList;
1201:Middlewares/Third_Party/wakaama/registration.c ****                 while (observationP != NULL)
1202:Middlewares/Third_Party/wakaama/registration.c ****                 {
1203:Middlewares/Third_Party/wakaama/registration.c ****                     lwm2m_client_object_t * objP;
1204:Middlewares/Third_Party/wakaama/registration.c ****                     lwm2m_observation_t * nextP;
1205:Middlewares/Third_Party/wakaama/registration.c **** 
1206:Middlewares/Third_Party/wakaama/registration.c ****                     nextP = observationP->next;
1207:Middlewares/Third_Party/wakaama/registration.c **** 
1208:Middlewares/Third_Party/wakaama/registration.c ****                     objP = (lwm2m_client_object_t *)lwm2m_list_find((lwm2m_list_t *)objects, observ
1209:Middlewares/Third_Party/wakaama/registration.c ****                     if (objP == NULL)
1210:Middlewares/Third_Party/wakaama/registration.c ****                     {
1211:Middlewares/Third_Party/wakaama/registration.c ****                         observationP->callback(clientP->internalID,
1212:Middlewares/Third_Party/wakaama/registration.c ****                                                &observationP->uri,
1213:Middlewares/Third_Party/wakaama/registration.c ****                                                COAP_202_DELETED,
1214:Middlewares/Third_Party/wakaama/registration.c ****                                                LWM2M_CONTENT_TEXT, NULL, 0,
1215:Middlewares/Third_Party/wakaama/registration.c ****                                                observationP->userData);
1216:Middlewares/Third_Party/wakaama/registration.c ****                         observe_remove(observationP);
1217:Middlewares/Third_Party/wakaama/registration.c ****                     }
1218:Middlewares/Third_Party/wakaama/registration.c ****                     else
1219:Middlewares/Third_Party/wakaama/registration.c ****                     {
1220:Middlewares/Third_Party/wakaama/registration.c ****                         if ((observationP->uri.flag & LWM2M_URI_FLAG_INSTANCE_ID) != 0)
1221:Middlewares/Third_Party/wakaama/registration.c ****                         {
1222:Middlewares/Third_Party/wakaama/registration.c ****                             if (lwm2m_list_find((lwm2m_list_t *)objP->instanceList, observationP->u
1223:Middlewares/Third_Party/wakaama/registration.c ****                             {
1224:Middlewares/Third_Party/wakaama/registration.c ****                                 observationP->callback(clientP->internalID,
1225:Middlewares/Third_Party/wakaama/registration.c ****                                                        &observationP->uri,
1226:Middlewares/Third_Party/wakaama/registration.c ****                                                        COAP_202_DELETED,
1227:Middlewares/Third_Party/wakaama/registration.c ****                                                        LWM2M_CONTENT_TEXT, NULL, 0,
1228:Middlewares/Third_Party/wakaama/registration.c ****                                                        observationP->userData);
1229:Middlewares/Third_Party/wakaama/registration.c ****                                 observe_remove(observationP);
1230:Middlewares/Third_Party/wakaama/registration.c ****                             }
1231:Middlewares/Third_Party/wakaama/registration.c ****                         }
1232:Middlewares/Third_Party/wakaama/registration.c ****                     }
1233:Middlewares/Third_Party/wakaama/registration.c **** 
1234:Middlewares/Third_Party/wakaama/registration.c ****                     observationP = nextP;
ARM GAS  /var/folders/0d/93p3r6493yg7p0rvl_4r983m0000gn/T//ccQ77D09.s 			page 52


1235:Middlewares/Third_Party/wakaama/registration.c ****                 }
1236:Middlewares/Third_Party/wakaama/registration.c **** 
1237:Middlewares/Third_Party/wakaama/registration.c ****                 prv_freeClientObjectList(clientP->objectList);
1238:Middlewares/Third_Party/wakaama/registration.c ****                 clientP->objectList = objects;
1239:Middlewares/Third_Party/wakaama/registration.c ****             }
1240:Middlewares/Third_Party/wakaama/registration.c **** 
1241:Middlewares/Third_Party/wakaama/registration.c ****             clientP->endOfLife = tv_sec + clientP->lifetime;
1242:Middlewares/Third_Party/wakaama/registration.c **** 
1243:Middlewares/Third_Party/wakaama/registration.c ****             if (contextP->monitorCallback != NULL)
1244:Middlewares/Third_Party/wakaama/registration.c ****             {
1245:Middlewares/Third_Party/wakaama/registration.c ****                 contextP->monitorCallback(clientP->internalID, NULL, COAP_204_CHANGED, LWM2M_CONTEN
1246:Middlewares/Third_Party/wakaama/registration.c ****             }
1247:Middlewares/Third_Party/wakaama/registration.c ****             result = COAP_204_CHANGED;
1248:Middlewares/Third_Party/wakaama/registration.c ****             break;
1249:Middlewares/Third_Party/wakaama/registration.c **** 
1250:Middlewares/Third_Party/wakaama/registration.c ****             default:
1251:Middlewares/Third_Party/wakaama/registration.c ****                 return COAP_400_BAD_REQUEST;
1252:Middlewares/Third_Party/wakaama/registration.c ****         }
1253:Middlewares/Third_Party/wakaama/registration.c ****     }
1254:Middlewares/Third_Party/wakaama/registration.c ****     break;
1255:Middlewares/Third_Party/wakaama/registration.c **** 
1256:Middlewares/Third_Party/wakaama/registration.c ****     case COAP_DELETE:
1257:Middlewares/Third_Party/wakaama/registration.c ****     {
1258:Middlewares/Third_Party/wakaama/registration.c ****         lwm2m_client_t * clientP;
1259:Middlewares/Third_Party/wakaama/registration.c **** 
1260:Middlewares/Third_Party/wakaama/registration.c ****         if ((uriP->flag & LWM2M_URI_MASK_ID) != LWM2M_URI_FLAG_OBJECT_ID) return COAP_400_BAD_REQUE
1261:Middlewares/Third_Party/wakaama/registration.c **** 
1262:Middlewares/Third_Party/wakaama/registration.c ****         contextP->clientList = (lwm2m_client_t *)LWM2M_LIST_RM(contextP->clientList, uriP->objectId
1263:Middlewares/Third_Party/wakaama/registration.c ****         if (clientP == NULL) return COAP_400_BAD_REQUEST;
1264:Middlewares/Third_Party/wakaama/registration.c ****         if (contextP->monitorCallback != NULL)
1265:Middlewares/Third_Party/wakaama/registration.c ****         {
1266:Middlewares/Third_Party/wakaama/registration.c ****             contextP->monitorCallback(clientP->internalID, NULL, COAP_202_DELETED, LWM2M_CONTENT_TE
1267:Middlewares/Third_Party/wakaama/registration.c ****         }
1268:Middlewares/Third_Party/wakaama/registration.c ****         registration_freeClient(clientP);
1269:Middlewares/Third_Party/wakaama/registration.c ****         result = COAP_202_DELETED;
1270:Middlewares/Third_Party/wakaama/registration.c ****     }
1271:Middlewares/Third_Party/wakaama/registration.c ****     break;
1272:Middlewares/Third_Party/wakaama/registration.c **** 
1273:Middlewares/Third_Party/wakaama/registration.c ****     default:
1274:Middlewares/Third_Party/wakaama/registration.c ****         return COAP_400_BAD_REQUEST;
1275:Middlewares/Third_Party/wakaama/registration.c ****     }
1276:Middlewares/Third_Party/wakaama/registration.c **** 
1277:Middlewares/Third_Party/wakaama/registration.c ****     return result;
1278:Middlewares/Third_Party/wakaama/registration.c **** }
1279:Middlewares/Third_Party/wakaama/registration.c **** 
1280:Middlewares/Third_Party/wakaama/registration.c **** void lwm2m_set_monitoring_callback(lwm2m_context_t * contextP,
1281:Middlewares/Third_Party/wakaama/registration.c ****                                    lwm2m_result_callback_t callback,
1282:Middlewares/Third_Party/wakaama/registration.c ****                                    void * userData)
1283:Middlewares/Third_Party/wakaama/registration.c **** {
1284:Middlewares/Third_Party/wakaama/registration.c ****     LOG("Entering");
1285:Middlewares/Third_Party/wakaama/registration.c ****     contextP->monitorCallback = callback;
1286:Middlewares/Third_Party/wakaama/registration.c ****     contextP->monitorUserData = userData;
1287:Middlewares/Third_Party/wakaama/registration.c **** }
1288:Middlewares/Third_Party/wakaama/registration.c **** #endif
1289:Middlewares/Third_Party/wakaama/registration.c **** 
1290:Middlewares/Third_Party/wakaama/registration.c **** // for each server update the registration if needed
1291:Middlewares/Third_Party/wakaama/registration.c **** // for each client check if the registration expired
ARM GAS  /var/folders/0d/93p3r6493yg7p0rvl_4r983m0000gn/T//ccQ77D09.s 			page 53


1292:Middlewares/Third_Party/wakaama/registration.c **** void registration_step(lwm2m_context_t * contextP,
1293:Middlewares/Third_Party/wakaama/registration.c ****                        time_t currentTime,
1294:Middlewares/Third_Party/wakaama/registration.c ****                        time_t * timeoutP)
1295:Middlewares/Third_Party/wakaama/registration.c **** {
 1462              		.loc 1 1295 0
 1463              		.cfi_startproc
 1464              		@ args = 4, pretend = 0, frame = 8
 1465              		@ frame_needed = 0, uses_anonymous_args = 0
 1466              	.LVL189:
 1467 0000 2DE9F047 		push	{r4, r5, r6, r7, r8, r9, r10, lr}
 1468              	.LCFI21:
 1469              		.cfi_def_cfa_offset 32
 1470              		.cfi_offset 4, -32
 1471              		.cfi_offset 5, -28
 1472              		.cfi_offset 6, -24
 1473              		.cfi_offset 7, -20
 1474              		.cfi_offset 8, -16
 1475              		.cfi_offset 9, -12
 1476              		.cfi_offset 10, -8
 1477              		.cfi_offset 14, -4
 1478 0004 82B0     		sub	sp, sp, #8
 1479              	.LCFI22:
 1480              		.cfi_def_cfa_offset 40
 1481 0006 0546     		mov	r5, r0
 1482 0008 9046     		mov	r8, r2
 1483 000a 9946     		mov	r9, r3
 1484 000c DDF828A0 		ldr	r10, [sp, #40]
1296:Middlewares/Third_Party/wakaama/registration.c **** #ifdef LWM2M_CLIENT_MODE
1297:Middlewares/Third_Party/wakaama/registration.c ****     lwm2m_server_t * targetP = contextP->serverList;
 1485              		.loc 1 1297 0
 1486 0010 4469     		ldr	r4, [r0, #20]
 1487              	.LVL190:
1298:Middlewares/Third_Party/wakaama/registration.c **** 
1299:Middlewares/Third_Party/wakaama/registration.c ****     LOG_ARG("State: %s", STR_STATE(contextP->state));
1300:Middlewares/Third_Party/wakaama/registration.c **** 
1301:Middlewares/Third_Party/wakaama/registration.c ****     targetP = contextP->serverList;
1302:Middlewares/Third_Party/wakaama/registration.c ****     while (targetP != NULL)
 1488              		.loc 1 1302 0
 1489 0012 3AE0     		b	.L144
 1490              	.LVL191:
 1491              	.L146:
 1492              	.LBB6:
1303:Middlewares/Third_Party/wakaama/registration.c ****     {
1304:Middlewares/Third_Party/wakaama/registration.c ****         switch (targetP->status)
1305:Middlewares/Third_Party/wakaama/registration.c ****         {
1306:Middlewares/Third_Party/wakaama/registration.c ****         case STATE_REGISTERED:
1307:Middlewares/Third_Party/wakaama/registration.c ****         {
1308:Middlewares/Third_Party/wakaama/registration.c ****             time_t nextUpdate;
1309:Middlewares/Third_Party/wakaama/registration.c ****             time_t interval;
1310:Middlewares/Third_Party/wakaama/registration.c **** 
1311:Middlewares/Third_Party/wakaama/registration.c ****             nextUpdate = targetP->lifetime;
 1493              		.loc 1 1311 0
 1494 0014 D4E90267 		ldrd	r6, [r4, #8]
 1495              	.LVL192:
1312:Middlewares/Third_Party/wakaama/registration.c ****             if (COAP_MAX_TRANSMIT_WAIT < nextUpdate)
 1496              		.loc 1 1312 0
 1497 0018 3046     		mov	r0, r6
ARM GAS  /var/folders/0d/93p3r6493yg7p0rvl_4r983m0000gn/T//ccQ77D09.s 			page 54


 1498 001a 3946     		mov	r1, r7
 1499 001c FFF7FEFF 		bl	__aeabi_l2d
 1500              	.LVL193:
 1501 0020 CDE90001 		strd	r0, [sp]
 1502 0024 0022     		movs	r2, #0
 1503 0026 2B4B     		ldr	r3, .L161
 1504 0028 FFF7FEFF 		bl	__aeabi_dcmpgt
 1505              	.LVL194:
 1506 002c E8B1     		cbz	r0, .L157
1313:Middlewares/Third_Party/wakaama/registration.c ****             {
1314:Middlewares/Third_Party/wakaama/registration.c ****                 nextUpdate -= COAP_MAX_TRANSMIT_WAIT;
 1507              		.loc 1 1314 0
 1508 002e 0022     		movs	r2, #0
 1509 0030 284B     		ldr	r3, .L161
 1510 0032 DDE90001 		ldrd	r0, [sp]
 1511 0036 FFF7FEFF 		bl	__aeabi_dsub
 1512              	.LVL195:
 1513 003a FFF7FEFF 		bl	__aeabi_d2lz
 1514              	.LVL196:
 1515              	.L153:
1315:Middlewares/Third_Party/wakaama/registration.c ****             }
1316:Middlewares/Third_Party/wakaama/registration.c ****             else
1317:Middlewares/Third_Party/wakaama/registration.c ****             {
1318:Middlewares/Third_Party/wakaama/registration.c ****                 nextUpdate = nextUpdate >> 1;
1319:Middlewares/Third_Party/wakaama/registration.c ****             }
1320:Middlewares/Third_Party/wakaama/registration.c **** 
1321:Middlewares/Third_Party/wakaama/registration.c ****             interval = targetP->registration + nextUpdate - currentTime;
 1516              		.loc 1 1321 0
 1517 003e D4E90423 		ldrd	r2, [r4, #16]
 1518 0042 8618     		adds	r6, r0, r2
 1519 0044 41EB0307 		adc	r7, r1, r3
 1520 0048 B6EB0800 		subs	r0, r6, r8
 1521              	.LVL197:
 1522 004c 67EB0901 		sbc	r1, r7, r9
 1523              	.LVL198:
1322:Middlewares/Third_Party/wakaama/registration.c ****             if (0 >= interval)
 1524              		.loc 1 1322 0
 1525 0050 0128     		cmp	r0, #1
 1526 0052 71F10003 		sbcs	r3, r1, #0
 1527 0056 0CDB     		blt	.L159
1323:Middlewares/Third_Party/wakaama/registration.c ****             {
1324:Middlewares/Third_Party/wakaama/registration.c ****                 LOG("Updating registration");
1325:Middlewares/Third_Party/wakaama/registration.c ****                 prv_updateRegistration(contextP, targetP, false);
1326:Middlewares/Third_Party/wakaama/registration.c ****             }
1327:Middlewares/Third_Party/wakaama/registration.c ****             else if (interval < *timeoutP)
 1528              		.loc 1 1327 0
 1529 0058 DAE90023 		ldrd	r2, [r10]
 1530 005c 9042     		cmp	r0, r2
 1531 005e 71EB0303 		sbcs	r3, r1, r3
 1532 0062 11DA     		bge	.L145
1328:Middlewares/Third_Party/wakaama/registration.c ****             {
1329:Middlewares/Third_Party/wakaama/registration.c ****                 *timeoutP = interval;
 1533              		.loc 1 1329 0
 1534 0064 CAE90001 		strd	r0, [r10]
 1535 0068 0EE0     		b	.L145
 1536              	.LVL199:
 1537              	.L157:
ARM GAS  /var/folders/0d/93p3r6493yg7p0rvl_4r983m0000gn/T//ccQ77D09.s 			page 55


1318:Middlewares/Third_Party/wakaama/registration.c ****             }
 1538              		.loc 1 1318 0
 1539 006a 7910     		movs	r1, r7, asr #1
 1540 006c 4FEA3600 		mov	r0, r6, rrx
 1541              	.LVL200:
 1542 0070 E5E7     		b	.L153
 1543              	.LVL201:
 1544              	.L159:
1325:Middlewares/Third_Party/wakaama/registration.c ****             }
 1545              		.loc 1 1325 0
 1546 0072 0022     		movs	r2, #0
 1547 0074 2146     		mov	r1, r4
 1548 0076 2846     		mov	r0, r5
 1549              	.LVL202:
 1550 0078 FFF7FEFF 		bl	prv_updateRegistration
 1551              	.LVL203:
 1552 007c 04E0     		b	.L145
 1553              	.L149:
 1554              	.LBE6:
1330:Middlewares/Third_Party/wakaama/registration.c ****             }
1331:Middlewares/Third_Party/wakaama/registration.c ****         }
1332:Middlewares/Third_Party/wakaama/registration.c ****         break;
1333:Middlewares/Third_Party/wakaama/registration.c **** 
1334:Middlewares/Third_Party/wakaama/registration.c ****         case STATE_REG_UPDATE_NEEDED:
1335:Middlewares/Third_Party/wakaama/registration.c ****             prv_updateRegistration(contextP, targetP, false);
 1555              		.loc 1 1335 0
 1556 007e 0022     		movs	r2, #0
 1557 0080 2146     		mov	r1, r4
 1558 0082 2846     		mov	r0, r5
 1559 0084 FFF7FEFF 		bl	prv_updateRegistration
 1560              	.LVL204:
 1561              	.L145:
1336:Middlewares/Third_Party/wakaama/registration.c ****             break;
1337:Middlewares/Third_Party/wakaama/registration.c **** 
1338:Middlewares/Third_Party/wakaama/registration.c ****         case STATE_REG_FULL_UPDATE_NEEDED:
1339:Middlewares/Third_Party/wakaama/registration.c ****             prv_updateRegistration(contextP, targetP, true);
1340:Middlewares/Third_Party/wakaama/registration.c ****             break;
1341:Middlewares/Third_Party/wakaama/registration.c **** 
1342:Middlewares/Third_Party/wakaama/registration.c ****         case STATE_REG_FAILED:
1343:Middlewares/Third_Party/wakaama/registration.c ****             if (targetP->sessionH != NULL)
1344:Middlewares/Third_Party/wakaama/registration.c ****             {
1345:Middlewares/Third_Party/wakaama/registration.c ****                 lwm2m_close_connection(targetP->sessionH, contextP->userData);
1346:Middlewares/Third_Party/wakaama/registration.c ****                 targetP->sessionH = NULL;
1347:Middlewares/Third_Party/wakaama/registration.c ****             }
1348:Middlewares/Third_Party/wakaama/registration.c ****             break;
1349:Middlewares/Third_Party/wakaama/registration.c **** 
1350:Middlewares/Third_Party/wakaama/registration.c ****         default:
1351:Middlewares/Third_Party/wakaama/registration.c ****             break;
1352:Middlewares/Third_Party/wakaama/registration.c ****         }
1353:Middlewares/Third_Party/wakaama/registration.c ****         targetP = targetP->next;
 1562              		.loc 1 1353 0
 1563 0088 2468     		ldr	r4, [r4]
 1564              	.LVL205:
 1565              	.L144:
1302:Middlewares/Third_Party/wakaama/registration.c ****     {
 1566              		.loc 1 1302 0
 1567 008a 04B3     		cbz	r4, .L160
ARM GAS  /var/folders/0d/93p3r6493yg7p0rvl_4r983m0000gn/T//ccQ77D09.s 			page 56


1304:Middlewares/Third_Party/wakaama/registration.c ****         {
 1568              		.loc 1 1304 0
 1569 008c 94F82030 		ldrb	r3, [r4, #32]	@ zero_extendqisi2
 1570 0090 023B     		subs	r3, r3, #2
 1571 0092 042B     		cmp	r3, #4
 1572 0094 F8D8     		bhi	.L145
 1573 0096 01A2     		adr	r2, .L147
 1574 0098 52F823F0 		ldr	pc, [r2, r3, lsl #2]
 1575              		.p2align 2
 1576              	.L147:
 1577 009c 15000000 		.word	.L146+1
 1578 00a0 BD000000 		.word	.L148+1
 1579 00a4 89000000 		.word	.L145+1
 1580 00a8 7F000000 		.word	.L149+1
 1581 00ac B1000000 		.word	.L150+1
 1582              		.p2align 1
 1583              	.L150:
1339:Middlewares/Third_Party/wakaama/registration.c ****             break;
 1584              		.loc 1 1339 0
 1585 00b0 0122     		movs	r2, #1
 1586 00b2 2146     		mov	r1, r4
 1587 00b4 2846     		mov	r0, r5
 1588 00b6 FFF7FEFF 		bl	prv_updateRegistration
 1589              	.LVL206:
1340:Middlewares/Third_Party/wakaama/registration.c **** 
 1590              		.loc 1 1340 0
 1591 00ba E5E7     		b	.L145
 1592              	.L148:
1343:Middlewares/Third_Party/wakaama/registration.c ****             {
 1593              		.loc 1 1343 0
 1594 00bc E069     		ldr	r0, [r4, #28]
 1595 00be 0028     		cmp	r0, #0
 1596 00c0 E2D0     		beq	.L145
1345:Middlewares/Third_Party/wakaama/registration.c ****                 targetP->sessionH = NULL;
 1597              		.loc 1 1345 0
 1598 00c2 A96A     		ldr	r1, [r5, #40]
 1599 00c4 FFF7FEFF 		bl	lwm2m_close_connection
 1600              	.LVL207:
1346:Middlewares/Third_Party/wakaama/registration.c ****             }
 1601              		.loc 1 1346 0
 1602 00c8 0023     		movs	r3, #0
 1603 00ca E361     		str	r3, [r4, #28]
 1604 00cc DCE7     		b	.L145
 1605              	.L160:
1354:Middlewares/Third_Party/wakaama/registration.c ****     }
1355:Middlewares/Third_Party/wakaama/registration.c **** 
1356:Middlewares/Third_Party/wakaama/registration.c **** #endif
1357:Middlewares/Third_Party/wakaama/registration.c **** #ifdef LWM2M_SERVER_MODE
1358:Middlewares/Third_Party/wakaama/registration.c ****     lwm2m_client_t * clientP;
1359:Middlewares/Third_Party/wakaama/registration.c **** 
1360:Middlewares/Third_Party/wakaama/registration.c ****     LOG("Entering");
1361:Middlewares/Third_Party/wakaama/registration.c ****     // monitor clients lifetime
1362:Middlewares/Third_Party/wakaama/registration.c ****     clientP = contextP->clientList;
1363:Middlewares/Third_Party/wakaama/registration.c ****     while (clientP != NULL)
1364:Middlewares/Third_Party/wakaama/registration.c ****     {
1365:Middlewares/Third_Party/wakaama/registration.c ****         lwm2m_client_t * nextP = clientP->next;
1366:Middlewares/Third_Party/wakaama/registration.c **** 
ARM GAS  /var/folders/0d/93p3r6493yg7p0rvl_4r983m0000gn/T//ccQ77D09.s 			page 57


1367:Middlewares/Third_Party/wakaama/registration.c ****         if (clientP->endOfLife <= currentTime)
1368:Middlewares/Third_Party/wakaama/registration.c ****         {
1369:Middlewares/Third_Party/wakaama/registration.c ****             contextP->clientList = (lwm2m_client_t *)LWM2M_LIST_RM(contextP->clientList, clientP->i
1370:Middlewares/Third_Party/wakaama/registration.c ****             if (contextP->monitorCallback != NULL)
1371:Middlewares/Third_Party/wakaama/registration.c ****             {
1372:Middlewares/Third_Party/wakaama/registration.c ****                 contextP->monitorCallback(clientP->internalID, NULL, COAP_202_DELETED, LWM2M_CONTEN
1373:Middlewares/Third_Party/wakaama/registration.c ****             }
1374:Middlewares/Third_Party/wakaama/registration.c ****             registration_freeClient(clientP);
1375:Middlewares/Third_Party/wakaama/registration.c ****         }
1376:Middlewares/Third_Party/wakaama/registration.c ****         else
1377:Middlewares/Third_Party/wakaama/registration.c ****         {
1378:Middlewares/Third_Party/wakaama/registration.c ****             time_t interval;
1379:Middlewares/Third_Party/wakaama/registration.c **** 
1380:Middlewares/Third_Party/wakaama/registration.c ****             interval = clientP->endOfLife - currentTime;
1381:Middlewares/Third_Party/wakaama/registration.c **** 
1382:Middlewares/Third_Party/wakaama/registration.c ****             if (*timeoutP > interval)
1383:Middlewares/Third_Party/wakaama/registration.c ****             {
1384:Middlewares/Third_Party/wakaama/registration.c ****                 *timeoutP = interval;
1385:Middlewares/Third_Party/wakaama/registration.c ****             }
1386:Middlewares/Third_Party/wakaama/registration.c ****         }
1387:Middlewares/Third_Party/wakaama/registration.c ****         clientP = nextP;
1388:Middlewares/Third_Party/wakaama/registration.c ****     }
1389:Middlewares/Third_Party/wakaama/registration.c **** #endif
1390:Middlewares/Third_Party/wakaama/registration.c **** 
1391:Middlewares/Third_Party/wakaama/registration.c **** }
 1606              		.loc 1 1391 0
 1607 00ce 02B0     		add	sp, sp, #8
 1608              	.LCFI23:
 1609              		.cfi_def_cfa_offset 32
 1610              		@ sp needed
 1611 00d0 BDE8F087 		pop	{r4, r5, r6, r7, r8, r9, r10, pc}
 1612              	.LVL208:
 1613              	.L162:
 1614              		.align	2
 1615              	.L161:
 1616 00d4 00405740 		.word	1079459840
 1617              		.cfi_endproc
 1618              	.LFE14:
 1620              		.section	.rodata.prv_getRegistrationQuery.str1.4,"aMS",%progbits,1
 1621              		.align	2
 1622              	.LC0:
 1623 0000 3F6C776D 		.ascii	"?lwm2m=1.0&ep=\000"
 1623      326D3D31 
 1623      2E302665 
 1623      703D00
 1624 000f 00       		.space	1
 1625              	.LC1:
 1626 0010 26736D73 		.ascii	"&sms=\000"
 1626      3D00
 1627 0016 0000     		.space	2
 1628              	.LC2:
 1629 0018 26623D55 		.ascii	"&b=U\000"
 1629      00
 1630 001d 000000   		.space	3
 1631              	.LC3:
 1632 0020 26623D55 		.ascii	"&b=UQ\000"
 1632      5100
ARM GAS  /var/folders/0d/93p3r6493yg7p0rvl_4r983m0000gn/T//ccQ77D09.s 			page 58


 1633 0026 0000     		.space	2
 1634              	.LC4:
 1635 0028 26623D53 		.ascii	"&b=S\000"
 1635      00
 1636 002d 000000   		.space	3
 1637              	.LC5:
 1638 0030 26623D53 		.ascii	"&b=SQ\000"
 1638      5100
 1639 0036 0000     		.space	2
 1640              	.LC6:
 1641 0038 26623D55 		.ascii	"&b=US\000"
 1641      5300
 1642 003e 0000     		.space	2
 1643              	.LC7:
 1644 0040 26623D55 		.ascii	"&b=UQS\000"
 1644      515300
 1645 0047 00       		.space	1
 1646              	.LC8:
 1647 0048 266C743D 		.ascii	"&lt=\000"
 1647      00
 1648              		.section	.rodata.prv_register.str1.4,"aMS",%progbits,1
 1649              		.align	2
 1650              	.LC9:
 1651 0000 2F726400 		.ascii	"/rd\000"
 1652              		.text
 1653              	.Letext0:
 1654              		.file 2 "/usr/local/gcc_arm/gcc-arm-none-eabi-7-2017-q4-major/arm-none-eabi/include/machine/_defau
 1655              		.file 3 "/usr/local/gcc_arm/gcc-arm-none-eabi-7-2017-q4-major/arm-none-eabi/include/sys/_stdint.h"
 1656              		.file 4 "/usr/local/gcc_arm/gcc-arm-none-eabi-7-2017-q4-major/lib/gcc/arm-none-eabi/7.2.1/include/
 1657              		.file 5 "/usr/local/gcc_arm/gcc-arm-none-eabi-7-2017-q4-major/arm-none-eabi/include/sys/lock.h"
 1658              		.file 6 "/usr/local/gcc_arm/gcc-arm-none-eabi-7-2017-q4-major/arm-none-eabi/include/sys/_types.h"
 1659              		.file 7 "/usr/local/gcc_arm/gcc-arm-none-eabi-7-2017-q4-major/arm-none-eabi/include/sys/reent.h"
 1660              		.file 8 "/usr/local/gcc_arm/gcc-arm-none-eabi-7-2017-q4-major/arm-none-eabi/include/sys/_timeval.h
 1661              		.file 9 "/usr/local/gcc_arm/gcc-arm-none-eabi-7-2017-q4-major/arm-none-eabi/include/time.h"
 1662              		.file 10 "Middlewares/Third_Party/wakaama/liblwm2m.h"
 1663              		.file 11 "/usr/local/gcc_arm/gcc-arm-none-eabi-7-2017-q4-major/arm-none-eabi/include/stdlib.h"
 1664              		.file 12 "Middlewares/Third_Party/wakaama/er-coap-13/er-coap-13.h"
 1665              		.file 13 "Middlewares/Third_Party/wakaama/internals.h"
 1666              		.file 14 "/usr/local/gcc_arm/gcc-arm-none-eabi-7-2017-q4-major/arm-none-eabi/include/string.h"
ARM GAS  /var/folders/0d/93p3r6493yg7p0rvl_4r983m0000gn/T//ccQ77D09.s 			page 59


DEFINED SYMBOLS
                            *ABS*:0000000000000000 registration.c
/var/folders/0d/93p3r6493yg7p0rvl_4r983m0000gn/T//ccQ77D09.s:18     .text.prv_handleDeregistrationReply:0000000000000000 $t
/var/folders/0d/93p3r6493yg7p0rvl_4r983m0000gn/T//ccQ77D09.s:24     .text.prv_handleDeregistrationReply:0000000000000000 prv_handleDeregistrationReply
/var/folders/0d/93p3r6493yg7p0rvl_4r983m0000gn/T//ccQ77D09.s:55     .text.prv_handleRegistrationUpdateReply:0000000000000000 $t
/var/folders/0d/93p3r6493yg7p0rvl_4r983m0000gn/T//ccQ77D09.s:61     .text.prv_handleRegistrationUpdateReply:0000000000000000 prv_handleRegistrationUpdateReply
/var/folders/0d/93p3r6493yg7p0rvl_4r983m0000gn/T//ccQ77D09.s:125    .text.prv_handleRegistrationReply:0000000000000000 $t
/var/folders/0d/93p3r6493yg7p0rvl_4r983m0000gn/T//ccQ77D09.s:131    .text.prv_handleRegistrationReply:0000000000000000 prv_handleRegistrationReply
/var/folders/0d/93p3r6493yg7p0rvl_4r983m0000gn/T//ccQ77D09.s:208    .text.prv_getRegistrationQueryLength:0000000000000000 $t
/var/folders/0d/93p3r6493yg7p0rvl_4r983m0000gn/T//ccQ77D09.s:214    .text.prv_getRegistrationQueryLength:0000000000000000 prv_getRegistrationQueryLength
/var/folders/0d/93p3r6493yg7p0rvl_4r983m0000gn/T//ccQ77D09.s:260    .text.prv_getRegistrationQueryLength:000000000000002e $d
/var/folders/0d/93p3r6493yg7p0rvl_4r983m0000gn/T//ccQ77D09.s:266    .text.prv_getRegistrationQueryLength:0000000000000034 $t
/var/folders/0d/93p3r6493yg7p0rvl_4r983m0000gn/T//ccQ77D09.s:349    .text.prv_getRegistrationQuery:0000000000000000 $t
/var/folders/0d/93p3r6493yg7p0rvl_4r983m0000gn/T//ccQ77D09.s:355    .text.prv_getRegistrationQuery:0000000000000000 prv_getRegistrationQuery
/var/folders/0d/93p3r6493yg7p0rvl_4r983m0000gn/T//ccQ77D09.s:437    .text.prv_getRegistrationQuery:000000000000005c $d
/var/folders/0d/93p3r6493yg7p0rvl_4r983m0000gn/T//ccQ77D09.s:443    .text.prv_getRegistrationQuery:0000000000000062 $t
/var/folders/0d/93p3r6493yg7p0rvl_4r983m0000gn/T//ccQ77D09.s:593    .text.prv_getRegistrationQuery:000000000000010c $d
/var/folders/0d/93p3r6493yg7p0rvl_4r983m0000gn/T//ccQ77D09.s:606    .text.prv_register:0000000000000000 $t
/var/folders/0d/93p3r6493yg7p0rvl_4r983m0000gn/T//ccQ77D09.s:612    .text.prv_register:0000000000000000 prv_register
/var/folders/0d/93p3r6493yg7p0rvl_4r983m0000gn/T//ccQ77D09.s:878    .text.prv_register:000000000000014c $d
/var/folders/0d/93p3r6493yg7p0rvl_4r983m0000gn/T//ccQ77D09.s:884    .text.prv_updateRegistration:0000000000000000 $t
/var/folders/0d/93p3r6493yg7p0rvl_4r983m0000gn/T//ccQ77D09.s:890    .text.prv_updateRegistration:0000000000000000 prv_updateRegistration
/var/folders/0d/93p3r6493yg7p0rvl_4r983m0000gn/T//ccQ77D09.s:1067   .text.prv_updateRegistration:00000000000000c0 $d
/var/folders/0d/93p3r6493yg7p0rvl_4r983m0000gn/T//ccQ77D09.s:1072   .text.lwm2m_update_registration:0000000000000000 $t
/var/folders/0d/93p3r6493yg7p0rvl_4r983m0000gn/T//ccQ77D09.s:1079   .text.lwm2m_update_registration:0000000000000000 lwm2m_update_registration
/var/folders/0d/93p3r6493yg7p0rvl_4r983m0000gn/T//ccQ77D09.s:1211   .text.registration_start:0000000000000000 $t
/var/folders/0d/93p3r6493yg7p0rvl_4r983m0000gn/T//ccQ77D09.s:1218   .text.registration_start:0000000000000000 registration_start
/var/folders/0d/93p3r6493yg7p0rvl_4r983m0000gn/T//ccQ77D09.s:1274   .text.registration_getStatus:0000000000000000 $t
/var/folders/0d/93p3r6493yg7p0rvl_4r983m0000gn/T//ccQ77D09.s:1281   .text.registration_getStatus:0000000000000000 registration_getStatus
/var/folders/0d/93p3r6493yg7p0rvl_4r983m0000gn/T//ccQ77D09.s:1327   .text.registration_getStatus:0000000000000024 $d
/var/folders/0d/93p3r6493yg7p0rvl_4r983m0000gn/T//ccQ77D09.s:1333   .text.registration_getStatus:000000000000003c $t
/var/folders/0d/93p3r6493yg7p0rvl_4r983m0000gn/T//ccQ77D09.s:1341   .text.registration_deregister:0000000000000000 $t
/var/folders/0d/93p3r6493yg7p0rvl_4r983m0000gn/T//ccQ77D09.s:1348   .text.registration_deregister:0000000000000000 registration_deregister
/var/folders/0d/93p3r6493yg7p0rvl_4r983m0000gn/T//ccQ77D09.s:1444   .text.registration_deregister:0000000000000068 $d
/var/folders/0d/93p3r6493yg7p0rvl_4r983m0000gn/T//ccQ77D09.s:1453   .text.registration_step:0000000000000000 $t
/var/folders/0d/93p3r6493yg7p0rvl_4r983m0000gn/T//ccQ77D09.s:1460   .text.registration_step:0000000000000000 registration_step
/var/folders/0d/93p3r6493yg7p0rvl_4r983m0000gn/T//ccQ77D09.s:1577   .text.registration_step:000000000000009c $d
/var/folders/0d/93p3r6493yg7p0rvl_4r983m0000gn/T//ccQ77D09.s:1582   .text.registration_step:00000000000000b0 $t
/var/folders/0d/93p3r6493yg7p0rvl_4r983m0000gn/T//ccQ77D09.s:1616   .text.registration_step:00000000000000d4 $d
/var/folders/0d/93p3r6493yg7p0rvl_4r983m0000gn/T//ccQ77D09.s:1621   .rodata.prv_getRegistrationQuery.str1.4:0000000000000000 $d
/var/folders/0d/93p3r6493yg7p0rvl_4r983m0000gn/T//ccQ77D09.s:1649   .rodata.prv_register.str1.4:0000000000000000 $d

UNDEFINED SYMBOLS
lwm2m_gettime
lwm2m_free
coap_get_multi_option_as_string
strlen
utils_intToText
utils_stringCopy
object_getRegisterPayloadBufferLength
lwm2m_malloc
object_getRegisterPayload
transaction_new
coap_set_header_uri_path
coap_set_header_uri_query
coap_set_header_content_type
coap_set_payload
ARM GAS  /var/folders/0d/93p3r6493yg7p0rvl_4r983m0000gn/T//ccQ77D09.s 			page 60


lwm2m_list_add
transaction_send
lwm2m_connect_server
transaction_free
object_getServers
__aeabi_l2d
__aeabi_dcmpgt
__aeabi_dsub
__aeabi_d2lz
lwm2m_close_connection
